= Parameter Storage Manager Functional Specification
:sectnums:
:sectnumlevels: 3
:chapter-label:
:revnumber: 0.3.3
:toc:
:toc-title: Table of Contents
:toclevels: 3
:lang: en
:xrefstyle: short
:figure-caption: Figure
:table-caption: Table
:section-refsig:
:experimental:
ifdef::env-github[:mermaid_block: source,mermaid,subs="attributes"]
ifndef::env-github[:mermaid_block: mermaid,subs="attributes"]
ifdef::env-github,env-vscode[:mermaid_break: break]
ifndef::env-github,env-vscode[:mermaid_break: opt]
ifdef::env-github,env-vscode[:mermaid_critical: critical]
ifndef::env-github,env-vscode[:mermaid_critical: opt]
ifdef::env-github[:mermaid_br: pass:p[&lt;br&gt;]]
ifndef::env-github[:mermaid_br: pass:p[<br>]]

// attributes for Parameter Storage Manager
:none: -

[#_PurposeandScope]
== Purpose and Scope

This document defines the Parameter Storage Manager module, which provides functions for storing and retrieving data as well as reflecting the data to various services within AITRIOS. +
It applies to version XX of XX.

<<<

[#_Terminology]
== Terminology

[#_Terminology_DataStructure]
=== Data Structure
A structure that groups related data. +
It is used to store data. +
For specifications, refer to <<#_DataStructures, Data Structure>>. +

[#_Terminology_MaskStructure]
=== Mask Structure
A structure used to identify the target data for operations. +
For specifications, refer to <<#_MaskStructure, Mask Structure>>. +

[#_Terminology_DataMember]
=== Data Member
A member of the data structure that can be specified in the mask structure. +
For specifications, refer to <<#_MaskStructure, Mask Structure>>. +

[#_Terminology_ImplementationModule]
=== Implementation Module
An ESF module that uses the data storage area access functions provided by the Parameter Storage Manager. +
To use the data storage area access functions, each module must create its own settings. +
For details, refer to <<#_DataStorageAccessFunctionSpecification, Specifications of Data Storage Area Access Functions>>. +

[#_Terminology_DataStorageArea]
=== Data Storage Area
Primarily refers to the non-volatile memory managed by PL Storage, but also includes heap memory and constants. +

[#_Terminology_StoredData]
=== Stored Data
Data stored in the data storage area. +

<<<

[#_ComponentDescription]
== Component Description

[#_ComponentOverview]
=== Component Overview

This module provides functionality for storing configuration information. +
The functions of this module are used internally by the ESF and are not intended for use by applications. +

[#_FigureOverview]
.Overview Diagram
[{mermaid_block}]
----
graph LR;
app["User"]
module["Module"]
ds["Parameter Storage Manager"]
repo[("Data Storage Area")]

app             -->|"Data"| module
module          -->|"Data"| ds
ds              -->|"Data"| repo
----

<<<

[#_ComponentDetails]
=== Component Detailed Description

This component provides three types of data access APIs: save, retrieve, and delete. +
Based on the given mask information, it accesses only the minimum necessary data. +
Additionally, the Factory Reset API can be used to restore stored data to the factory default state.

<<<

[#_StateTransition]
=== State Transition

The possible states of the Parameter Storage Manager are listed in <<#_TableStates>>. +
Also, when an error occurs during any API call, no state transition occurs.

[#_TableStates]
.State List
[width="100%", cols="20%,80%",options="header"]
|===
|State |Description

|UNINIT
|Uninitialized state. Do not call any API except ``**EsfParameterStorageManagerInit**``.

|INIT
|Initialized state.

|===

[#_FigureStateTransition]
.State Transition Diagram
[{mermaid_block}]
----
stateDiagram-v2
    [*] --> UNINIT
    UNINIT --> INIT : EsfParameterStorageManagerInit
    INIT --> UNINIT : EsfParameterStorageManagerDeinit
    UNINIT --> UNINIT : EsfParameterStorageManagerDeinit
    INIT --> INIT : EsfParameterStorageManagerInit{mermaid_br}Other APIs
----

The API availability for each state and the resulting state transitions are shown in <<#_TableStateTransition>>. +
In the table, the state name indicates the destination state after the API execution, implying that the API is available in that state. +
An "×" indicates that the API cannot be called in that state. In such cases, the error ``**kEsfParameterStorageManagerStatusInternal**`` will be returned and no state transition occurs. +
For details on error codes, refer to <<#_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>>.

[#_TableStateTransition]
.State Transition Table
[width="100%", cols="10%,30%,20%,20%"]
|===
2.2+| 2+|State
|UNINIT |INIT
.4+|API Name

|``**EsfParameterStorageManagerInit**``
|INIT
|INIT

|``**EsfParameterStorageManagerDeinit**``
|UNINIT
|UNINIT

|Other APIs
|×
|INIT

|===

<<<

[#_ComponentFunctionList]
=== Component Function List

The following is a list of functions. +

[#_TableFunction]
.Function List
[width="100%", cols="30%,55%,15%", options="header"]
|===
|Function Name |Overview |Section Number

|Initialization Function
|Provides the initialization function for the Parameter Storage Manager.
|<<#_InitializationFunction>>

|Handle Function
|Provides functions related to control handles of the Parameter Storage Manager.
|<<#_HandleFunction>>

|Data Storage Area Access Function
|Provides functions to access the data storage area for saving, retrieving, deleting, and restoring data to factory default. +
|<<#_DataStorageAreaAccessFunction>>

|Cancel Data Update Function
|Provides a function to cancel updates to the data storage area. +
|<<#_CancelDataUpdateFunction>>

|Utility Function
|Provides utility APIs related to the functions of the Parameter Storage Manager. +
|<<#_UtilityFunction>>

|===

<<<

[#_ComponentFunctionDescriptions]
=== Component Function Descriptions

[#_InitializationFunction]
==== Initialization Function

* **Function Overview** +
    Initializes the Parameter Storage Manager. +
    Must be executed before calling any other Parameter Storage Manager API. +

* **Preconditions** +
    None.

* **Function Details** +
    ** Calling ``**EsfParameterStorageManagerInit**`` initializes the internal state and allocates necessary resources. +
        Then, ``**PlStorageInitialize**`` is called to initialize the PL Storage. Initialization errors from PL Storage are ignored and processing continues. +
        After initialization, the Parameter Storage Manager APIs become available. +
    ** Calling ``**EsfParameterStorageManagerDeinit**`` deinitializes the Parameter Storage Manager. +
        ``**PlStorageFinalize**`` is used to finalize the PL Storage. Finalization errors from PL Storage are ignored and processing continues. +
        Afterward, resources are released and the internal state returns to uninitialized. +
    ** For error behavior and recovery methods, refer to each API’s detailed description.

[#_HandleFunction]
==== Handle Function

* **Function Overview** +
    Manages handles used with the Parameter Storage Manager APIs.

* **Preconditions** +
    The Parameter Storage Manager must be initialized.

* **Function Details** +
    ** Calling ``**EsfParameterStorageManagerOpen**`` obtains a handle. +
        Once a handle is obtained, the Parameter Storage Manager APIs can be used. +
    ** Calling ``**EsfParameterStorageManagerClose**`` releases the handle. +
        Please release unused handles using this API. +
    ** For error behavior and recovery methods, refer to each API’s detailed description. +

[#_DataStorageAreaAccessFunction]
==== Data Storage Area Access Function

* **Function Overview** +
    Provides functions to access the data storage area using mask and data structures, allowing for saving, retrieving, deleting, and factory resetting of data. +
    Includes a function to execute Factory Reset and a function to register a callback to be invoked during Factory Reset.

* **Preconditions** +
    The Parameter Storage Manager must be initialized. +
    A handle must be obtained. +

* **Function Details** +
    ** Uses structures that represent information about data members to manipulate data structures. +
    ** Accesses the data storage area using mask and data structures:
        *** Calling ``**EsfParameterStorageManagerSave**`` saves the data members specified in the mask structure to the data storage area.
        *** Calling ``**EsfParameterStorageManagerLoad**`` retrieves the data specified in the mask structure from the data storage area and stores it into the data members.
        *** Calling ``**EsfParameterStorageManagerClear**`` deletes the data specified in the mask structure from the data storage area.
        *** Calling ``**EsfParameterStorageManagerGetSize**`` obtains the size of data saved in the data storage area.
    ** Executes Factory Reset on the data storage area +
        ``**EsfParameterStorageManagerInvokeFactoryReset**`` is the trigger function for restoring the data storage area to factory default state. The following actions are performed:
        . Resets the data listed in <<#_DataSettingTable, Factory Reset Targets>> to factory default.
        . Calls the function registered via ``**EsfParameterStorageManagerRegisterFactoryReset**``. +
    ** Registers a callback function to be invoked during Factory Reset
        *** Calling ``**EsfParameterStorageManagerRegisterFactoryReset**`` registers a callback function with the Parameter Storage Manager that is called during ``**EsfParameterStorageManagerInvokeFactoryReset**``. +
            This is used to reset data not managed by the Parameter Storage Manager or to perform post-processing after Factory Reset. +
    ** The APIs of this function perform access to the data storage area with exclusive control.
            If the implementation module wants to share the exclusive section with this API’s processing, use the following two APIs. These APIs support recursive calls. +
        *** Call ``**EsfParameterStorageManagerLock**`` to start exclusive control. +
        *** Call ``**EsfParameterStorageManagerUnlock**`` to end exclusive control. +

[#_CancelDataUpdateFunction]
==== Cancel Data Update Function

* **Function Overview** +
    Provides a function to cancel updates to the data storage area. +

* **Preconditions** +
    The Parameter Storage Manager must be initialized. +
    A handle must be obtained. +

* **Function Details** +
    ** By using a temporary data storage area, you can choose whether or not to apply the changes made by data access functions to the actual data storage area. +
    ** Calling ``**EsfParameterStorageManagerUpdateBegin**`` allocates a temporary data storage area for the target data. +
        Data access functions will then operate on this temporary data storage area.
    ** Calling ``**EsfParameterStorageManagerUpdateComplete**`` applies the changes in the temporary data storage area to the actual data storage area.
    ** Calling ``**EsfParameterStorageManagerUpdateCancel**`` discards the temporary data storage area without applying its contents to the actual data storage area.
    ** If this feature is not available, these APIs will perform no internal processing and will return ``**kEsfParameterStorageManagerStatusOk**``. +
        You can check the availability of this feature by calling ``**EsfParameterStorageManagerGetCapabilities**`` and referencing ``**EsfParameterStorageManagerCapabilities::cancellable**``.

[#_UtilityFunction]
==== Utility Function

* **Function Overview** +
    Provides utility APIs related to the functions of the Parameter Storage Manager. +

* **Preconditions** +
    The Parameter Storage Manager must be initialized. +

* **Function Details** +
    ** Calling ``**EsfParameterStorageManagerIsDataEmpty**`` checks whether the specified member in the data structure is populated. +
        Macros ending with IS_EMPTY such as ``**ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_IS_EMPTY**`` offer the same functionality.
    ** Calling ``**EsfParameterStorageManagerGetCapabilities**`` checks whether each function of the Parameter Storage Manager is available. +
        For details, refer to <<#_EsfParameterStorageManagerCapabilities, EsfParameterStorageManagerCapabilities>> and <<#_EsfParameterStorageManagerGetCapabilities, EsfParameterStorageManagerGetCapabilities>>.
    ** Calling ``**EsfParameterStorageManagerGetItemCapabilities**`` checks the availability of each function for the data managed by the Parameter Storage Manager. +
        For details, refer to <<#_EsfParameterStorageManagerItemCapabilities, EsfParameterStorageManagerItemCapabilities>> and <<#_EsfParameterStorageManagerGetItemCapabilities, EsfParameterStorageManagerGetItemCapabilities>>.
    ** ``**ESF_PARAMETER_STORAGE_MANAGER_<TYPE NAME>_IS_EMPTY**`` macros check whether data is populated in a member of the specified data type.
    ** ``**ESF_PARAMETER_STORAGE_MANAGER_<TYPE_NAME>_SIZEOF**`` macros obtain the maximum size of a member for a given data type. +
        Used when setting ``**EsfParameterStorageManagerMemberInfo::size**``.
    ** ``**ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED**`` macro is used when defining a function for ``**EsfParameterStorageManagerMemberInfo::enabled**``.

<<<

[#_ComponentNonFunctionalRequirementsList]
=== Component Non-Functional Requirements List

The list of non-functional requirements is shown in <<#_TableNonFunction>>.

[#_TableNonFunction]
.Non-Functional Requirements List
[width="100%", cols="30%,55%,15%",options="header"]
|===
|Requirement Name |Overview |Section Number

|Continuous Processing Time
|The maximum processing time required.
|<<#_ContinuousProcessingTime>>

|Stack Memory Usage
|The maximum amount of stack memory used.
|<<#_StackMemoryUsage>>

|Heap Memory Usage
|The maximum amount of heap memory used.
|<<#_HeapMemoryUsage>>

|Static Memory Usage
|The amount of static memory used.
|<<#_StaticMemoryUsage>>

|Number of Threads Used
|The number of threads used.
|<<#_NumberofThreadsUsed>>

|===

<<<

[#_ComponentNonFunctionalRequirementDescriptions]
=== Component Non-Functional Requirement Descriptions

[#_ContinuousProcessingTime]
==== Continuous Processing Time
The maximum processing time for this component is 10 ms. +
The time required for data access or service configuration that depends on other modules is excluded from the above processing time. +
The maximum wait time for exclusive control is 1000 ms. This can be adjusted via configuration values. +

[#_StackMemoryUsage]
==== Stack Memory Usage
Up to 1024 bytes. +

[#_HeapMemoryUsage]
==== Heap Memory Usage
Up to 8 KB. +

[#_StaticMemoryUsage]
==== Static Memory Usage
128 bytes. +

[#_NumberofThreadsUsed]
==== Number of Threads Used
Does not use any threads. +

<<<

[#_APISpecification]
== API Specification

[#_DefinitionList]
=== Definition List

==== Kconfig

[#_TableKconfig]
.Kconfig List
[width="100%", cols="30%,25%,45%a",options="header"]
|===
|Config Name |Default Value |Description

|EXTERNAL_PARAMETER_STORAGE_MANAGER_TIMEOUT_MS
|1000
|Timeout duration [ms] for exclusive control.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_HANDLE_MAX
|8
|Maximum number of handles that can be simultaneously obtained via ``**EsfParameterStorageManagerOpen**``. +

|EXTERNAL_PARAMETER_STORAGE_MANAGER_FACTORY_RESET_MAX
|8
|Maximum number of functions that can be registered via ``**EsfParameterStorageManagerRegisterFactoryReset**``. +

|EXTERNAL_PARAMETER_STORAGE_MANAGER_UPDATE_MAX
|4
|Maximum number of data items that can use a temporary data storage area simultaneously with one handle. +
Specify the data to use temporary storage via ``**EsfParameterStorageManagerUpdateBegin**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_BUFFER_LENGTH
|4096
|Buffer size for File I/O using Large Heap.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG
|y
|Enables logging for the Parameter Storage Manager.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG_ERROR
|y
|Enables error logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG_WARN
|y
|Enables warning logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG_INFO
|y
|Enables information logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG_DEBUG
|y
|Enables debug logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG_TRACE
|n
|Enables trace logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG
|y
|Enables event logging for the Parameter Storage Manager.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG_ERROR
|y
|Enables error logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG_WARN
|y
|Enables warning logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG_INFO
|y
|Enables information logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG_DEBUG
|y
|Enables debug logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG_TRACE
|n
|Enables trace logging for the Parameter Storage Manager. +
Depends on ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_EVENT_LOG**``.

|EXTERNAL_PARAMETER_STORAGE_MANAGER_UTILITY_LOG_ENABLE
|y
|Changes the output destination of DLOG/ELOG. When set to y, Utility Log is used; when set to n, printf is used. +

|EXTERNAL_PARAMETER_STORAGE_MANAGER_PL_STORAGE_STUB
|n
|Enables the PL Storage stub within the Parameter Storage Manager. +

|EXTERNAL_PARAMETER_STORAGE_MANAGER_MEMORY_MANAGER_STUB
|n
|Enables the Memory Utilities stub within the Parameter Storage Manager. +

|EXTERNAL_PARAMETER_STORAGE_MANAGER_UTILITY_LOG_STUB
|n
|Enables the Log Utilities stub within the Parameter Storage Manager. +

|EXTERNAL_PARAMETER_STORAGE_MANAGER_POWER_MANAGER_STUB
|n
|Enables the Power Manager stub within the Parameter Storage Manager. +

|===

<<<

[#_DataTypeList]
==== Data Type List

The list of data types is shown in <<#_TableDataType>>.

[#_TableDataType]
.Data Type List
[width="100%", cols="30%,55%,15%",options="header"]
|===
|Data Type Name |Description |Section Number

|EsfParameterStorageManagerStatus
|Enumeration type that defines the result of API execution.
|<<#_EsfParameterStorageManagerStatus>>

|EsfParameterStorageManagerHandle
|Control handle for the Parameter Storage Manager.
|<<#_EsfParameterStorageManagerHandle>>

|EsfParameterStorageManagerMask
|Alias representing a pointer to the mask structure.
|<<#_EsfParameterStorageManagerMask>>

|EsfParameterStorageManagerData
|Alias representing a pointer to the data structure.
|<<#_EsfParameterStorageManagerData>>

|EsfParameterStorageManagerFactoryResetID
|Identifier used for registering Factory Reset.
|<<#_EsfParameterStorageManagerFactoryResetID>>

|EsfParameterStorageManagerUpdateType
|Enumeration type that defines the state of the temporary data storage area at the start of an update.
|<<#_EsfParameterStorageManagerUpdateType>>

|EsfParameterStorageManagerItemID
|Enumeration type that defines data supported by the Parameter Storage Manager.
|<<#_EsfParameterStorageManagerItemID>>

|EsfParameterStorageManagerItemType
|Enumeration type that defines the data type of a data member.
|<<#_EsfParameterStorageManagerItemType>>

|EsfParameterStorageManagerStructInfo
|Structure for setting information about the data structure.
|<<#_EsfParameterStorageManagerStructInfo>>

|EsfParameterStorageManagerMemberInfo
|Structure for setting information about members of a data structure.
|<<#_EsfParameterStorageManagerMemberInfo>>

|EsfParameterStorageManagerItemAccessor
|Structure that defines operations on the data structure.
|<<#_EsfParameterStorageManagerItemAccessor>>

|EsfParameterStorageManagerItemAccessorSave
|Function pointer type for executing Save operations on the data structure.
|<<#_EsfParameterStorageManagerItemAccessorSave>>

|EsfParameterStorageManagerItemAccessorLoad
|Function pointer type for executing Load operations on the data structure.
|<<#_EsfParameterStorageManagerItemAccessorLoad>>

|EsfParameterStorageManagerItemAccessorClear
|Function pointer type for executing Clear operations on the data structure.
|<<#_EsfParameterStorageManagerItemAccessorClear>>

|EsfParameterStorageManagerItemAccessorCancel
|Function pointer type for canceling Save or Clear operations on the data structure.
|<<#_EsfParameterStorageManagerItemAccessorCancel>>

|EsfParameterStorageManagerItemMaskIsEnabled
|Function pointer type that determines whether a member of the mask structure is enabled.
|<<#_EsfParameterStorageManagerItemMaskIsEnabled>>

|EsfParameterStorageManagerRegisterFactoryResetType
|Function pointer type for a Factory Reset function to be registered.
|<<#_EsfParameterStorageManagerRegisterFactoryResetType>>

|EsfParameterStorageManagerCapabilities
|Structure for storing information about available features of the Parameter Storage Manager.
|<<#_EsfParameterStorageManagerCapabilities>>

|EsfParameterStorageManagerItemCapabilities
|Structure for storing feature information of data managed by the Parameter Storage Manager.
|<<#_EsfParameterStorageManagerItemCapabilities>>

|===

[#_APIList]
==== API List

The list of APIs is shown below. +
The APIs in this module are exposed only within the ESF.

[#_TableAPI]
.API List
[width="100%", cols="30%,55%,15%",options="header"]
|===
|API Name |Description |Section Number

3+|**Initialization Function**
    |EsfParameterStorageManagerInit
    |Initializes the Parameter Storage Manager.
    |<<#_EsfParameterStorageManagerInit>>

    |EsfParameterStorageManagerDeinit
    |Deinitializes the Parameter Storage Manager.
    |<<#_EsfParameterStorageManagerDeinit>>

3+|**Handle Function**
    |EsfParameterStorageManagerOpen
    |Obtains a handle for the Parameter Storage Manager.
    |<<#_EsfParameterStorageManagerOpen>>

    |EsfParameterStorageManagerClose
    |Releases a handle for the Parameter Storage Manager.
    |<<#_EsfParameterStorageManagerClose>>

3+|**Data Storage Area Access Function**
    |EsfParameterStorageManagerSave
    |Saves data to the data storage area.
    |<<#_EsfParameterStorageManagerSave>>

    |EsfParameterStorageManagerLoad
    |Retrieves data from the data storage area.
    |<<#_EsfParameterStorageManagerLoad>>

    |EsfParameterStorageManagerClear
    |Deletes data from the data storage area.
    |<<#_EsfParameterStorageManagerClear>>

    |EsfParameterStorageManagerGetSize
    |Returns the data size in the data storage area.
    |<<#_EsfParameterStorageManagerGetSize>>

    |EsfParameterStorageManagerLock
    |Starts exclusive control for accessing the data storage area.
    |<<#_EsfParameterStorageManagerLock>>

    |EsfParameterStorageManagerUnlock
    |Ends exclusive control for accessing the data storage area.
    |<<#_EsfParameterStorageManagerUnlock>>

    |EsfParameterStorageManagerInvokeFactoryReset
    |Restores stored data to factory default.
    |<<#_EsfParameterStorageManagerInvokeFactoryReset>>

    |EsfParameterStorageManagerRegisterFactoryReset
    |Registers a Factory Reset function.
    |<<#_EsfParameterStorageManagerRegisterFactoryReset>>

    |EsfParameterStorageManagerUnregisterFactoryReset
    |Unregisters a Factory Reset function.
    |<<#_EsfParameterStorageManagerUnregisterFactoryReset>>

    |EsfParameterStorageManagerDowngrade
    |Downgrades the data storage area from v2 to v1.
    |<<#_EsfParameterStorageManagerDowngrade>>

3+|**Cancel Data Update Function**
    |EsfParameterStorageManagerUpdateBegin
    |Starts updating the data storage area.
    |<<#_EsfParameterStorageManagerUpdateBegin>>

    |EsfParameterStorageManagerUpdateComplete
    |Completes updating the data storage area.
    |<<#_EsfParameterStorageManagerUpdateComplete>>

    |EsfParameterStorageManagerUpdateCancel
    |Cancels updating the data storage area.
    |<<#_EsfParameterStorageManagerUpdateCancel>>

3+|**Utility Function**
    |EsfParameterStorageManagerIsDataEmpty
    |Checks if data is stored in the specified member of a data structure.
    |<<#_EsfParameterStorageManagerIsDataEmpty>>

    |EsfParameterStorageManagerGetCapabilities
    |Retrieves information on available features of the Parameter Storage Manager.
    |<<#_EsfParameterStorageManagerGetCapabilities>>

    |EsfParameterStorageManagerGetItemCapabilities
    |Retrieves functional capability info for data managed by the Parameter Storage Manager.
    |<<#_EsfParameterStorageManagerGetItemCapabilities>>

    |ESF_PARAMETER_STORAGE_MANAGER_MEMBER_SIZEOF
    |Retrieves the size [bytes] of a structure member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_MEMBER_SIZEOF>>

    |ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_SIZEOF
    |Retrieves the size [bytes] of a <<#_EsfParameterStorageManagerBinaryArray, binary array type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_SIZEOF>>

    |ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_SIZEOF
    |Retrieves the size [bytes] of a <<#_EsfParameterStorageManagerOffsetBinaryArray, offset-based binary array type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_SIZEOF>>

    |ESF_PARAMETER_STORAGE_MANAGER_STRING_SIZEOF
    |Retrieves the size [bytes] of a <<#_String, string type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_STRING_SIZEOF>>

    |ESF_PARAMETER_STORAGE_MANAGER_RAW_SIZEOF
    |Retrieves the size [bytes] of a <<#_Rawdata, raw data type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_RAW_SIZEOF>>

    |ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED
    |Checks if a specific member in a mask structure is enabled.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED>>

    |ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_IS_EMPTY
    |Checks if data is stored in a <<#_EsfParameterStorageManagerBinaryArray, binary array type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_IS_EMPTY>>

    |ESF_PARAMETER_STORAGE_MANAGER_BINARY_POINTER_IS_EMPTY
    |Checks if data is stored in a <<#_EsfParameterStorageManagerBinaryArray, binary pointer type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_BINARY_POINTER_IS_EMPTY>>

    |ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_IS_EMPTY
    |Checks if data is stored in a <<#_EsfParameterStorageManagerOffsetBinaryArray, offset-based binary array type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_IS_EMPTY>>

    |ESF_PARAMETER_STORAGE_MANAGER_OFFSET_POINTER_IS_EMPTY
    |Checks if data is stored in a <<#_EsfParameterStorageManagerOffsetBinaryArray, offset-based binary pointer type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_OFFSET_POINTER_IS_EMPTY>>

    |ESF_PARAMETER_STORAGE_MANAGER_STRING_IS_EMPTY
    |Checks if data is stored in a <<#_String, string type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_STRING_IS_EMPTY>>

    |ESF_PARAMETER_STORAGE_MANAGER_RAW_IS_EMPTY
    |Checks if data is stored in a <<#_Rawdata, raw data type>> member.
    |<<#_ESF_PARAMETER_STORAGE_MANAGER_RAW_IS_EMPTY>>

|===

<<<

[#_DataTypeDefinitions]
=== Data Type Definitions

[#_EsfParameterStorageManagerStatus]
==== EsfParameterStorageManagerStatus
Enumeration type that defines the result of API execution.

* *Format* +
+
[source, c]
....
typedef enum EsfParameterStorageManagerStatus {
  kEsfParameterStorageManagerStatusOk,
  kEsfParameterStorageManagerStatusInvalidArgument,
  kEsfParameterStorageManagerStatusFailedPrecondition,
  kEsfParameterStorageManagerStatusNotFound,
  kEsfParameterStorageManagerStatusOutOfRange,
  kEsfParameterStorageManagerStatusPermissionDenied,
  kEsfParameterStorageManagerStatusResourceExhausted,
  kEsfParameterStorageManagerStatusDataLoss,
  kEsfParameterStorageManagerStatusUnavailable,
  kEsfParameterStorageManagerStatusInternal,
  kEsfParameterStorageManagerStatusTimedOut,
} EsfParameterStorageManagerStatus;
....

* *Values* +
+
[#_Table_EsfParameterStorageManagerStatus]
.Description of EsfParameterStorageManagerStatus Values
[width="100%", cols="30%,70%",options="header"]
|===
|Member Name |Description

|kEsfParameterStorageManagerStatusOk
|Success.

|kEsfParameterStorageManagerStatusInvalidArgument
|Invalid argument.

|kEsfParameterStorageManagerStatusFailedPrecondition
|Operation was denied.

|kEsfParameterStorageManagerStatusNotFound
|Resource not found.

|kEsfParameterStorageManagerStatusOutOfRange
|An invalid range was specified.

|kEsfParameterStorageManagerStatusPermissionDenied
|Access to the data is not permitted.

|kEsfParameterStorageManagerStatusResourceExhausted
|Insufficient resources.

|kEsfParameterStorageManagerStatusDataLoss
|Access to the data failed due to an unrecoverable cause.

|kEsfParameterStorageManagerStatusUnavailable
|Access to the data failed due to a temporary cause.

|kEsfParameterStorageManagerStatusInternal
|Internal processing failed.

|kEsfParameterStorageManagerStatusTimedOut
|Exclusive control timed out. +
See <<#_ContinuousProcessingTime>> for timeout settings.

|===

[#_EsfParameterStorageManagerHandle]
==== EsfParameterStorageManagerHandle
Control handle for the Parameter Storage Manager.

* *Format* +
+
[source, C]
....
typedef int32_t EsfParameterStorageManagerHandle;
#define ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE ((EsfParameterStorageManagerHandle)-1)
....

* *Values* +
+
[#_Table_EsfParameterStorageManagerHandle]
.Description of EsfParameterStorageManagerHandle Values
[width="100%", cols="30%,70%",options="header"]
|===
|Member Name |Description

|ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE
|Indicates an invalid handle.

|===

[#_EsfParameterStorageManagerMask]
==== EsfParameterStorageManagerMask
Alias representing a pointer to the mask structure.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef uintptr_t EsfParameterStorageManagerMask;
#define ESF_PARAMETER_STORAGE_MANAGER_INVALID_MASK ((EsfParameterStorageManagerMask)NULL)
....

* *Values* +
+
[#_TableEsfParameterStorageManagerMask]
.Description of EsfParameterStorageManagerMask Values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description
|ESF_PARAMETER_STORAGE_MANAGER_INVALID_MASK
|Represents an invalid value for a mask structure.

|===

[#_EsfParameterStorageManagerData]
==== EsfParameterStorageManagerData
Alias representing a pointer to the data structure.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef uintptr_t EsfParameterStorageManagerData;
#define ESF_PARAMETER_STORAGE_MANAGER_INVALID_DATA ((EsfParameterStorageManagerData)NULL)
....

* *Values* +
+
[#_TableEsfParameterStorageManagerData]
.Description of EsfParameterStorageManagerData Values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description

|ESF_PARAMETER_STORAGE_MANAGER_INVALID_DATA
|Represents an invalid value for a data structure.

|===

[#_EsfParameterStorageManagerFactoryResetID]
==== EsfParameterStorageManagerFactoryResetID
Identifier used for Factory Reset registration.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef int32_t EsfParameterStorageManagerFactoryResetID;
#define ESF_PARAMETER_STORAGE_MANAGER_INVALID_FACTORY_RESET_ID ((EsfParameterStorageManagerFactoryResetID)-1)
....

* *Values* +
+
[#_TableEsfParameterStorageManagerFactoryResetID]
.Description of EsfParameterStorageManagerFactoryResetID Values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description

|ESF_PARAMETER_STORAGE_MANAGER_INVALID_FACTORY_RESET_ID
|Represents an invalid identifier for Factory Reset registration.

|===

[#_EsfParameterStorageManagerUpdateType]
==== EsfParameterStorageManagerUpdateType
Enumeration type that defines the state of the temporary data storage area at the start of an update.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef enum EsfParameterStorageManagerUpdateType {
    kEsfParameterStorageManagerUpdateEmpty,
    kEsfParameterStorageManagerUpdateCopy,
    kEsfParameterStorageManagerUpdateTypeMax,
} EsfParameterStorageManagerUpdateType;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerUpdateType]
.Description of EsfParameterStorageManagerUpdateType Values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name  |Description

|kEsfParameterStorageManagerUpdateEmpty
|Indicates that no data is stored.

|kEsfParameterStorageManagerUpdateCopy
|Indicates that the same data as the actual data storage area is stored.

|kEsfParameterStorageManagerUpdateTypeMax
|Represents the maximum number of data states.

|===

[#_EsfParameterStorageManagerItemID]
==== EsfParameterStorageManagerItemID
Enumeration type that defines the data supported by the Parameter Storage Manager.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef enum EsfParameterStorageManagerItemID {
  kEsfParameterStorageManagerItemDpsURL,
  kEsfParameterStorageManagerItemCommonName,
  kEsfParameterStorageManagerItemDpsScopeID,
  kEsfParameterStorageManagerItemProjectID,
  kEsfParameterStorageManagerItemRegisterToken,
  kEsfParameterStorageManagerItemWiFiSSID,
  kEsfParameterStorageManagerItemWiFiPassword,
  kEsfParameterStorageManagerItemWiFiEncryption,
  kEsfParameterStorageManagerItemIPAddress,
  kEsfParameterStorageManagerItemSubnetMask,
  kEsfParameterStorageManagerItemGateway,
  kEsfParameterStorageManagerItemDNS,
  kEsfParameterStorageManagerItemIPMethod,
  kEsfParameterStorageManagerItemNetIfKind,
  kEsfParameterStorageManagerItemIPv6IPAddress,
  kEsfParameterStorageManagerItemIPv6SubnetMask,
  kEsfParameterStorageManagerItemIPv6Gateway,
  kEsfParameterStorageManagerItemIPv6DNS,
  kEsfParameterStorageManagerItemWiFiApSSID,
  kEsfParameterStorageManagerItemWiFiApPassword,
  kEsfParameterStorageManagerItemWiFiApEncryption,
  kEsfParameterStorageManagerItemWiFiApChannel,
  kEsfParameterStorageManagerItemWiFiApIPAddress,
  kEsfParameterStorageManagerItemWiFiApSubnetMask,
  kEsfParameterStorageManagerItemWiFiApGateway,
  kEsfParameterStorageManagerItemWiFiApDNS,
  kEsfParameterStorageManagerItemProxyURL,
  kEsfParameterStorageManagerItemProxyPort,
  kEsfParameterStorageManagerItemProxyUserName,
  kEsfParameterStorageManagerItemProxyPassword,
  kEsfParameterStorageManagerItemEvpHubURL,
  kEsfParameterStorageManagerItemEvpHubPort,
  kEsfParameterStorageManagerItemEvpIotPlatform,
  kEsfParameterStorageManagerItemPkiRootCerts,
  kEsfParameterStorageManagerItemPkiRootCertsHash,
  kEsfParameterStorageManagerItemEvpTls,
  kEsfParameterStorageManagerItemDeviceManifest,
  kEsfParameterStorageManagerItemDebugLogLevel,
  kEsfParameterStorageManagerItemEventLogLevel,
  kEsfParameterStorageManagerItemDebugLogDestination,
  kEsfParameterStorageManagerItemLogFilter,
  kEsfParameterStorageManagerItemLogUseFlash,
  kEsfParameterStorageManagerItemStorageName,
  kEsfParameterStorageManagerItemStorageSubDirectoryPath,
  kEsfParameterStorageManagerItemDebugLogLevel2,
  kEsfParameterStorageManagerItemEventLogLevel2,
  kEsfParameterStorageManagerItemDebugLogDestination2,
  kEsfParameterStorageManagerItemLogFilter2,
  kEsfParameterStorageManagerItemLogUseFlash2,
  kEsfParameterStorageManagerItemStorageName2,
  kEsfParameterStorageManagerItemStorageSubDirectoryPath2,
  kEsfParameterStorageManagerItemDebugLogLevel3,
  kEsfParameterStorageManagerItemEventLogLevel3,
  kEsfParameterStorageManagerItemDebugLogDestination3,
  kEsfParameterStorageManagerItemLogFilter3,
  kEsfParameterStorageManagerItemLogUseFlash3,
  kEsfParameterStorageManagerItemStorageName3,
  kEsfParameterStorageManagerItemStorageSubDirectoryPath3,
  kEsfParameterStorageManagerItemDebugLogLevel4,
  kEsfParameterStorageManagerItemEventLogLevel4,
  kEsfParameterStorageManagerItemDebugLogDestination4,
  kEsfParameterStorageManagerItemLogFilter4,
  kEsfParameterStorageManagerItemLogUseFlash4,
  kEsfParameterStorageManagerItemStorageName4,
  kEsfParameterStorageManagerItemStorageSubDirectoryPath4,
  kEsfParameterStorageManagerItemNTPServer,
  kEsfParameterStorageManagerItemNTPSyncInterval,
  kEsfParameterStorageManagerItemNTPPollingTime,
  kEsfParameterStorageManagerItemSkipModeSettings,
  kEsfParameterStorageManagerItemLimitPacketTime,
  kEsfParameterStorageManagerItemLimitRTCCorrectionValue,
  kEsfParameterStorageManagerItemSanityLimit,
  kEsfParameterStorageManagerItemSlewModeSettings,
  kEsfParameterStorageManagerItemStableRTCCorrectionValue,
  kEsfParameterStorageManagerItemStableSyncNumber,
  kEsfParameterStorageManagerItemSystemError,
  kEsfParameterStorageManagerItemFactoryResetFlag,
  kEsfParameterStorageManagerItemRTCErrorDetection,
  kEsfParameterStorageManagerItemRTCPQAParameter,
  kEsfParameterStorageManagerItemBatteryInformation,
  kEsfParameterStorageManagerItemRTCNetworkInformation,
  kEsfParameterStorageManagerItemRTCConfig,
  kEsfParameterStorageManagerItemHoursMeter,
  kEsfParameterStorageManagerItemSAS,
  kEsfParameterStorageManagerItemQRModeStateFlag,
  kEsfParameterStorageManagerItemInitialSettingFlag,
  kEsfParameterStorageManagerItemHWInfoText,
  kEsfParameterStorageManagerItemMCULoaderVersion,
  kEsfParameterStorageManagerItemSensorLoaderVersion,
  kEsfParameterStorageManagerItemMCUFWLastUpdate,
  kEsfParameterStorageManagerItemSensorLoaderLastUpdate,
  kEsfParameterStorageManagerItemSensorFWLastUpdate,
  kEsfParameterStorageManagerItemSensorAIModelFlashAddress,
  kEsfParameterStorageManagerItemSensorLoaderFlashAddress,
  kEsfParameterStorageManagerItemSensorFWFlashAddress,
  kEsfParameterStorageManagerItemAIModelParameterSlot0,
  kEsfParameterStorageManagerItemAIModelParameterSlot1,
  kEsfParameterStorageManagerItemAIModelParameterSlot2,
  kEsfParameterStorageManagerItemAIModelParameterSlot3,
  kEsfParameterStorageManagerItemAIModelParameterSlot4,
  kEsfParameterStorageManagerItemAIModelParameterHashSlot1,
  kEsfParameterStorageManagerItemAIModelParameterHashSlot2,
  kEsfParameterStorageManagerItemAIModelParameterHashSlot3,
  kEsfParameterStorageManagerItemAIModelParameterHashSlot4,
  kEsfParameterStorageManagerItemLMTStd,
  kEsfParameterStorageManagerItemPreWBStd,
  kEsfParameterStorageManagerItemGAMMAStd,
  kEsfParameterStorageManagerItemLSCStd,
  kEsfParameterStorageManagerItemLSCRawStd,
  kEsfParameterStorageManagerItemDEWARPStd,
  kEsfParameterStorageManagerItemLMTCustom,
  kEsfParameterStorageManagerItemPreWBCustom,
  kEsfParameterStorageManagerItemGAMMACustom,
  kEsfParameterStorageManagerItemGAMMAAutoCustom,
  kEsfParameterStorageManagerItemLSCCustom,
  kEsfParameterStorageManagerItemLSCRawCustom,
  kEsfParameterStorageManagerItemDEWARPCustom,
  kEsfParameterStorageManagerItemAIISPAIModelParameterSlot0,
  kEsfParameterStorageManagerItemAIISPLoaderFlashAddress,
  kEsfParameterStorageManagerItemAIISPFWFlashAddress,
  kEsfParameterStorageManagerItemAIISPAIModelParameterSlot1,
  kEsfParameterStorageManagerItemAIISPAIModelParameterSlot2,
  kEsfParameterStorageManagerItemAIISPAIModelParameterSlot3,
  kEsfParameterStorageManagerItemAIISPAIModelParameterSlot4,
  kEsfParameterStorageManagerItemAIModelSlotInfo,
  kEsfParameterStorageManagerItemAIISPAIModelSlotInfo,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo0,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo1,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo2,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo3,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo4,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo5,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo6,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo7,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo8,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo9,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo10,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo11,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo12,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo13,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo14,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo15,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo16,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo17,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo18,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo19,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo20,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo21,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo22,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo23,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo24,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo25,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo26,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo27,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo28,
  kEsfParameterStorageManagerItemFwMgrBinaryInfo29,
  kEsfParameterStorageManagerItemFwMgrBinaryInfoMcuFirmware,
  kEsfParameterStorageManagerItemEsfSensorConfig,
  kEsfParameterStorageManagerItemSpiBootLoader,
  kEsfParameterStorageManagerItemSpiBootFirmware,
  kEsfParameterStorageManagerItemSpiBootAIModel,
  kEsfParameterStorageManagerItemPreInstallAIModelInfo,
  kEsfParameterStorageManagerItemPreInstallAIModel,
  kEsfParameterStorageManagerItemInputTensorOnlyModel,
  kEsfParameterStorageManagerItemInputTensorOnlyParam,
  kEsfParameterStorageManagerItemExceptionFactor,
  kEsfParameterStorageManagerItemExceptionInfo,
  kEsfParameterStorageManagerItemEvpExceptionFactor,
  kEsfParameterStorageManagerItemCustom,
  kEsfParameterStorageManagerItemMax
} EsfParameterStorageManagerItemID;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerItemID]
.Description of EsfParameterStorageManagerItemID Values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description

|kEsfParameterStorageManagerItemDpsURL
|DPS URL.
|kEsfParameterStorageManagerItemCommonName
|Common Name.
|kEsfParameterStorageManagerItemDpsScopeID
|DPS Scope ID.
|kEsfParameterStorageManagerItemProjectID
|Project ID.
|kEsfParameterStorageManagerItemRegisterToken
|Register Token.
|kEsfParameterStorageManagerItemWiFiSSID
|Wi-Fi SSID.
|kEsfParameterStorageManagerItemWiFiPassword
|Wi-Fi Password.
|kEsfParameterStorageManagerItemWiFiEncryption
|Wi-Fi Encryption.
|kEsfParameterStorageManagerItemIPAddress
|IP address.
|kEsfParameterStorageManagerItemSubnetMask
|Subnet mask.
|kEsfParameterStorageManagerItemGateway
|Gateway.
|kEsfParameterStorageManagerItemDNS
|DNS.
|kEsfParameterStorageManagerItemIPMethod
|DHCP enable/disable setting.
|kEsfParameterStorageManagerItemNetIfKind
|Wi-Fi/Ethernet designation.
|kEsfParameterStorageManagerItemIPv6IPAddress
|IPv6 IP address.
|kEsfParameterStorageManagerItemIPv6SubnetMask
|IPv6 subnet mask.
|kEsfParameterStorageManagerItemIPv6Gateway
|IPv6 gateway.
|kEsfParameterStorageManagerItemIPv6DNS
|IPv6 DNS.
|kEsfParameterStorageManagerItemWiFiApSSID
|Wi-Fi AP SSID.
|kEsfParameterStorageManagerItemWiFiApPassword
|Wi-Fi AP password.
|kEsfParameterStorageManagerItemWiFiApEncryption
|Wi-Fi AP encryption setting.
|kEsfParameterStorageManagerItemWiFiApChannel
|Wi-Fi AP channel setting.
|kEsfParameterStorageManagerItemWiFiApIPAddress
|Wi-Fi AP IP address.
|kEsfParameterStorageManagerItemWiFiApSubnetMask
|Wi-Fi AP subnet mask.
|kEsfParameterStorageManagerItemWiFiApGateway
|Wi-Fi AP gateway.
|kEsfParameterStorageManagerItemWiFiApDNS
|Wi-Fi AP DNS.
|kEsfParameterStorageManagerItemProxyURL
|Proxy server URL.
|kEsfParameterStorageManagerItemProxyPort
|Proxy server port number.
|kEsfParameterStorageManagerItemProxyUserName
|Proxy server username.
|kEsfParameterStorageManagerItemProxyPassword
|Proxy server password.
|kEsfParameterStorageManagerItemEvpHubURL
|EVP Hub URL.
|kEsfParameterStorageManagerItemEvpHubPort
|EVP Hub port number.
|kEsfParameterStorageManagerItemEvpIotPlatform
|EVP Runtime IoT Platform.
|kEsfParameterStorageManagerItemPkiRootCerts
|PkiRootCerts.
|kEsfParameterStorageManagerItemPkiRootCertsHash
|Hash value of PkiRootCerts.
|kEsfParameterStorageManagerItemEvpTls
|Parameter determining whether TLS authentication is required.
|kEsfParameterStorageManagerItemDeviceManifest
|Device Manifest.
|kEsfParameterStorageManagerItemDebugLogLevel
|Debug log level. (Set 1)
|kEsfParameterStorageManagerItemEventLogLevel
|Event log level. (Set 1)
|kEsfParameterStorageManagerItemDebugLogDestination
|Debug log output destination. (Set 1)
|kEsfParameterStorageManagerItemLogFilter
|Log filter. (Set 1)
|kEsfParameterStorageManagerItemLogUseFlash
|Log use flash. (Set 1)
|kEsfParameterStorageManagerItemStorageName
|Storage name. (Set 1)
|kEsfParameterStorageManagerItemStorageSubDirectoryPath
|Storage sub-directory path. (Set 1)
|kEsfParameterStorageManagerItemDebugLogLevel2
|Debug log level. (Set 2)
|kEsfParameterStorageManagerItemEventLogLevel2
|Event log level. (Set 2)
|kEsfParameterStorageManagerItemDebugLogDestination2
|Debug log output destination. (Set 2)
|kEsfParameterStorageManagerItemLogFilter2
|Log filter. (Set 2)
|kEsfParameterStorageManagerItemLogUseFlash2
|Log use flash. (Set 2)
|kEsfParameterStorageManagerItemStorageName2
|Storage name. (Set 2)
|kEsfParameterStorageManagerItemStorageSubDirectoryPath2
|Storage sub-directory path. (Set 2)
|kEsfParameterStorageManagerItemDebugLogLevel3
|Debug log level. (Set 3)
|kEsfParameterStorageManagerItemEventLogLevel3
|Event log level. (Set 3)
|kEsfParameterStorageManagerItemDebugLogDestination3
|Debug log output destination. (Set 3)
|kEsfParameterStorageManagerItemLogFilter3
|Log filter. (Set 3)
|kEsfParameterStorageManagerItemLogUseFlash3
|Log use flash. (Set 3)
|kEsfParameterStorageManagerItemStorageName3
|Storage name. (Set 3)
|kEsfParameterStorageManagerItemStorageSubDirectoryPath3
|Storage sub-directory path. (Set 3)
|kEsfParameterStorageManagerItemDebugLogLevel4
|Debug log level. (Set 4)
|kEsfParameterStorageManagerItemEventLogLevel4
|Event log level. (Set 4)
|kEsfParameterStorageManagerItemDebugLogDestination4
|Debug log output destination. (Set 4)
|kEsfParameterStorageManagerItemLogFilter4
|Log filter. (Set 4)
|kEsfParameterStorageManagerItemLogUseFlash4
|Log use flash. (Set 4)
|kEsfParameterStorageManagerItemStorageName4
|Storage name. (Set 4)
|kEsfParameterStorageManagerItemStorageSubDirectoryPath4
|Storage sub-directory path. (Set 4)
|kEsfParameterStorageManagerItemNTPServer
|NTP server URL.
|kEsfParameterStorageManagerItemNTPSyncInterval
|NTP client synchronization interval.
|kEsfParameterStorageManagerItemNTPPollingTime
|NTP client polling interval.
|kEsfParameterStorageManagerItemSkipModeSettings
|Skip mode settings.
|kEsfParameterStorageManagerItemLimitPacketTime
|Limit packet time.
|kEsfParameterStorageManagerItemLimitRTCCorrectionValue
|Limit RTC correction value.
|kEsfParameterStorageManagerItemSanityLimit
|Sanity limit.
|kEsfParameterStorageManagerItemSlewModeSettings
|Slew mode settings.
|kEsfParameterStorageManagerItemStableRTCCorrectionValue
|Stable RTC correction value.
|kEsfParameterStorageManagerItemStableSyncNumber
|Stable sync number.
|kEsfParameterStorageManagerItemSystemError
|System error occurrence status.
|kEsfParameterStorageManagerItemFactoryResetFlag
|Factory reset flag.
|kEsfParameterStorageManagerItemRTCErrorDetection
|Intermittent operation error detection.
|kEsfParameterStorageManagerItemRTCPQAParameter
|PQA parameter for intermittent operation.
|kEsfParameterStorageManagerItemBatteryInformation
|Battery information.
|kEsfParameterStorageManagerItemRTCNetworkInformation
|Network information for intermittent operation.
|kEsfParameterStorageManagerItemRTCConfig
|Configuration for intermittent operation.
|kEsfParameterStorageManagerItemHoursMeter
|Hours meter.
|kEsfParameterStorageManagerItemSAS
|Encrypted data for SAS URL/Cert/Directory Path.
|kEsfParameterStorageManagerItemQRModeStateFlag
|QR mode state flag.
|kEsfParameterStorageManagerItemInitialSettingFlag
|Initial setting flag.
|kEsfParameterStorageManagerItemHWInfoText
|HW info text.
|kEsfParameterStorageManagerItemMCULoaderVersion
|MCU loader version.
|kEsfParameterStorageManagerItemSensorLoaderVersion
|Sensor loader version.
|kEsfParameterStorageManagerItemMCUFWLastUpdate
|Last update time of MCU firmware.
|kEsfParameterStorageManagerItemSensorLoaderLastUpdate
|Last update time of sensor loader.
|kEsfParameterStorageManagerItemSensorFWLastUpdate
|Last update time of sensor firmware.
|kEsfParameterStorageManagerItemSensorAIModelFlashAddress
|AI model flash address.
|kEsfParameterStorageManagerItemSensorLoaderFlashAddress
|Sensor loader flash address.
|kEsfParameterStorageManagerItemSensorFWFlashAddress
|Sensor firmware flash address.
|kEsfParameterStorageManagerItemAIModelParameterSlot0
|Parameters for AI model slot 0.
|kEsfParameterStorageManagerItemAIModelParameterSlot1
|Parameters for AI model slot 1.
|kEsfParameterStorageManagerItemAIModelParameterSlot2
|Parameters for AI model slot 2.
|kEsfParameterStorageManagerItemAIModelParameterSlot3
|Parameters for AI model slot 3.
|kEsfParameterStorageManagerItemAIModelParameterSlot4
|Parameters for AI model slot 4.
|kEsfParameterStorageManagerItemAIModelParameterHashSlot1
|Hash value for AI model slot 1.
|kEsfParameterStorageManagerItemAIModelParameterHashSlot2
|Hash value for AI model slot 2.
|kEsfParameterStorageManagerItemAIModelParameterHashSlot3
|Hash value for AI model slot 3.
|kEsfParameterStorageManagerItemAIModelParameterHashSlot4
|Hash value for AI model slot 4.
|kEsfParameterStorageManagerItemLMTStd
|LMT (STD side).
|kEsfParameterStorageManagerItemPreWBStd
|PreWB (STD side).
|kEsfParameterStorageManagerItemGAMMAStd
|GAMMA (STD side).
|kEsfParameterStorageManagerItemLSCStd
|LSC (STD side).
|kEsfParameterStorageManagerItemLSCRawStd
|LSC RAW (STD side).
|kEsfParameterStorageManagerItemDEWARPStd
|DEWARP (STD side).
|kEsfParameterStorageManagerItemLMTCustom
|LMT (Custom side).
|kEsfParameterStorageManagerItemPreWBCustom
|PreWB (Custom side).
|kEsfParameterStorageManagerItemGAMMACustom
|GAMMA (Custom side).
|kEsfParameterStorageManagerItemGAMMAAutoCustom
|GAMMA Auto (Custom side).
|kEsfParameterStorageManagerItemLSCCustom
|LSC (Custom side).
|kEsfParameterStorageManagerItemLSCRawCustom
|LSC RAW (Custom side).
|kEsfParameterStorageManagerItemDEWARPCustom
|DEWARP (Custom side).
|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot0
|AI-ISP AI model parameters for slot 0.
|kEsfParameterStorageManagerItemAIISPLoaderFlashAddress
|AI-ISP loader flash address.
|kEsfParameterStorageManagerItemAIISPFWFlashAddress
|AI-ISP firmware flash address.
|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot1
|AI-ISP AI model parameters for slot 1.
|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot2
|AI-ISP AI model parameters for slot 2.
|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot3
|AI-ISP AI model parameters for slot 3.
|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot4
|AI-ISP AI model parameters for slot 4.
|kEsfParameterStorageManagerItemAIModelSlotInfo
|Slot information for AI model.
|kEsfParameterStorageManagerItemAIISPAIModelSlotInfo
|Slot information for AI-ISP AI model.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo0
|Binary data 0 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo1
|Binary data 1 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo2
|Binary data 2 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo3
|Binary data 3 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo4
|Binary data 4 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo5
|Binary data 5 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo6
|Binary data 6 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo7
|Binary data 7 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo8
|Binary data 8 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo9
|Binary data 9 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo10
|Binary data 10 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo11
|Binary data 11 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo12
|Binary data 12 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo13
|Binary data 13 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo14
|Binary data 14 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo15
|Binary data 15 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo16
|Binary data 16 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo17
|Binary data 17 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo18
|Binary data 18 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo19
|Binary data 19 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo20
|Binary data 20 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo21
|Binary data 21 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo22
|Binary data 22 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo23
|Binary data 23 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo24
|Binary data 24 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo25
|Binary data 25 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo26
|Binary data 26 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo27
|Binary data 27 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo28
|Binary data 28 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfo29
|Binary data 29 managed by Firmware Manager.
|kEsfParameterStorageManagerItemFwMgrBinaryInfoMcuFirmware
|MCU firmware information managed by Firmware Manager.
|kEsfParameterStorageManagerItemEsfSensorConfig
|ESF sensor configuration.
|kEsfParameterStorageManagerItemSpiBootLoader
|Loader file for SPI boot.
|kEsfParameterStorageManagerItemSpiBootFirmware
|Main firmware for SPI boot.
|kEsfParameterStorageManagerItemSpiBootAIModel
|AI model (InputTensorOnly) for SPI boot.
|kEsfParameterStorageManagerItemPreInstallAIModelInfo
|Information of pre-installed AI model.
|kEsfParameterStorageManagerItemPreInstallAIModel
|Pre-installed AI model.
|kEsfParameterStorageManagerItemInputTensorOnlyModel
|`network.fpk` for MOBILE APP.
|kEsfParameterStorageManagerItemInputTensorOnlyParam
|`network_info.txt` for MOBILE APP.
|kEsfParameterStorageManagerItemExceptionFactor
|Exception cause.
|kEsfParameterStorageManagerItemExceptionInfo
|Exception information.
|kEsfParameterStorageManagerItemEvpExceptionFactor
|Exception cause due to EVP.
|kEsfParameterStorageManagerItemCustom
|Identifier for custom operation.
|kEsfParameterStorageManagerItemMax
|Indicates the maximum number of data IDs.

|===

[#_EsfParameterStorageManagerItemType]
==== EsfParameterStorageManagerItemType
An enumeration that defines the data type of each data member.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef enum EsfParameterStorageManagerItemType {
  kEsfParameterStorageManagerItemTypeBinaryArray,
  kEsfParameterStorageManagerItemTypeBinaryPointer,
  kEsfParameterStorageManagerItemTypeOffsetBinaryArray,
  kEsfParameterStorageManagerItemTypeOffsetBinaryPointer,
  kEsfParameterStorageManagerItemTypeString,
  kEsfParameterStorageManagerItemTypeRaw,
  kEsfParameterStorageManagerItemTypeMax,
} EsfParameterStorageManagerItemType;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerItemType]
.Description of EsfParameterStorageManagerItemType values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description

|kEsfParameterStorageManagerItemTypeBinaryArray
|<<#_EsfParameterStorageManagerBinaryArray, Binary array type>>.

|kEsfParameterStorageManagerItemTypeBinaryPointer
|<<#_EsfParameterStorageManagerBinary, Binary pointer type>>.

|kEsfParameterStorageManagerItemTypeOffsetBinaryArray
|<<#_EsfParameterStorageManagerOffsetBinaryArray, Offset-specified binary array type>>.

|kEsfParameterStorageManagerItemTypeOffsetBinaryPointer
|<<#_EsfParameterStorageManagerOffsetBinary, Offset-specified binary pointer type>>.

|kEsfParameterStorageManagerItemTypeString
|<<#_String, String type>>.

|kEsfParameterStorageManagerItemTypeRaw
|<<#_Rawdata, Raw data type>>.

|kEsfParameterStorageManagerItemTypeMax
|Indicates the maximum number of data types.

|===

[#_EsfParameterStorageManagerStructInfo]
==== EsfParameterStorageManagerStructInfo
A structure used to configure information about a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerStructInfo {
    size_t items_num;
    const EsfParameterStorageManagerMemberInfo{asterisk} items;
} EsfParameterStorageManagerStructInfo;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerStructInfo]
.Description of EsfParameterStorageManagerStructInfo values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description

|items_num
|Number of member entries in the data structure.

|items
|Member information of the data structure.

|===

[#_EsfParameterStorageManagerMemberInfo]
==== EsfParameterStorageManagerMemberInfo
A structure used to configure member information of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerMemberInfo {
    EsfParameterStorageManagerItemID id;
    EsfParameterStorageManagerItemType type;
    size_t offset;
    size_t size;
    EsfParameterStorageManagerItemMaskIsEnabled enabled;
    const EsfParameterStorageManagerItemAccessor{asterisk} custom;
} EsfParameterStorageManagerMemberInfo;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerMemberInfo]
.Description of EsfParameterStorageManagerMemberInfo values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description

|id
|Data type. +
To implement custom behavior, set to ``**kEsfParameterStorageManagerItemCustom**``. +
In that case, assign the function for custom behavior to the ``**custom**`` member.

|type
|Data type of the data member. Set the appropriate data type.

|offset
|Offset to the data member. Use ``**offsetof**`` to specify.

|size
|Maximum size [Byte] of the data member. +

* <<#_EsfParameterStorageManagerBinaryArray, Binary array type>> +
Use ``**ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_SIZEOF**``.

* <<#_EsfParameterStorageManagerOffsetBinaryArray, Offset-specified binary array type>> +
Use ``**ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_SIZEOF**``.

* <<#_String, String type>> +
Use ``**ESF_PARAMETER_STORAGE_MANAGER_STRING_SIZEOF**``.

* <<#_Rawdata, Raw data type>> +
Use ``**ESF_PARAMETER_STORAGE_MANAGER_RAW_SIZEOF**``.

* Others +
Not referenced.

|enabled
|Function to determine whether the member in the mask structure is enabled.

|custom
|Function for custom behavior. +
If the ``**id**`` member is not ``**kEsfParameterStorageManagerItemCustom**``, set this to ``**NULL**``.

|===

[#_EsfParameterStorageManagerItemAccessor]
==== EsfParameterStorageManagerItemAccessor
A structure that defines operations on a data structure. +
Used when handling data not defined in ``**EsfParameterStorageManagerItemID**``. +

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerItemAccessor {
    EsfParameterStorageManagerItemAccessorSave save;
    EsfParameterStorageManagerItemAccessorLoad load;
    EsfParameterStorageManagerItemAccessorClear clear;
    EsfParameterStorageManagerItemAccessorCancel cancel;
} EsfParameterStorageManagerItemAccessor;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerItemAccessor]
.Description of EsfParameterStorageManagerItemAccessor values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description

|save
|Function that performs the save operation. ``**NULL**`` is not allowed.

|load
|Function that performs the load operation. ``**NULL**`` is not allowed.

|clear
|Function that performs the clear operation. ``**NULL**`` is not allowed.

|cancel
|Function that cancels the save or clear operation. ``**NULL**`` is not allowed.

|===

[#_EsfParameterStorageManagerItemAccessorSave]
==== EsfParameterStorageManagerItemAccessorSave

* *Function* +
Pointer type for functions that perform save operations.

* *Format* +
+
[source, c, subs="+attributes"]
----
typedef EsfParameterStorageManagerStatus ({asterisk}EsfParameterStorageManagerItemAccessorSave)(
    const void{asterisk} item,
    void{asterisk} private_data);
----

* *Argument Description* +
**``[IN] const void{asterisk} item``**:: +
The data member specified by ``**offsetof**``. ``**NULL**`` is not allowed.

**``[IN] void{asterisk} private_data``**:: +
User data.

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** This is a function implemented by the module developer. +
Assign the function pointer to the ``**save**`` member of ``**EsfParameterStorageManagerItemAccessor**``. +

** If the data is saved successfully, return ``**kEsfParameterStorageManagerStatusOk**``. +

** Before saving the data, temporarily store the pre-save data in ``**private_data**``. +
In the event that an error occurs during the save process for another data member and ``**EsfParameterStorageManagerItemAccessorCancel**`` is called, use the saved data to restore the pre-save state. +

** **Execution Information** +
Refer to <<#_TableEsfParameterStorageManagerSaveContext, Execution context for EsfParameterStorageManagerSave>>.

** **Error Information** +
Refer to <<#_TableEsfParameterStorageManagerSaveError, Error information for EsfParameterStorageManagerSave>>.

[#_EsfParameterStorageManagerItemAccessorLoad]
==== EsfParameterStorageManagerItemAccessorLoad

* *Function* +
Pointer type for functions that perform load operations.

* *Format* +
+
[source, c, subs="+attributes"]
----
typedef EsfParameterStorageManagerStatus ({asterisk}EsfParameterStorageManagerItemAccessorLoad)(
    void{asterisk} item,
    void{asterisk} private_data);
----

* *Argument Description* +
**``[OUT] void{asterisk} item``**:: +
The data member specified by ``**offsetof**``. ``**NULL**`` is not allowed.

**``[IN] void{asterisk} private_data``**:: +
User data.

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** This is a function implemented by the module developer. +
** If the data is successfully retrieved, return ``**kEsfParameterStorageManagerStatusOk**``. +

** **Execution Information** +
Refer to <<#_TableEsfParameterStorageManagerLoadContext, Execution context for EsfParameterStorageManagerLoad>>.

** **Error Information** +
Refer to <<#_TableEsfParameterStorageManagerLoadError, Error information for EsfParameterStorageManagerLoad>>.

[#_EsfParameterStorageManagerItemAccessorClear]
==== EsfParameterStorageManagerItemAccessorClear

* *Function* +
Pointer type for functions that perform clear operations.

* *Format* +
+
[source, c, subs="+attributes"]
----
typedef EsfParameterStorageManagerStatus ({asterisk}EsfParameterStorageManagerItemAccessorClear)(
    void{asterisk} private_data);
----

* *Argument Description* +
**``[IN] void{asterisk} private_data``**:: +
User data.

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** This is a function implemented by the module developer. +
** If the data is successfully cleared, return ``**kEsfParameterStorageManagerStatusOk**``. +
** Before deleting the data, temporarily store the pre-clear data in ``**private_data**``. +
In the event that an error occurs during the clear process for another data member and ``**EsfParameterStorageManagerItemAccessorCancel**`` is called, use the saved data to restore the pre-clear state. +

** **Execution Information** +
Refer to <<#_TableEsfParameterStorageManagerClearContext, Execution context for EsfParameterStorageManagerClear>>.

** **Error Information** +
Refer to <<#_TableEsfParameterStorageManagerClearError, Error information for EsfParameterStorageManagerClear>>.

[#_EsfParameterStorageManagerItemAccessorCancel]
==== EsfParameterStorageManagerItemAccessorCancel

* *Function* +
Pointer type for functions that cancel save or clear operations.

* *Format* +
+
[source, c, subs="+attributes"]
----
typedef EsfParameterStorageManagerStatus ({asterisk}EsfParameterStorageManagerItemAccessorCancel)(
    void{asterisk} private_data);
----

* *Argument Description* +
**``[IN] void{asterisk} private_data``**:: +
User data.

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** This is a function implemented by the module developer. +
** If the pre-save or pre-clear state is successfully restored, return ``**kEsfParameterStorageManagerStatusOk**``. +

** **Execution Information** +
+
[#_TableEsfParameterStorageManagerItemAccessorCancelContext]
.Execution context of EsfParameterStorageManagerItemAccessorCancel
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the context of the caller.

|Concurrent Invocation
|Allowed.

|Invocation from Multiple Threads
|Allowed.

|Invocation from Multiple Tasks
|Allowed.

|Blocking
|This API performs internal blocking.

|===

** **Error Information** +
+
[#_TableEsfParameterStorageManagerItemAccessorCancelError]
.Error information of EsfParameterStorageManagerItemAccessorCancel
[width="100%", options="header"]
|===
|Return Value |Error Condition |State of OUT Argument |Recovery Method

|kEsfParameterStorageManagerStatusDataLoss
a|Failed to restore data to the pre-save state.
|{none}
|Recovery is not possible.

|kEsfParameterStorageManagerStatusInternal
a|Internal processing failed.
|{none}
|Please restart the device.

|===

[#_EsfParameterStorageManagerItemMaskIsEnabled]
==== EsfParameterStorageManagerItemMaskIsEnabled

* *Function* +
Pointer type for a function that determines whether a member in the mask structure is enabled.

* *Format* +
+
[source, c, subs="+attributes"]
----
typedef bool ({asterisk}EsfParameterStorageManagerItemMaskIsEnabled)(
    EsfParameterStorageManagerMask mask);
----

* *Argument Description* +
**``[IN] EsfParameterStorageManagerMask mask``**:: +
Mask structure. ``**NULL**`` is not allowed.

* *Return Value* +
Returns ``**true**`` if the mask is enabled. +
Returns ``**false**`` otherwise. +

* *Description* +
** This function must be implemented by the module developer. +
** Returns ``**true**`` if a specific member in the mask structure is enabled. +

** **Execution Information** +
+
[#_TableEsfParameterStorageManagerItemMaskIsEnabledContext]
.Execution context of EsfParameterStorageManagerItemMaskIsEnabled
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the caller's context.

|Concurrent Invocation
|Allowed.

|Invocation from Multiple Threads
|Allowed.

|Invocation from Multiple Tasks
|Allowed.

|Blocking
|Does not perform internal blocking.

|===

[#_EsfParameterStorageManagerRegisterFactoryResetType]
==== EsfParameterStorageManagerRegisterFactoryResetType

* *Function* +
Pointer type for a function to register a factory reset handler.

* *Format* +
+
[source, c, subs="+attributes"]
----
typedef EsfParameterStorageManagerStatus ({asterisk}EsfParameterStorageManagerRegisterFactoryResetType)(
    void{asterisk} private_data);
----

* *Argument Description* +
**``[IN] void{asterisk} private_data``**:: +
User data.

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** This function must be implemented by the module developer. +

** Restores all target data to factory default state. +
** Does not restore data in case of an error. +
** If a critical error occurs, returns an error code. +
** For non-critical errors, logs the event and continues processing. +

** **Execution Information** +
Refer to <<#_TableEsfParameterStorageManagerInvokeFactoryResetTypeContext, Execution context of EsfParameterStorageManagerInvokeFactoryResetType>>.

** **Error Information** +
Refer to <<#_TableEsfParameterStorageManagerInvokeFactoryResetTypeError, Error information of EsfParameterStorageManagerInvokeFactoryResetType>>.

[#_EsfParameterStorageManagerCapabilities]
==== EsfParameterStorageManagerCapabilities

A structure that stores information about the available features of the Parameter Storage Manager. +
Device-specific support details can be found in <<#_Capabilities, Capabilities>> table.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerCapabilities {
    uint32_t cancellable : 1;
} EsfParameterStorageManagerCapabilities;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerCapabilities]
.Description of EsfParameterStorageManagerCapabilities values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description

|cancellable
a|Set to 1 if the API for the **data update cancellation function** is available. Set to 0 if not supported. +
The applicable APIs are:

* ``**EsfParameterStorageManagerUpdateBegin**``
* ``**EsfParameterStorageManagerUpdateComplete**``
* ``**EsfParameterStorageManagerUpdateCancel**``

|===

[#_EsfParameterStorageManagerItemCapabilities]
==== EsfParameterStorageManagerItemCapabilities

A structure that stores capability information for data managed by the Parameter Storage Manager.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerItemCapabilities {
    uint32_t read_only : 1;
    uint32_t enable_offset : 1;
} EsfParameterStorageManagerItemCapabilities;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerItemCapabilities]
.Description of EsfParameterStorageManagerItemCapabilities values
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description

|read_only
a|If set to 1, data cannot be modified using ``**EsfParameterStorageManagerSave**`` or ``**EsfParameterStorageManagerClear**``. +
Only retrieval via ``**EsfParameterStorageManagerRead**`` and ``**EsfParameterStorageManagerGetSize**`` is allowed. +
If set to 0, there are no such restrictions.

|enable_offset
a|If set to 1, <<#_OffsetSpecifiedBinaryData, offset-specified binary data>> is available. +
If set to 0, it is not available.

|===


<<<

[#_APIDefinition]
=== API Definition

[#_EsfParameterStorageManagerInit]
==== EsfParameterStorageManagerInit

* *Function* +
Initializes the Parameter Storage Manager.

* *Format* +
``**EsfParameterStorageManagerStatus EsfParameterStorageManagerInit(void)**``::

* *Argument Description* +
**``[IN, OUT] void``**:: +
None

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** Initializes internal state and allocates required resources. +
** Calls ``**PlStorageInitialize**`` to perform initialization of PL Storage. +
    Errors from ``**PlStorageInitialize**`` are ignored and processing continues. +
** After successful invocation of this API, Parameter Storage Manager APIs become available. +

** **Execution Information** +
+
[#_TableEsfParameterStorageManagerInitContext]
.Execution context of EsfParameterStorageManagerInit
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the caller's context.

|Concurrent Invocation
|Allowed.

|Invocation from Multiple Threads
|Allowed.

|Invocation from Multiple Tasks
|Allowed.

|Blocking
|Performs internal blocking. +
If the Parameter Storage Manager is already active in another context, waits until completion before proceeding. +

|===

** **Error Information** +
+
[#_TableEsfParameterStorageManagerInitError]
.Error information of EsfParameterStorageManagerInit
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Argument State |Recovery Method

|kEsfParameterStorageManagerStatusFailedPrecondition
a|Parameter Storage Manager has already been initialized.
|{none}
|Retry after transitioning to UNINIT state.

|kEsfParameterStorageManagerStatusResourceExhausted
a|Failed to allocate resources.
|{none}
|Check system resource status and retry.

|kEsfParameterStorageManagerStatusInternal
a|An internal error occurred.
|{none}
|Recovery is not possible.

|===

[#_EsfParameterStorageManagerDeinit]
==== EsfParameterStorageManagerDeinit

* *Function* +
Terminates the Parameter Storage Manager.

* *Format* +
``**EsfParameterStorageManagerStatus EsfParameterStorageManagerDeinit(void)**``::

* *Argument Description* +
**``[IN, OUT] void``**:: +
None

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** Calls ``**PlStorageFinalize**`` to perform finalization of PL Storage. +
    Errors from ``**PlStorageFinalize**`` are ignored and processing continues. +
** Releases the resources of the Parameter Storage Manager. +
** After this API is successfully called, the APIs of the Parameter Storage Manager can no longer be used. +

** **Execution Information** +
+
[#_TableEsfParameterStorageManagerDeinitContext]
.Execution context of EsfParameterStorageManagerDeinit
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the caller's context.

|Concurrent Invocation
|Allowed.

|Invocation from Multiple Threads
|Allowed.

|Invocation from Multiple Tasks
|Allowed.

|Blocking
|Performs internal blocking. +
If the Parameter Storage Manager is already active in another context, waits until completion before proceeding. +

|===

** **Error Information** +
+
[#_TableEsfParameterStorageManagerDeinitError]
.Error information of EsfParameterStorageManagerDeinit
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Argument State |Recovery Method

|kEsfParameterStorageManagerStatusInternal
a|An internal error occurred.
|{none}
|Recovery is not possible.

|===

[#_EsfParameterStorageManagerOpen]
==== EsfParameterStorageManagerOpen

* *Function* +
Obtains a handle for the Parameter Storage Manager.

* *Format* +
``**EsfParameterStorageManagerStatus EsfParameterStorageManagerOpen(EsfParameterStorageManagerHandle{asterisk} handle)**``::

* *Argument Description* +
**``[OUT] EsfParameterStorageManagerHandle{asterisk} handle``**:: +
Handle used to operate the Parameter Storage Manager.

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** Acquires an operation handle for the Parameter Storage Manager. +
** By calling this API, you enable the use of other Parameter Storage Manager APIs. +

** **Execution Information** +
+
[#_TableEsfParameterStorageManagerOpenContext]
.Execution context of EsfParameterStorageManagerOpen
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the caller's context.

|Concurrent Invocation
|Allowed.

|Invocation from Multiple Threads
|Allowed.

|Invocation from Multiple Tasks
|Allowed.

|Blocking
|Performs internal blocking. +
If the Parameter Storage Manager is already active in another context, waits until completion before proceeding. +
If the wait exceeds a certain time, a timeout is returned.

|===

** **Error Information** +
+
[#_TableEsfParameterStorageManagerOpenError]
.Error information of EsfParameterStorageManagerOpen
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Argument State |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|Invalid argument. +

* ``**handle**`` == ``**NULL**``
|Unchanged.
|Specify a valid argument and retry.

|kEsfParameterStorageManagerStatusTimedOut
a|Timeout occurred during exclusive control.
|Unchanged.
|Retry the operation.

|kEsfParameterStorageManagerStatusResourceExhausted
a|Failed to acquire handle.
|Unchanged.
|Release any currently used handles and retry.

.2+|kEsfParameterStorageManagerStatusInternal
    a|Parameter Storage Manager is not initialized.
    |Unchanged.
    |Initialize using ``**EsfParameterStorageManagerInit**``.

    a|An internal error occurred.
    |Unchanged.
    |Recovery is not possible.

|===

[#_EsfParameterStorageManagerClose]
==== EsfParameterStorageManagerClose

* *Function* +
Releases the handle of the Parameter Storage Manager.

* *Format* +
``**EsfParameterStorageManagerStatus EsfParameterStorageManagerClose(EsfParameterStorageManagerHandle handle)**``::

* *Argument Description* +
**``[IN] EsfParameterStorageManagerHandle handle``**:: +
Handle used to operate the Parameter Storage Manager.

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** Releases the operation handle of the Parameter Storage Manager. +
If a handle that has already been released is specified, ``**kEsfParameterStorageManagerStatusOk**`` is returned.

** **Execution Information** +
+
[#_TableEsfParameterStorageManagerCloseContext]
.Execution context of EsfParameterStorageManagerClose
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the caller's context.

|Concurrent Invocation
|Allowed.

|Invocation from Multiple Threads
|Allowed.

|Invocation from Multiple Tasks
|Allowed.

|Blocking
|Performs internal blocking. +
If the Parameter Storage Manager is already active in another context, waits until completion before proceeding. +
If the wait exceeds a certain time, a timeout is returned.

|===

** **Error Information** +
+
[#_TableEsfParameterStorageManagerCloseError]
.Error information of EsfParameterStorageManagerClose
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Argument State |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|Invalid argument. +

* ``**handle**`` == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**``
|{none}
|Specify a valid argument and retry.

|kEsfParameterStorageManagerStatusNotFound
a|Invalid handle value.
|{none}
|Obtain a valid handle and retry.

|kEsfParameterStorageManagerStatusTimedOut
a|Timeout occurred during exclusive control.
|{none}
|Retry the operation.

|kEsfParameterStorageManagerStatusFailedPrecondition
a|Failed to release the handle.
|{none}
|Retry after ensuring the handle is no longer in use.

.2+|kEsfParameterStorageManagerStatusInternal
    a|Parameter Storage Manager is not initialized.
    |{none}
    |Initialize with ``**EsfParameterStorageManagerInit**``.

    a|An internal error occurred.
    |{none}
    |Recovery is not possible.

|===

[#_EsfParameterStorageManagerSave]
==== EsfParameterStorageManagerSave

* *Function* +
Saves data to the storage area.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerSave(
    EsfParameterStorageManagerHandle handle,
    EsfParameterStorageManagerMask mask,
    EsfParameterStorageManagerData data,
    const EsfParameterStorageManagerStructInfo{asterisk} info,
    void{asterisk} private_data);
----

* *Argument Description* +
**``[IN] EsfParameterStorageManagerHandle handle``**:: +
Handle of the Parameter Storage Manager.

**``[IN] EsfParameterStorageManagerMask mask``**:: +
Mask structure.

**``[IN] EsfParameterStorageManagerData data``**:: +
Data structure.

**``[IN] const EsfParameterStorageManagerStructInfo{asterisk} info``**:: +
Access information for the structure.

**``[IN] void{asterisk} private_data``**:: +
User data used for custom operations.

* *Return Value* +
Returns one of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> depending on the execution result.

* *Description* +
** This function is intended to be used by the implementation module. +
** Returns ``**kEsfParameterStorageManagerStatusOk**`` only if all data specified in the mask structure is saved successfully. +
** Among the members provided in the ``data`` argument, if any <<#_Binarydata, binary data>> or <<#_String, string>> member has a size of 0, the data will be deleted. +
    For details, refer to the data type items in <<#_DataStructures, Data Structures>>. +
** Processes the structure members given in ``info`` sequentially from the beginning. +
    If an error occurs, the data is restored in reverse order to the pre-save state. +
** In the case of custom operations, ``private_data`` is passed to the callback functions. +
** To ensure consistency with Parameter Storage Manager data operations or to share the exclusive control region, use <<#_EsfParameterStorageManagerLock, EsfParameterStorageManagerLock>> and <<#_EsfParameterStorageManagerUnlock, EsfParameterStorageManagerUnlock>>.

** **Execution Information** +
+
[#_TableEsfParameterStorageManagerSaveContext]
.Execution context of EsfParameterStorageManagerSave
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the caller's context.

|Concurrent Invocation
|Allowed.

|Invocation from Multiple Threads
|Allowed.

|Invocation from Multiple Tasks
|Allowed.

|Blocking
|Performs internal blocking. +
If the Parameter Storage Manager is already active in another context, waits until completion before proceeding. +
If the wait exceeds a certain time, a timeout is returned.

|===

** **Error Information** +
+
[#_TableEsfParameterStorageManagerSaveError]
.Error information of EsfParameterStorageManagerSave
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Argument State |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|Invalid argument. +

* handle == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**``  
* mask == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_MASK**``  
* data == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_DATA**``  
* ``**EsfParameterStorageManagerItemCapabilities::enable_offset == 0**`` and a non-zero offset is specified for <<#_OffsetSpecifiedBinaryData, offset binary data>>  
* Refer to <<#_DataStructures_DataTypes, Data Structure Data Type List>> for additional conditions.
|{none}
|Specify a valid handle or mask structure and retry.

|kEsfParameterStorageManagerStatusInternal
a|Invalid ``info`` argument. +

* info == ``**NULL**``  
* +info->items_num+ == 0  
* +info->items+ == ``**NULL**``  
* +info->items->id+ is out of range  
* +info->items->type+ is out of range  
* If +info->items->id+ == ``**kEsfParameterStorageManagerItemCustom**`` then  
    +info->items->custom+ == ``**NULL**`` or any member of +custom+ is ``**NULL**``  
* +info->items->size+ == 0 where a size must be specified  
|{none}
|Cannot recover. Please implement a valid ``**EsfParameterStorageManagerStructInfo**``.

|kEsfParameterStorageManagerStatusTimedOut
a|Timeout occurred during exclusive control.
|{none}
|Retry the operation.

|kEsfParameterStorageManagerStatusNotFound
a|Valid handle not found.
|{none}
|Obtain a valid handle and retry.

|kEsfParameterStorageManagerStatusResourceExhausted
a|Resource shortage.
|{none}
|Release some resources and retry.

|kEsfParameterStorageManagerStatusPermissionDenied
a|Contains data that cannot be modified.
|{none}
|Exclude such data from the mask and retry.

.2+|kEsfParameterStorageManagerStatusDataLoss
    a|Failed to restore data to pre-modification state.
    |{none}
    |Recovery is not possible.

    a|Failed to access the data storage area.
    |{none}
    |Recovery is not possible.

|kEsfParameterStorageManagerStatusUnavailable
a|Failed to modify data.
|{none}
|Retry the operation.

|kEsfParameterStorageManagerStatusOutOfRange
a|Exceeded the range of the data storage area.
|{none}
|Adjust data size or offset to be within valid range and retry.

.2+|kEsfParameterStorageManagerStatusInternal
    a|Parameter Storage Manager is not initialized.
    |{none}
    |Initialize using ``**EsfParameterStorageManagerInit**``.

    a|Internal processing failed.
    |{none}
    |Restart the device.

|===

** **Sequence Diagram** +
+
[{mermaid_block}]
----
sequenceDiagram
participant ds as Implementation Module
participant internal as Parameter Storage Manager
participant custom as CustomAccessor
participant storage as Data Storage Area

ds ->>+ internal: EsfParameterStorageManagerSave({mermaid_br}EsfParameterStorageManagerHandle handle,{mermaid_br}EsfParameterStorageManagerMask mask,{mermaid_br}EsfParameterStorageManagerData data,{mermaid_br}const EsfParameterStorageManagerStructInfo{asterisk} info,{mermaid_br}void{asterisk} private_data)
    {mermaid_break} Argument validation
        internal -->> ds: kEsfParameterStorageManagerStatusInvalidArgument{mermaid_br}or{mermaid_br}kEsfParameterStorageManagerStatusInternal
    end

    {mermaid_critical} Parameter Storage Manager Exclusive Control Section
        Note over internal,storage: Save operation
        loop index < info->items_size
            opt info->items[index]->enabled(mask)
                alt info->items[index]->id =={mermaid_br}kEsfParameterStorageManagerItemCustom
                    Note over internal: Custom operation
                    internal ->>+ custom: info->items[index]->{mermaid_br}custom->save({mermaid_br}data + info->items[index]->offset,{mermaid_br}info->items[index]->size,{mermaid_br}private_data)
                    custom -->>- internal: EsfParameterStorageManagerStatus
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                else info->items[index]->id !={mermaid_br}kEsfParameterStorageManagerItemCustom
                    Note over internal: Default operation
                    internal ->>+ storage: Retrieve size
                    storage -->>- internal: Retrieved size
                    internal ->>+ storage: Access data
                    storage -->>- internal: Read result
                    opt Written data != Read data
                        alt Written data size != 0
                            internal ->>+ storage: Save data
                            storage -->>- internal: Save result
                        else Written data size == 0
                            internal ->>+ storage: Delete data
                            storage -->>- internal: Delete result
                        end
                    end
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                end
            end
            {mermaid_break} ret != kEsfParameterStorageManagerStatusOk
                Note over internal,custom: Exit loop
            end
        end

        {mermaid_break} ret == kEsfParameterStorageManagerStatusOk
            Note left of internal: Operation succeeded
            internal -->> ds: kEsfParameterStorageManagerStatusOk
        end
        {mermaid_break} ret == kEsfParameterStorageManagerStatusDataLoss
            Note left of internal: Recovery not possible
            internal -->> ds: kEsfParameterStorageManagerStatusDataLoss
        end

        Note over internal,storage: Recovery operation
        loop 0 <= index
            opt info->items[index]->enabled(mask)
                alt info->items[index]->id =={mermaid_br}kEsfParameterStorageManagerItemCustom
                    Note over internal: Custom operation
                    internal ->>+ custom: info->{mermaid_br}items[index]->{mermaid_br}custom->cancel({mermaid_br}private_data)
                    custom -->>- internal: EsfParameterStorageManagerStatus
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                else
                    Note over internal: Default operation
                    internal ->>+ storage: Access data
                    storage -->>- internal: Write result
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                end
            end
            {mermaid_break} ret != kEsfParameterStorageManagerStatusOk
                Note over internal,custom: Exit loop and set return value to kEsfParameterStorageManagerStatusDataLoss
            end
        end
    end

internal -->>- ds: EsfParameterStorageManagerStatus
----

[#_EsfParameterStorageManagerLoad]
==== EsfParameterStorageManagerLoad
* *Function* +
    Loads data from the data storage area.

* *Syntax* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerLoad(
    EsfParameterStorageManagerHandle handle,
    EsfParameterStorageManagerMask mask,
    EsfParameterStorageManagerData data,
    const EsfParameterStorageManagerStructInfo{asterisk} info,
    void{asterisk} private_data);
----

* *Parameter Description* +
    **``[IN] EsfParameterStorageManagerHandle handle``**::  
    Handle for the Parameter Storage Manager.

    **``[IN] EsfParameterStorageManagerMask mask``**::  
    Mask structure.

    **``[OUT] EsfParameterStorageManagerData data``**::  
    Data structure.

    **``[IN] const EsfParameterStorageManagerStructInfo{asterisk} info``**::  
    Access information for the data structure.

    **``[IN] void{asterisk} private_data``**::  
    User-defined data used for custom operations.

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the execution result.

* *Description* +
    ** This function is used by implementation modules. +
    ** Returns ``**kEsfParameterStorageManagerStatusOk**`` if all data specified in the mask structure is successfully loaded. +
    ** The structure information provided in ``**info**`` is processed in order from the beginning. +
    ** In the case of custom operations, ``**private_data**`` is passed to the callback function as an argument. +
    ** If consistency with Parameter Storage Manager’s operations is needed (e.g., using exclusive control), use <<#_EsfParameterStorageManagerLock, EsfParameterStorageManagerLock>> and <<#_EsfParameterStorageManagerUnlock, EsfParameterStorageManagerUnlock>>. +
    ** If data has been deleted, the corresponding data member’s ``**size**`` is set to 0. +
        For data types with an ``**offset**`` member, the ``**offset**`` is also set to 0. +
        For string types, the beginning of the member is set to ``**'\0'**``. +
        You can use the function ``**EsfParameterStorageManagerIsDataEmpty**`` or macros such as ``**ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_IS_EMPTY**`` to check whether a member contains data. +

    ** **Execution Information** +
+
[#_TableEsfParameterStorageManagerLoadContext]
.Execution details for EsfParameterStorageManagerLoad
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the caller's context.

|Concurrent Invocation
|Allowed.

|Multi-threaded Invocation
|Allowed.

|Multi-task Invocation
|Allowed.

|Blocking
|Blocking occurs inside the API. +
If another context is currently using the Parameter Storage Manager, this API waits until the operation completes. +
If the wait time exceeds a certain threshold, a timeout response will be returned. +

|===

    ** **Error Information** +
+
[#_TableEsfParameterStorageManagerLoadError]
.Error information for EsfParameterStorageManagerLoad
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter Status |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|One or more user-defined arguments are invalid.

* handle == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**``
* mask == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_MASK**``
* data == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_DATA**``
* ``**EsfParameterStorageManagerItemCapabilities::enable_offset == 0**`` and an offset other than 0 is specified for <<#_OffsetSpecifiedBinaryData, offset-specified binary data>>
* For other conditions, refer to <<#_DataStructures_DataTypes, Data Structure – Data Type List>>
|No changes
|Specify a valid handle and mask structure, then retry.

|kEsfParameterStorageManagerStatusInternal
a|The ``**info**`` argument is invalid.

* info == ``**NULL**``
* +info->items_num+ == 0
* +info->items+ == ``**NULL**``
* +info->items->id+ is out of valid range
* +info->items->type+ is out of valid range
* If +info->items->id+ == ``**kEsfParameterStorageManagerItemCustom**`` +
  then +info->items->custom+ == ``**NULL**`` or any member of +info->items->custom+ is ``**NULL**``
* +info->items->size == 0+ is specified when member size must be defined
|No changes
|Cannot be recovered. Implement a valid ``**EsfParameterStorageManagerStructInfo**``.

|kEsfParameterStorageManagerStatusTimedOut
a|Timeout occurred due to exclusive control.
|No changes
|Retry the operation.

|kEsfParameterStorageManagerStatusNotFound
a|A valid handle could not be found.
|No changes
|Obtain a valid handle and retry.

|kEsfParameterStorageManagerStatusResourceExhausted
a|Resources were insufficient.
|No changes
|Free up resources and retry.

|kEsfParameterStorageManagerStatusDataLoss
a|Failed to access the data storage area.
|Partial data retrieved up to the point of error is set
|Cannot be recovered.

|kEsfParameterStorageManagerStatusUnavailable
a|Failed to load data.
|Partial data retrieved up to the point of error is set
|Retry the operation.

|kEsfParameterStorageManagerStatusOutOfRange
|Exceeded the range of the data storage area. +
|Partial data retrieved up to the point of error is set
|Adjust data size or offset to be within range and retry.

.2+|kEsfParameterStorageManagerStatusInternal
a|Parameter Storage Manager has not been initialized.
|No changes
|Initialize using ``**EsfParameterStorageManagerInit**``.

a|Internal processing failed.
|Partial data retrieved up to the point of error is set
|Restart the device.

|===

    ** **Sequence Diagram** +
+
[{mermaid_block}]
----
sequenceDiagram
participant ds as Implementation Module
participant internal as Parameter Storage Manager
participant accessor as ItemAccessor
participant custom as CustomAccessor
participant storage as Data Storage Area

ds ->>+ internal: EsfParameterStorageManagerLoad({mermaid_br}EsfParameterStorageManagerHandle handle,{mermaid_br}EsfParameterStorageManagerMask mask,{mermaid_br}EsfParameterStorageManagerData data,{mermaid_br}const EsfParameterStorageManagerStructInfo{asterisk} info,{mermaid_br}void{asterisk} private_data)
    {mermaid_break} Argument validation
        internal -->> ds: kEsfParameterStorageManagerStatusInvalidArgument{mermaid_br}or{mermaid_br}kEsfParameterStorageManagerStatusInternal
    end

    {mermaid_critical} Parameter Storage Manager exclusive control section
        Note over internal,storage: Load process
        loop index < info->items_size
            opt info->items[index]->enabled(mask)
                alt info->items[index]->id =={mermaid_br}kEsfParameterStorageManagerItemCustom
                    Note over internal: Custom operation
                    internal ->>+ custom: info->items[index]->{mermaid_br}custom->load({mermaid_br}data + info->items[index]->offset,{mermaid_br}info->items[index]->size,{mermaid_br}private_data)
                    custom -->>- internal: EsfParameterStorageManagerStatus
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                else info->items[index]->id !={mermaid_br}kEsfParameterStorageManagerItemCustom
                    Note over internal: Default operation
                    internal ->>+ storage: Data access
                    storage -->>- internal: Read result
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                end
            end
            {mermaid_break} ret != kEsfParameterStorageManagerStatusOk
                Note over internal,custom: Break loop
            end
        end
    end

internal -->>- ds: EsfParameterStorageManagerStatus
----

[#_EsfParameterStorageManagerClear]
==== EsfParameterStorageManagerClear
* *Function* +
    Deletes data from the data storage area.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerClear(
    EsfParameterStorageManagerHandle handle,
    EsfParameterStorageManagerMask mask,
    const EsfParameterStorageManagerStructInfo{asterisk} info,
    void{asterisk} private_data);
----

* *Parameter Description* +
    **``[IN] EsfParameterStorageManagerHandle handle``**::  
    Handle for Parameter Storage Manager operations.

    **``[IN] EsfParameterStorageManagerMask mask``**::  
    Mask structure.

    **``[IN] const EsfParameterStorageManagerStructInfo{asterisk} info``**::  
    Access information for the structure.

    **``[IN] void{asterisk} private_data``**::  
    User-defined data used in custom behavior.

* *Return Value* +
    Returns one of the values defined in <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>>, depending on the execution result.

* *Description* +
    ** This function is used by implementation modules. +
    ** Returns ``**kEsfParameterStorageManagerStatusOk**`` if all data specified by the mask structure is successfully deleted. +
    ** Processes the data structure information provided by ``**info**`` sequentially from the beginning. +
        If an error occurs, it restores the data to its original state in the reverse order of deletion. +
    ** For custom behavior, ``**private_data**`` is passed as an argument to the callback function. +
    ** If you want to maintain consistency with other operations using the Parameter Storage Manager (e.g., shared exclusive control), use <<#_EsfParameterStorageManagerLock, EsfParameterStorageManagerLock>> and <<#_EsfParameterStorageManagerUnlock, EsfParameterStorageManagerUnlock>>.

    ** **Execution Information** +
+
[#_TableEsfParameterStorageManagerClearContext]
.Execution Information of EsfParameterStorageManagerClear
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API

|Execution Context
|Runs in the caller's context.

|Concurrent Calls
|Allowed

|Calls from Multiple Threads
|Allowed

|Calls from Multiple Tasks
|Allowed

|Blocking
|Internally blocking. +
If another context is already using the Parameter Storage Manager, this function waits for completion. +
If the wait time exceeds a certain threshold, it returns a timeout response.

|===

** **Error Information** +
+
[#_TableEsfParameterStorageManagerClearError]
.Error Information of EsfParameterStorageManagerClear
[width="100%", options="header"]
|===
|Return Value |Error Condition |State of OUT Parameters |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|Invalid argument specified by the user.

* handle == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**``
* mask == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_MASK**``
|{none}
|Specify a valid handle or mask structure.

|kEsfParameterStorageManagerStatusInternal
a|The `**info**` argument is invalid.

* info == ``**NULL**``
* +info->items_num+ == 0
* +info->items+ == ``**NULL**``
* +info->items->id+ is out of range
* +info->items->type+ is out of range
* If +info->items->id+ == ``**kEsfParameterStorageManagerItemCustom**``: +
    +info->items->custom+ == ``**NULL**`` or its members are ``**NULL**``
|{none}
|Cannot recover. Implement a correct ``**EsfParameterStorageManagerStructInfo**``.

|kEsfParameterStorageManagerStatusTimedOut
a|Timeout occurred during exclusive control.
|{none}
|Retry the operation.

|kEsfParameterStorageManagerStatusNotFound
a|Valid handle not found.
|{none}
|Obtain a valid handle and retry.

|kEsfParameterStorageManagerStatusResourceExhausted
a|Insufficient resources.
|{none}
|Release resources and retry.

|kEsfParameterStorageManagerStatusPermissionDenied
a|Includes data that cannot be deleted.
|{none}
|Exclude undeletable data in the mask structure and retry.

.2+|kEsfParameterStorageManagerStatusDataLoss
a|Failed to restore data to the state before deletion.
|{none}
|Cannot recover.

a|Unable to access the data storage area.
|{none}
|Cannot recover.

|kEsfParameterStorageManagerStatusUnavailable
a|Failed to delete data.
|{none}
|Retry the operation.

.2+|kEsfParameterStorageManagerStatusInternal
a|Parameter Storage Manager is not initialized.
|{none}
|Initialize using ``**EsfParameterStorageManagerInit**``.

a|Internal processing failed.
|{none}
|Restart the device.

|===

** **Sequence Diagram** +
+
[{mermaid_block}]
----
sequenceDiagram
participant ds as Implementation Module
participant internal as Parameter Storage Manager
participant accessor as ItemAccessor
participant custom as CustomAccessor
participant storage as Data Storage

ds ->>+ internal: EsfParameterStorageManagerClear({mermaid_br}EsfParameterStorageManagerHandle handle,{mermaid_br}EsfParameterStorageManagerMask mask,{mermaid_br}const EsfParameterStorageManagerStructInfo{asterisk} info,{mermaid_br}void{asterisk} private_data)
    {mermaid_break} Argument validation
        internal -->> ds: kEsfParameterStorageManagerStatusInvalidArgument{mermaid_br}or{mermaid_br}kEsfParameterStorageManagerStatusInternal
    end

    {mermaid_critical} Exclusive section of Parameter Storage Manager
        Note over internal,storage: Deletion processing
        loop index < info->items_size
            opt info->items[index]->enabled(mask)
                alt info->items[index]->id =={mermaid_br}kEsfParameterStorageManagerItemCustom
                    Note over internal: Custom operation
                    internal ->>+ custom: info->items[index]->{mermaid_br}custom->clear({mermaid_br}private_data)
                    custom -->>- internal: EsfParameterStorageManagerStatus
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                else info->items[index]->id !={mermaid_br}kEsfParameterStorageManagerItemCustom
                    Note over internal: Default operation
                    internal ->>+ storage: Get size
                    storage -->>- internal: Size result
                    internal ->>+ storage: Data access
                    storage -->>- internal: Read result
                    internal ->>+ storage: Data access
                    storage -->>- internal: Delete result
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                end
            end
            {mermaid_break} ret != kEsfParameterStorageManagerStatusOk
                Note over internal,custom: Exit loop
            end
        end

        {mermaid_break} ret == kEsfParameterStorageManagerStatusOk
            Note left of internal: Success
            internal -->> ds: kEsfParameterStorageManagerStatusOk
        end
        {mermaid_break} ret == kEsfParameterStorageManagerStatusDataLoss
            Note left of internal: Restore failed
            internal -->> ds: kEsfParameterStorageManagerStatusDataLoss
        end

        Note over internal,storage: Restore processing
        loop 0 <= index
            opt info->items[index]->enabled(mask)
                alt info->items[index]->id =={mermaid_br}kEsfParameterStorageManagerItemCustom
                    Note over internal: Custom operation
                    internal ->>+ custom: info->{mermaid_br}items[index]->{mermaid_br}custom->cancel({mermaid_br}private_data)
                    custom -->>- internal: EsfParameterStorageManagerStatus
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                else
                    Note over internal: Default operation
                    internal ->>+ storage: Data access
                    storage -->>- internal: Write result
                    internal -->> internal: ret: EsfParameterStorageManagerStatus
                end
            end
            {mermaid_break} ret != kEsfParameterStorageManagerStatusOk
                Note over internal,custom: Exit loop{mermaid_br}Set return value to kEsfParameterStorageManagerStatusDataLoss
            end
        end
    end

internal -->>- ds: EsfParameterStorageManagerStatus
----

[#_EsfParameterStorageManagerGetSize]
==== EsfParameterStorageManagerGetSize
* *Functionality* +
    Returns the size of the data stored in the data storage area.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerGetSize(
    EsfParameterStorageManagerHandle handle,
    EsfParameterStorageManagerItemID id,
    uint32_t{asterisk} loadable_size);
----

* *Parameter Description* +
    **``[IN] EsfParameterStorageManagerHandle handle``**::  
    Handle to the Parameter Storage Manager.  
    ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**`` can be specified.

    **``[IN] EsfParameterStorageManagerItemID id``**::  
    ID of the data whose size is to be retrieved.

    **``[OUT] uint32_t{asterisk} loadable_size``**::  
    Size of the data.

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the result.

* *Description* +
    ** This function is used by the implementation module. +
    ** Returns the size of data stored in the data storage area. +
    The returned size can be used with ``**EsfParameterStorageManagerLoad**`` to retrieve the data. +
    ** If ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**`` is specified for the ``**handle**``, the size of the actual data stored in the storage area is returned. +
    If another valid handle is specified, the size of the data associated with that handle is returned.

    ** **Execution Context Information** +
+
[#_TableEsfParameterStorageManagerGetSizeContext]
.Execution information for EsfParameterStorageManagerGetSize
[width="100%", options="header"]
|===
|Execution Context |Description

|API Type
|Synchronous API

|Execution Context
|Runs in the caller’s context

|Reentrant
|Supported

|Multi-threaded access
|Supported

|Multi-task access
|Supported

|Blocking
|This API may block internally. +
If the Parameter Storage Manager is already in use in another context, this call will wait until it completes. +
Returns a timeout response if waiting exceeds a certain duration.

|===

    ** **Error Information** +
+
[#_TableFunctionEsfParameterStorageManagerGetSize]
.Error information for EsfParameterStorageManagerGetSize
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|The input arguments are invalid.
    * id < 0
    * ``**kEsfParameterStorageManagerItemCustom**`` <= id
    * loadable_size == ``**NULL**``
|No change
|Specify valid arguments.

|kEsfParameterStorageManagerStatusTimedOut
a|Timeout occurred due to exclusive control.
|No change
|Retry the operation.

|kEsfParameterStorageManagerStatusNotFound
a|Valid handle not found.
|{none}
|Specify ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**`` or obtain a valid handle and retry.

|kEsfParameterStorageManagerStatusResourceExhausted
a|Insufficient resources.
|No change
|Free up resources and retry.

|kEsfParameterStorageManagerStatusDataLoss
a|Unable to access the data storage area.
|No change
|Cannot be recovered.

|kEsfParameterStorageManagerStatusUnavailable
a|Failed to retrieve the data size.
|No change
|Retry the operation.

|kEsfParameterStorageManagerStatusInternal
a|Internal processing error.
|No change
|Check the error details.

|===

** **Sequence Diagram** +
+
[{mermaid_block}]
----
sequenceDiagram
participant ds as Implementation Module
participant internal as Parameter Storage Manager
participant storage as Data Storage Area

ds ->>+ internal: EsfParameterStorageManagerGetSize({mermaid_br}EsfParameterStorageManagerHandle handle,{mermaid_br}EsfParameterStorageManagerItemID id,{mermaid_br}uint32_t{asterisk} loadable_size)
    {mermaid_break} Argument validation
        internal -->> ds: kEsfParameterStorageManagerStatusInvalidArgument
    end

    {mermaid_critical} Parameter Storage Manager Exclusive Control Section
        internal ->>+ storage: Retrieve data size
        storage -->>- internal: Data size
    end
internal -->>- ds: EsfParameterStorageManagerStatus
----

[#_EsfParameterStorageManagerLock]
==== EsfParameterStorageManagerLock
* *Functionality* +
    Initiates exclusive control for accessing the data storage area.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerLock(void);
----

* *Parameter Description* +
    **``[IN, OUT] void``**::  
    None

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the result.

* *Description* +
    ** This function is used by the implementation module. +
    ** It begins exclusive access control to the data storage area. +
    Use this API if you want to perform processing within the same exclusive control block as this API. +
    ** Recursive locking is supported. +
    You must call <<#_EsfParameterStorageManagerUnlock, EsfParameterStorageManagerUnlock>> the same number of times as this function was called. +
    ** If exclusive control cannot be acquired within a certain period, an error will be returned. +
    Refer to <<#_ContinuousProcessingTime>> for timeout details. +

    ** **Error Information** +
+
[#_TableFunctionEsfParameterStorageManagerLock]
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

|kEsfParameterStorageManagerStatusTimedOut
|Timeout occurred during exclusive control.
|{none}
|Retry the operation.

|kEsfParameterStorageManagerStatusInternal
|Internal processing failed.
|{none}
|Restart the device.

|===

** **Sequence Diagram** +
+
[{mermaid_block}]
----
sequenceDiagram
participant ds as Implementation Module
participant internal as Parameter Storage Manager
participant mutex as Parameter Storage Manager{mermaid_br}Mutex
participant recursive as Parameter Storage Manager{mermaid_br}Mutex Management Info

ds ->>+ internal: EsfParameterStorageManagerLock(void)
    internal ->>+ mutex: pthread_mutex_trylock(&mutex)
    mutex -->>- internal: ret: int
    alt ret == 0
        internal ->>+ recursive: Initialize management info
            recursive ->> recursive: pid = pthread_self(){mermaid_br}lock_count = 1
        recursive -->>- internal: kEsfParameterStorageManagerStatusOk
        internal -->> ds: kEsfParameterStorageManagerStatusOk
    else ret == EBUSY
        Note over recursive: Already locked && same thread ID → no need to lock
        internal ->>+ recursive: Check management info
            {mermaid_break} pthread_equal({mermaid_br}pid,{mermaid_br}pthread_self()) != 0
                recursive ->> recursive: ++lock_count
                recursive -->> internal: kEsfParameterStorageManagerStatusOk
                internal -->> ds: kEsfParameterStorageManagerStatusOk
            end
            recursive -->>- internal: kEsfParameterStorageManagerStatusFailedPrecondition

        internal ->>+ mutex: pthread_mutex_timedlock({mermaid_br}&mutex,{mermaid_br}&timeout)
        mutex -->>- internal: ret: int
        {mermaid_break} ret == ETIMEDOUT
            internal -->> ds: kEsfParameterStorageManagerStatusTimedOut
        end
        {mermaid_break} ret != 0
            internal -->> ds: kEsfParameterStorageManagerStatusInternal
        end
        internal -->> ds: kEsfParameterStorageManagerStatusOk
    else Other error
        {mermaid_break}
            internal -->>- ds: kEsfParameterStorageManagerStatusInternal
        end
    end
----

[#_EsfParameterStorageManagerUnlock]
==== EsfParameterStorageManagerUnlock
* *Function* +
    Ends exclusive control for access to the data storage area.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerUnlock(void);
----

* *Argument Description* +
    **``[IN, OUT] void``**::  
    None.

* *Return Value* +
    One of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values is returned depending on the execution result.

* *Description* +
    ** This function is used by the implementation module. +
    ** It ends exclusive access control for the data storage area. +
        Use this API when the implementation module needs to operate within the same exclusive control section as this function’s API. +
    ** Recursive locking is supported. +
        Be sure to call this API the same number of times as <<#_EsfParameterStorageManagerLock, EsfParameterStorageManagerLock>> was called. +

    ** **Error Information** +
+
[#_TableFunctionEsfParameterStorageManagerUnlock]
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

|kEsfParameterStorageManagerStatusInternal
|Internal processing failed.
|{none}
|Restart the device.

|===

** **Sequence Diagram** +
+
[{mermaid_block}]
----
sequenceDiagram
participant ds as Implementation Module
participant internal as Parameter Storage Manager
participant mutex as Parameter Storage Manager{mermaid_br}Mutex
participant recursive as Parameter Storage Manager{mermaid_br}Mutex Management Info

ds ->>+ internal: EsfParameterStorageManagerUnlock(void)
    internal ->>+ recursive: Check management info
        {mermaid_break} lock_count == 0 ||{mermaid_br}pthread_equal({mermaid_br}pid,{mermaid_br}pthread_self()) == 0
            recursive -->> internal: kEsfParameterStorageManagerStatusInternal
            internal -->> ds: kEsfParameterStorageManagerStatusInternal
        end
        recursive ->> recursive: --lock_count
        alt lock_count == 0
            recursive -->> internal: kEsfParameterStorageManagerStatusOk
        else lock_count != 0
            recursive -->>- internal: kEsfParameterStorageManagerStatusFailedPrecondition
        end

    {mermaid_break} kEsfParameterStorageManagerStatusFailedPrecondition
        Note over internal: If lock_count is not 0,{mermaid_br}do not unlock and return success
        internal -->> ds: kEsfParameterStorageManagerStatusOk
    end
    internal ->>+ mutex: pthread_mutex_unlock(&mutex)
    mutex -->>- internal: ret: int
    {mermaid_break} ret != 0
        internal -->> ds: kEsfParameterStorageManagerStatusInternal
    end

internal -->>- ds: kEsfParameterStorageManagerStatusOk
----

[#_EsfParameterStorageManagerInvokeFactoryReset]
==== EsfParameterStorageManagerInvokeFactoryReset
* *Function* +
    Restores saved data to factory default state.

* *Format* +
    ``**EsfParameterStorageManagerStatus EsfParameterStorageManagerInvokeFactoryReset(void)**``::

* *Parameter Description* +
    **``[IN, OUT] void``**::  
    None.

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the result.

* *Description* +
    ** Restores saved data to factory default settings. +
    ** When this API is successfully called, the saved data is reverted to the factory default state. +
    ** Returns ``**kEsfParameterStorageManagerStatusOk**`` if the reset to factory default completes successfully. +
    ** Returns ``**kEsfParameterStorageManagerStatusDataLoss**`` in case of an unrecoverable critical error. +
        In such cases, the state of the saved data is undefined. +
    ** After reverting the factory reset target items defined in <<#_DataSettingTable, Factory Reset Target>>, +
       this API internally calls the function registered via ``**<<#_EsfParameterStorageManagerRegisterFactoryReset, EsfParameterStorageManagerRegisterFactoryReset>>**``.

    ** **Execution Information** +
+
[#_TableEsfParameterStorageManagerInvokeFactoryResetContext]
.Execution Information for EsfParameterStorageManagerInvokeFactoryReset
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the caller's context.

|Concurrent Invocation
|Allowed.

|Invocation from Multiple Threads
|Allowed.

|Invocation from Multiple Tasks
|Allowed.

|Blocking
|Blocks internally. +
If Parameter Storage Manager is already running in another context, waits for completion before executing. +
Returns a timeout response if waiting exceeds a certain time.

|===

    ** **Error Information** +
+
[#_TableEsfParameterStorageManagerInvokeFactoryResetError]
.Error Information for EsfParameterStorageManagerInvokeFactoryReset
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

|kEsfParameterStorageManagerStatusTimedOut
a|Timed out during exclusive access.
|{none}
|Please retry.

|kEsfParameterStorageManagerStatusDataLoss
a|An unrecoverable error occurred.
|{none}
|Please restart the device.

.2+|kEsfParameterStorageManagerStatusInternal
    a|Parameter Storage Manager is not initialized.
    |{none}
    |Please initialize using ``**EsfParameterStorageManagerInit**``.

    a|An internal error occurred.
    |{none}
    |Unrecoverable.

|===

[#_EsfParameterStorageManagerRegisterFactoryReset]
==== EsfParameterStorageManagerRegisterFactoryReset
* *Function* +
    Registers a Factory Reset function.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerRegisterFactoryReset(
    EsfParameterStorageManagerRegisterFactoryResetType func,
    void{asterisk} private_data,
    EsfParameterStorageManagerFactoryResetID{asterisk} id);
----

* *Parameter Description* +
    **``[IN] EsfParameterStorageManagerRegisterFactoryResetType func``**::  
    The Factory Reset function to be registered.

    **``[IN] void{asterisk} private_data``**::  
    User data to be used within the registered Factory Reset function.

    **``[OUT] EsfParameterStorageManagerFactoryResetID{asterisk} id``**::  
    Factory Reset registration identifier.

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the result.

* *Description* +
    ** Function used by implementation modules. +
    ** Use this function to register a callback function when you want to restore non-default data to factory settings during ``**EsfParameterStorageManagerInvokeFactoryReset**`` execution. +
    ** Returns ``**kEsfParameterStorageManagerStatusOk**`` upon successful registration. +
    ** The registered function and user data will be used when ``**EsfParameterStorageManagerInvokeFactoryReset**`` is called. +

    ** **Error Information** +
+
[#_TableFunctionEsfParameterStorageManagerRegisterFactoryReset]
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|Invalid parameter value.

* ``**func**`` == ``**NULL**`` +
* ``**id**`` == ``**NULL**``
|{none}
|Specify valid arguments.

|kEsfParameterStorageManagerStatusResourceExhausted
|Maximum number of registered Factory Reset functions has been reached.
|{none}
|Increase the maximum number of Factory Reset registrations.

|===

[#_EsfParameterStorageManagerUnregisterFactoryReset]
==== EsfParameterStorageManagerUnregisterFactoryReset
* *Function* +
    Unregisters a Factory Reset function.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerUnregisterFactoryReset(
    EsfParameterStorageManagerFactoryResetID id);
----

* *Parameter Description* +
    **``[IN] EsfParameterStorageManagerFactoryResetID id``**::  
    Identifier of the Factory Reset function to be unregistered.

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the result.

* *Description* +
    ** Function used by implementation modules. +

    ** **Behavior** +
        *** Returns ``**kEsfParameterStorageManagerStatusOk**`` upon successful unregistration. +
        Also returns ``**kEsfParameterStorageManagerStatusOk**`` if the function is already unregistered. +

    ** **Error Information** +
+
[#_TableFunctionEsfParameterStorageManagerUnregisterFactoryReset]
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|Invalid parameter value.

* id == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_FACTORY_RESET_ID**``
|{none}
|Specify valid argument.

1.2+|kEsfParameterStorageManagerStatusInternal
    a|Parameter Storage Manager has not been initialized.
    |{none}
    |Initialize using ``**EsfParameterStorageManagerInit**``.

    a|An internal error occurred.
    |{none}
    |Unrecoverable.

|===


[#_EsfParameterStorageManagerDowngrade]
==== EsfParameterStorageManagerDowngrade
* *Function* +
    Downgrades the data storage area from v2 to v1.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerDowngrade(void);
----

* *Parameter Description* +
    **``[IN, OUT] void``**::  
    None

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the result.

* *Description* +
    ** Downgrades the data storage area from v2 to v1. +

    ** **Behavior** +
        *** Returns ``**kEsfParameterStorageManagerStatusOk**`` if the operation is successful. +
        *** Returns ``**kEsfParameterStorageManagerStatusInternal**`` if the operation fails. +
        *** Executes exclusive control without timeout.

    ** **Error Information** +
+
[#_TableFunctionEsfParameterStorageManagerDowngrade]
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

|kEsfParameterStorageManagerStatusInternal
a|An error occurred during internal processing.
|{none}
|Check the error log.

|===

[#_EsfParameterStorageManagerUpdateBegin]
==== EsfParameterStorageManagerUpdateBegin
* *Function* +
    Starts updating the data storage area.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerUpdateBegin(
    EsfParameterStorageManagerHandle handle,
    EsfParameterStorageManagerMask mask,
    const EsfParameterStorageManagerStructInfo{asterisk} info,
    EsfParameterStorageManagerUpdateType type);
----

* *Parameter Description* +
    **``[IN] EsfParameterStorageManagerHandle handle``**::  
    Handle for the Parameter Storage Manager.

    **``[IN] EsfParameterStorageManagerMask mask``**::  
    Target to begin updating.

    **``[IN] const EsfParameterStorageManagerStructInfo{asterisk} info``**::  
    Access information for the structure.

    **``[IN] EsfParameterStorageManagerUpdateType type``**::  
    Temporary data storage area state after executing this API.

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the result.

* *Description* +
    ** Function used by implementation modules. +
    ** The specified data uses a temporary data storage area. +
        When calling ``**EsfParameterStorageManagerSave**``, ``**EsfParameterStorageManagerLoad**``, ``**EsfParameterStorageManagerClear**``, or ``**EsfParameterStorageManagerGetSize**`` using the handle specified in this API, it will operate on the temporary data storage area for the specified data. Other data will be operated on in the actual storage area. +
        When not using the specified handle, those APIs operate on the actual data storage area. +
    ** ``**EsfParameterStorageManagerUpdateComplete**`` applies the temporary data to the actual data storage area. +
    ** ``**EsfParameterStorageManagerUpdateCancel**`` discards the temporary data without applying it to the actual data storage area. +
    ** The state of the temporary data storage area after this API is determined by the ``**type**`` argument. +
        Specifying ``**kEsfParameterStorageManagerUpdateEmpty**`` results in a deleted state. +
        Specifying ``**kEsfParameterStorageManagerUpdateCopy**`` results in the data being copied from the actual storage area. +
    ** Only data designated in the PL Config can have a temporary storage area. +
        If non-designated data is specified, ``**kEsfParameterStorageManagerStatusPermissionDenied**`` is returned. +
        For details on temporary storage areas, refer to ``**PlStorageSwitchData**`` in <<#_References, the PL Storage specification>>. +
    ** If the target handle or data is already in an update state, ``**kEsfParameterStorageManagerStatusFailedPrecondition**`` is returned. +
    ** If a handle in update state is released using ``**EsfParameterStorageManagerClose**``, the temporary data is discarded (same as ``**EsfParameterStorageManagerUpdateCancel**``). +
    ** Data targeted by ``**EsfParameterStorageManagerInvokeFactoryReset**`` refers to actual data only, not temporary data. +
    ** If ``**EsfParameterStorageManagerCapabilities::cancellable**`` is 0, this API behaves as follows depending on ``**type**``: +
        *** If ``**kEsfParameterStorageManagerUpdateEmpty**`` is specified, deletes data and returns ``**kEsfParameterStorageManagerStatusOk**``. +
        *** If ``**kEsfParameterStorageManagerUpdateCopy**`` is specified, does nothing and returns ``**kEsfParameterStorageManagerStatusOk**``. +

    ** **Execution Information** +
+
[#_TableEsfParameterStorageManagerUpdateBeginContext]
.EsfParameterStorageManagerUpdateBegin Execution Information
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API

|Execution Context
|Runs in the caller's context.

|Concurrent Calls
|Allowed.

|Multithreaded Calls
|Allowed.

|Multitask Calls
|Allowed.

|Blocking
|Blocks internally. +
If Parameter Storage Manager is already running in another context, this API waits until completion. +
Times out if waiting exceeds a certain duration.

|===

** **Error Information** +
+
[#_TableFunctionEsfParameterStorageManagerUpdateBegin]
.EsfParameterStorageManagerUpdateBegin Error Information
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|One or more arguments are invalid.

* handle == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**``
* mask == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_MASK**``
* type < 0
* kEsfParameterStorageManagerUpdateTypeMax <= type
|{none}
|Specify valid arguments.

|kEsfParameterStorageManagerStatusFailedPrecondition
a|* The specified handle has already begun an update. +
  * The target ItemID is already being updated by another handle.
|{none}
|Terminate the update with ``**EsfParameterStorageManagerUpdateComplete**`` or ``**EsfParameterStorageManagerUpdateCancel**``.

|kEsfParameterStorageManagerStatusTimedOut
a|Timeout occurred during exclusive control.
|{none}
|Please retry.

|kEsfParameterStorageManagerStatusResourceExhausted
a|Insufficient resources.
|{none}
|Free up resources and retry.

|kEsfParameterStorageManagerStatusDataLoss
a|Unable to access the data storage area.
|{none}
|Recovery not possible.

|kEsfParameterStorageManagerStatusUnavailable
a|Failed to obtain temporary data storage area.
|{none}
|Please retry.

|kEsfParameterStorageManagerStatusPermissionDenied
a|The specified data does not support a temporary storage area.
|{none}
|Specify a different data ID.

|kEsfParameterStorageManagerStatusNotFound
a|A valid handle was not found.
|{none}
|Obtain a valid handle and retry.

|kEsfParameterStorageManagerStatusOutOfRange
|The number of target ItemIDs exceeds ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_UPDATE_MAX**``. +
|{none}
|Specify fewer ItemIDs than ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_UPDATE_MAX**``.

.2+|kEsfParameterStorageManagerStatusInternal
a|The ``**info**`` argument is invalid.

* info == ``**NULL**``
* +info->items_num+ == 0
* +info->items+ == ``**NULL**``
* +info->items->id+ is out of range
* +info->items->type+ is out of range
* if +info->items->id+ == ``**kEsfParameterStorageManagerItemCustom**`` +
  then +info->items->custom+ == ``**NULL**`` or a member of +info->items->custom+ is ``**NULL**``
|{none}
|Recovery not possible. Please implement a valid ``**EsfParameterStorageManagerStructInfo**``.

a|Internal processing failed.
|{none}
|Check the error details.

|===

** **Sequence Diagram** +
+
[{mermaid_block}]
----
sequenceDiagram
participant ds as Implementation Module
participant internal as Parameter Storage Manager
participant storage as Data Storage Area
participant temp as Temporary{mermaid_br}Data Storage Area

ds ->>+ internal: EsfParameterStorageManagerUpdateBegin({mermaid_br}EsfParameterStorageManagerHandle handle,{mermaid_br}EsfParameterStorageManagerMask mask,{mermaid_br}const EsfParameterStorageManagerStructInfo{asterisk} info,{mermaid_br}EsfParameterStorageManagerUpdateType type)
    {mermaid_break} Validate arguments
        internal -->> ds: kEsfParameterStorageManagerStatusInvalidArgument{mermaid_br}or{mermaid_br}kEsfParameterStorageManagerStatusInternal
    end

    {mermaid_critical} Parameter Storage Manager exclusive control section
        {mermaid_break} The specified handle or data ID is{mermaid_br}already being updated
            internal -->> ds: kEsfParameterStorageManagerStatusFailedPrecondition
        end

        internal ->>+ storage: Obtain temporary data storage area
            storage -->> temp: Allocate temporary data storage area
        storage -->>- internal: Temporary data storage area
        {mermaid_break} The specified data ID does not{mermaid_br}support temporary storage
            internal -->> ds: kEsfParameterStorageManagerStatusPermissionDenied
        end

        internal ->>+ temp: Delete data
        temp -->>- internal: Deletion result

        opt type == kEsfParameterStorageManagerUpdateCopy
            internal ->>+ storage: Read data
            storage -->>- internal: Data
            internal ->>+ temp: Write data
            temp -->>- internal: Write result
        end
    end
internal -->>- ds: EsfParameterStorageManagerStatus
----

[#_EsfParameterStorageManagerUpdateComplete]
==== EsfParameterStorageManagerUpdateComplete
* *Function* +
    Completes the update process for the data storage area.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerUpdateComplete(
    EsfParameterStorageManagerHandle handle);
----

* *Argument Description* +
    **``[IN] EsfParameterStorageManagerHandle handle``**::  
    The handle of the Parameter Storage Manager specified in ``**EsfParameterStorageManagerUpdateBegin**``.

* *Return Values* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values based on the result.

* *Description* +
    ** This function is used by implementation modules. +
    ** Applies the data in the temporary data storage area obtained via ``**EsfParameterStorageManagerUpdateBegin**`` to the actual data storage area. +
    ** After the successful execution of this API, it is possible to start a new update using ``**EsfParameterStorageManagerUpdateBegin**``. +
    ** If ``**EsfParameterStorageManagerCapabilities::cancellable**`` is 0, this API performs no processing and returns ``**kEsfParameterStorageManagerStatusOk**``. +

    ** **Execution Context** +
+
[#_TableEsfParameterStorageManagerUpdateCompleteContext]
.Execution Context for EsfParameterStorageManagerUpdateComplete
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API

|Execution Context
|Runs in the caller's context.

|Reentrant
|Allowed

|Callable from Multiple Threads
|Allowed

|Callable from Multiple Tasks
|Allowed

|Blocking
|This API performs blocking internally. +
If Parameter Storage Manager is already active in another context, execution waits for completion. +
If the wait time exceeds a certain threshold, a timeout response will occur.

|===

    ** **Error Information** +
+
[#_TableFunctionEsfParameterStorageManagerUpdateComplete]
.Error Information for EsfParameterStorageManagerUpdateComplete
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Argument State |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
a|Invalid argument.

* handle == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**``
|{none}
|Provide a valid argument.

|kEsfParameterStorageManagerStatusFailedPrecondition
a|Update has not been started.
|{none}
|Start the update using ``**EsfParameterStorageManagerUpdateBegin**``.

|kEsfParameterStorageManagerStatusTimedOut
a|Timeout occurred during exclusive control.
|{none}
|Please retry.

|kEsfParameterStorageManagerStatusResourceExhausted
a|Insufficient resources.
|{none}
|Free up resources and retry.

|kEsfParameterStorageManagerStatusDataLoss
a|Unable to access the data storage area.
|{none}
|Recovery is not possible.

|kEsfParameterStorageManagerStatusUnavailable
a|Failed to allocate temporary data storage.
|{none}
|Please retry.

|kEsfParameterStorageManagerStatusInternal
a|Internal processing failed.
|{none}
|Check the error details.

|===

** **Sequence Diagram** +
+
[{mermaid_block}]
----
sequenceDiagram
participant ds as Implementation Module
participant internal as Parameter Storage Manager
participant storage as Data Storage Area
participant temp as Temporary{mermaid_br}Data Storage Area

ds ->>+ internal: EsfParameterStorageManagerUpdateComplete({mermaid_br}EsfParameterStorageManagerHandle handle)
    {mermaid_break} Argument validation
        internal -->> ds: kEsfParameterStorageManagerStatusInvalidArgument
    end

    {mermaid_critical} Parameter Storage Manager exclusive control block
        {mermaid_break} The specified handle has not started an update
            internal -->> ds: kEsfParameterStorageManagerStatusFailedPrecondition
        end

        internal ->>+ storage: Allocate temporary data storage area
            storage ->>+ temp: Swap temporary and{mermaid_br}actual data storage areas
            temp -->>- storage: Swap result
        storage -->>- internal: Swap result
    end
internal -->>- ds: EsfParameterStorageManagerStatus
----

[#_EsfParameterStorageManagerUpdateCancel]
==== EsfParameterStorageManagerUpdateCancel
* *Function* +
    Cancels the update of the data storage area.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerUpdateCancel(
    EsfParameterStorageManagerHandle handle);
----

* *Argument Description* +
    **``[IN] EsfParameterStorageManagerHandle handle``**::  
    The Parameter Storage Manager handle specified in ``**EsfParameterStorageManagerUpdateBegin**``.

* *Return Value* +
    One of the values from <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> is returned depending on the result.

* *Description* +
    ** This function is intended for use by implementation modules. +
    ** Discards the temporary data storage obtained by ``**EsfParameterStorageManagerUpdateBegin**`` without applying it to the actual data storage. +
    ** After a successful call to this API, updates can be started again with ``**EsfParameterStorageManagerUpdateBegin**``. +
    ** If ``**EsfParameterStorageManagerCapabilities::cancellable**`` is 0, this API performs no operation and returns ``**kEsfParameterStorageManagerStatusOk**``. +

    ** **Execution Context** +
+
[#_TableEsfParameterStorageManagerUpdateCancelContext]
.Execution Context of EsfParameterStorageManagerUpdateCancel
[width="100%", options="header"]
|===
|Execution Context |Description

|API Type
|Synchronous API.

|Execution Context
|Runs in the caller's context.

|Concurrent Invocation
|Allowed.

|Multi-threaded Invocation
|Allowed.

|Multi-task Invocation
|Allowed.

|Blocking
|Blocks internally. +
If Parameter Storage Manager is already running in another context, it waits until completion before executing. +
Returns timeout if waiting exceeds a certain period.

|===

    ** **Error Information** +
+
[#_TableFunctionEsfParameterStorageManagerUpdateCancel]
.Error Information of EsfParameterStorageManagerUpdateCancel
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Argument Status |Recovery Method

|kEsfParameterStorageManagerStatusInvalidArgument
    a|The argument is invalid.

        * handle == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_HANDLE**``
    |{none}
    |Specify a valid argument.

|kEsfParameterStorageManagerStatusFailedPrecondition
    a|Update has not been started.
    |{none}
    |Call ``**EsfParameterStorageManagerUpdateBegin**`` to start the update.

|kEsfParameterStorageManagerStatusTimedOut
    a|Timeout occurred during exclusive control.
    |{none}
    |Retry the operation.

|kEsfParameterStorageManagerStatusResourceExhausted
    a|Resources were insufficient.
    |{none}
    |Free up resources and retry.

|kEsfParameterStorageManagerStatusDataLoss
    a|Access to the data storage area failed.
    |{none}
    |Recovery is not possible.

|kEsfParameterStorageManagerStatusUnavailable
    a|Failed to discard the temporary data storage.
    |{none}
    |Retry the operation.

.1+|kEsfParameterStorageManagerStatusInternal
    a|Internal processing failed.
    |{none}
    |Check the error details.

|===

** **Sequence Diagram** +
+
[{mermaid_block}]
----
sequenceDiagram
participant ds as Implementation Module
participant internal as Parameter Storage Manager
participant storage as Data Storage Area
participant temp as Temporary{mermaid_br}Data Storage Area

ds ->>+ internal: EsfParameterStorageManagerUpdateCancel({mermaid_br}EsfParameterStorageManagerHandle handle)
    {mermaid_break} Argument validation
        internal -->> ds: kEsfParameterStorageManagerStatusInvalidArgument
    end

    {mermaid_critical} Parameter Storage Manager exclusive control block
        {mermaid_break} The specified handle has not started the update process
            internal -->> ds: kEsfParameterStorageManagerStatusFailedPrecondition
        end

        internal ->>+ storage: Discard temporary data storage area
            storage -x temp: Discard temporary data storage area
        storage -->>- internal: Result of discard operation
    end
internal -->>- ds: EsfParameterStorageManagerStatus
----

[#_EsfParameterStorageManagerIsDataEmpty]
==== EsfParameterStorageManagerIsDataEmpty
* *Function* +
    Determines whether data is stored in the specified member of the data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
bool EsfParameterStorageManagerIsDataEmpty(
    EsfParameterStorageManagerData data,
    const EsfParameterStorageManagerStructInfo{asterisk} info,
    size_t index);
----

* *Argument Description* +
    **``[IN] EsfParameterStorageManagerData data``**::  
    The data structure.

    **``[IN] const EsfParameterStorageManagerStructInfo{asterisk} info``**::  
    Access information for the structure.

    **``[IN] size_t index``**::  
    Index of the target data member. Specify a value less than ``**++info->items_num++**``.

* *Return Value* +
    Returns ``**true**`` if the specified data member is empty. +
    Returns ``**false**`` if the data is present or if arguments are invalid.

* *Description* +
    ** This function is used by the implementation module. +
    ** It processes the member specified by ``**index**`` from the structure described by ``**info**``. +
    ** Returns ``**true**`` if the ``**size**`` of the target member is 0. +
        If the data type includes an ``**offset**`` member, returns ``**true**`` only when ``**offset**`` is also 0. +
        For string types, returns ``**true**`` if the first character of the member is ``**'\0'**``. +
    ** Returns ``**false**`` if the arguments are invalid.

    ** **Execution Information** +
+
[#_TableEsfParameterStorageManagerIsDataEmptyContext]
.Execution Information for EsfParameterStorageManagerIsDataEmpty
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Operates in the caller's context.

|Reentrant Call
|Allowed.

|Multi-threaded Access
|Allowed.

|Multi-task Access
|Allowed.

|Blocking
|Does not block internally.
|===

    ** **Error Information** +
+
[#_TableEsfParameterStorageManagerIsDataEmptyError]
.Error Information for EsfParameterStorageManagerIsDataEmpty
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

.2+|false
    a|Invalid argument values.

        * data == ``**ESF_PARAMETER_STORAGE_MANAGER_INVALID_DATA**``
        * info == ``**NULL**``
        * ++info->items_num <= index++
    |{none}
    |Specify valid arguments.

    a|The argument ``**info**`` is invalid.

        * +info->items_num+ == 0
        * +info->items+ == ``**NULL**``
        * +info->items->id+ is out of range
        * +info->items->type+ is out of range
        * If +info->items->id+ == ``**kEsfParameterStorageManagerItemCustom**``: +
            +info->items->custom+ == ``**NULL**`` or any member of +info->items->custom+ is ``**NULL**``
    |{none}
    |Cannot be recovered. Implement a valid ``**EsfParameterStorageManagerStructInfo**``.
|===

[#_EsfParameterStorageManagerGetCapabilities]
==== EsfParameterStorageManagerGetCapabilities
* *Function* +
    Retrieves information about the capabilities supported by the Parameter Storage Manager.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerGetCapabilities(
    EsfParameterStorageManagerCapabilities{asterisk} capabilities);
----

* *Argument Description* +
    **``[OUT] EsfParameterStorageManagerCapabilities{asterisk} capabilities``**::  
    A structure to store the information about the capabilities supported by the Parameter Storage Manager.

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the result of execution.

* *Description* +
    ** Retrieves information about the capabilities currently available. +
       The available features may vary depending on the device.

    ** **Execution Information** +
+
[#_TableEsfParameterStorageManagerGetCapabilitiesContext]
.Execution Information for EsfParameterStorageManagerGetCapabilities
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Runs in the caller's context.

|Reentrant Call
|Allowed.

|Multi-threaded Access
|Allowed.

|Multi-task Access
|Allowed.

|Blocking
|Does not block internally.
|===

    ** **Error Information** +
+
[#_TableEsfParameterStorageManagerGetCapabilitiesError]
.Error Information for EsfParameterStorageManagerGetCapabilities
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

.1+|kEsfParameterStorageManagerStatusInvalidArgument
    a|The argument is invalid.

        * capabilities == ``**NULL**``
    |{none}
    |Specify a valid argument.

.1+|kEsfParameterStorageManagerStatusInternal
    a|Internal processing failed.
    |{none}
    |Check the error log for details.
|===

[#_EsfParameterStorageManagerGetItemCapabilities]
==== EsfParameterStorageManagerGetItemCapabilities
* *Function* +
    Retrieves capability information for the data managed by the Parameter Storage Manager.

* *Format* +
+
[source, c, subs="+attributes"]
----
EsfParameterStorageManagerStatus EsfParameterStorageManagerGetItemCapabilities(
    EsfParameterStorageManagerItemID id,
    EsfParameterStorageManagerItemCapabilities{asterisk} capabilities);
----

* *Argument Description* +
    **``[IN] EsfParameterStorageManagerItemID id``**::  
    The data ID for which capability information is to be retrieved.

    **``[OUT] EsfParameterStorageManagerItemCapabilities{asterisk} capabilities``**::  
    A structure to store the capability information of the data managed by the Parameter Storage Manager.

* *Return Value* +
    Returns one of the <<#_Table_EsfParameterStorageManagerStatus, EsfParameterStorageManagerStatus>> values depending on the result of execution.

* *Description* +
    ** Retrieves capability information for the data. +
       The available features vary depending on the device and data ID.

    ** **Execution Information** +
+
[#_TableEsfParameterStorageManagerGetItemCapabilitiesContext]
.Execution Information for EsfParameterStorageManagerGetItemCapabilities
[width="100%", options="header"]
|===
|Execution Info |Description

|API Type
|Synchronous API.

|Execution Context
|Runs in the caller's context.

|Reentrant Call
|Allowed.

|Multi-threaded Access
|Allowed.

|Multi-task Access
|Allowed.

|Blocking
|Does not block internally.
|===

    ** **Error Information** +
+
[#_TableEsfParameterStorageManagerGetItemCapabilitiesError]
.Error Information for EsfParameterStorageManagerGetItemCapabilities
[width="100%", options="header"]
|===
|Return Value |Error Condition |OUT Parameter State |Recovery Method

.1+|kEsfParameterStorageManagerStatusInvalidArgument
    a|The argument is invalid.

        * id == ``**kEsfParameterStorageManagerItemCustom**``
        * id == ``**kEsfParameterStorageManagerItemMax**``
        * capabilities == ``**NULL**``
    |{none}
    |Specify valid arguments.

|kEsfParameterStorageManagerStatusDataLoss
    a|Failed to access the data storage area.
    |{none}
    |Cannot be recovered.

|kEsfParameterStorageManagerStatusUnavailable
    a|Unable to access the data storage area.
    |{none}
    |Please retry.

.1+|kEsfParameterStorageManagerStatusInternal
    a|Internal processing failed.
    |{none}
    |Check the error log.
|===

[#_ESF_PARAMETER_STORAGE_MANAGER_MEMBER_SIZEOF]
==== ESF_PARAMETER_STORAGE_MANAGER_MEMBER_SIZEOF
* *Function* +
    Retrieves the size [bytes] of a member of a structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_MEMBER_SIZEOF(type, member) \
    (sizeof(((type *)NULL)->member))
----

* *Argument Description* +
    **``[IN] type``**::  
    The name of the structure type.

    **``[IN] member``**::  
    The name of the structure member.

* *Return Value* +
    Returns the size [bytes] of the structure member as a value of type ``**size_t**``.

* *Description* +
    ** This is a helper macro function used by other macro functions. +

    ** **Behavior** +
        Retrieves the size of a structure member using the ``**sizeof**`` operator. +
        Unlike the ``**sizeof**`` operator, specify a type name for ``**type**``, not a variable name. +

[#_ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_SIZEOF]
==== ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_SIZEOF
* *Function* +
    Retrieves the size [bytes] of a <<#_EsfParameterStorageManagerBinaryArray, binary array type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_SIZEOF(type, member) \
    ESF_PARAMETER_STORAGE_MANAGER_MEMBER_SIZEOF(type, member.data)
----

* *Argument Description* +
    **``[IN] type``**::  
    The name of the data structure type.

    **``[IN] member``**::  
    The name of the member of <<#_EsfParameterStorageManagerBinaryArray, binary array type>>.

* *Return Value* +
    Returns the size [bytes] of the structure member as a value of type ``**size_t**``.

* *Description* +
    ** This macro function is used by implementation modules. +

    ** **Behavior** +
        Retrieves the size of a <<#_EsfParameterStorageManagerBinaryArray, binary array type>> using the ``**sizeof**`` operator. +
        Unlike the ``**sizeof**`` operator, specify a type name for ``**type**``, not a variable name. +

[#_ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_SIZEOF]
==== ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_SIZEOF
* *Function* +
    Retrieves the size [bytes] of a <<#_EsfParameterStorageManagerOffsetBinaryArray, offset binary array type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_SIZEOF(type, member) \
    ESF_PARAMETER_STORAGE_MANAGER_MEMBER_SIZEOF(type, member.data)
----

* *Argument Description* +
    **``[IN] type``**::  
    The name of the data structure type.

    **``[IN] member``**::  
    The name of the member of <<#_EsfParameterStorageManagerOffsetBinaryArray, offset binary array type>>.

* *Return Value* +
    Returns the size [bytes] of the structure member as a value of type ``**size_t**``.

* *Description* +
    ** This macro function is used by implementation modules. +

    ** **Behavior** +
        Retrieves the size of a <<#_EsfParameterStorageManagerOffsetBinaryArray, offset binary array type>> using the ``**sizeof**`` operator. +
        Unlike the ``**sizeof**`` operator, specify a type name for ``**type**``, not a variable name. +

[#_ESF_PARAMETER_STORAGE_MANAGER_STRING_SIZEOF]
==== ESF_PARAMETER_STORAGE_MANAGER_STRING_SIZEOF
* *Function* +
    Retrieves the size [bytes] of a <<#_String, string type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_STRING_SIZEOF(type, member) \
    ESF_PARAMETER_STORAGE_MANAGER_MEMBER_SIZEOF(type, member)
----

* *Argument Description* +
    **``[IN] type``**::  
    The name of the data structure type.

    **``[IN] member``**::  
    The name of the member of <<#_String, string type>>.

* *Return Value* +
    Returns the size [bytes] of the structure member as a value of type ``**size_t**``.

* *Description* +
    ** This macro function is used by implementation modules. +

    ** **Behavior** +
        Retrieves the size of a <<#_String, string type>> using the ``**sizeof**`` operator. +
        Unlike the ``**sizeof**`` operator, specify a type name for ``**type**``, not a variable name. +

[#_ESF_PARAMETER_STORAGE_MANAGER_RAW_SIZEOF]
==== ESF_PARAMETER_STORAGE_MANAGER_RAW_SIZEOF
* *Function* +
    Retrieves the size [bytes] of a <<#_Rawdata, raw data type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_RAW_SIZEOF(type, tail_member) \
  offsetof(type, tail_member) +                                     \
      ESF_PARAMETER_STORAGE_MANAGER_MEMBER_SIZEOF(type, tail_member)
----

* *Argument Description* +
    **``[IN] type``**::  
    The name of the type for the member treated as <<#_Rawdata, raw data type>>.

    **``[IN] tail_member``**::  
    The name of the trailing member of the <<#_Rawdata, raw data type>>.

* *Return Value* +
    Returns the size [bytes] of the structure member as a value of type ``**size_t**``.

* *Description* +
    ** This macro function is used by implementation modules. +
    ** Unlike other SIZEOF macros, the argument specification differs. +
        For usage examples, refer to <<#_UsageExamplesofDataStorageAccessFunctions, Usage Examples of Data Storage Access Functions>>. +

    ** **Behavior** +
        Retrieves the size of a <<#_Rawdata, raw data type>> using both ``**offsetof**`` and ``**sizeof**`` operators. +
        Unlike the ``**sizeof**`` operator, specify a type name for ``**type**``, not a variable name. +

[#_ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED]
==== ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED
* *Function* +
    Determines whether a specific member of a mask structure is enabled.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED(type, member, obj) \
    ((obj) != ESF_PARAMETER_STORAGE_MANAGER_INVALID_MASK) && \
    (((const type *)(obj))->member)
----

* *Argument Description* +
    **``[IN] type``**::  
    The type name of the mask structure.

    **``[IN] member``**::  
    The name of the member to check for mask enablement.

    **``[IN] EsfParameterStorageManagerMask obj``**::  
    The mask structure (<<#_EsfParameterStorageManagerMask>>).

* *Return Value* +
    Returns a ``**bool**`` value indicating whether the mask is enabled. +
    If true, the member is considered enabled.

* *Description* +
    ** This macro function is used by the implementation module. +

    ** **Behavior** +
        Determines whether the specified member of the mask structure is enabled. +
        Returns ``**false**`` if the mask structure is invalid (ESF_PARAMETER_STORAGE_MANAGER_INVALID_MASK). +
        If valid, returns the boolean value of the specified ``**member**``. +

[#_ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_IS_EMPTY]
==== ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_IS_EMPTY
* *Function* +
    Determines whether data is stored in a <<#_EsfParameterStorageManagerBinaryArray, binary array type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_IS_EMPTY(obj) \
  ((obj) != NULL && (obj)->size == 0)
----

* *Argument Description* +
    **``[IN] const EsfParameterStorageManagerBinaryArray{asterisk} obj``**::  
    A pointer to a <<#_EsfParameterStorageManagerBinaryArray, binary array type>> member.

* *Return Value* +
    Returns ``**true**`` if the data is not stored. +
    Returns ``**false**`` if data is stored or the argument is invalid.

* *Description* +
    ** This macro function is used by the implementation module. +

    ** **Behavior** +
        Checks whether the binary array type member contains data. +
        Returns ``**true**`` if the member is empty. +
        Returns ``**false**`` if data is stored or the argument is invalid. +

[#_ESF_PARAMETER_STORAGE_MANAGER_BINARY_POINTER_IS_EMPTY]
==== ESF_PARAMETER_STORAGE_MANAGER_BINARY_POINTER_IS_EMPTY
* *Function* +
    Determines whether data is stored in a <<#_EsfParameterStorageManagerBinaryArray, binary pointer type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_BINARY_POINTER_IS_EMPTY(obj) \
  ((obj) != NULL && (obj)->data != NULL && (obj)->size == 0)
----

* *Argument Description* +
    **``[IN] const EsfParameterStorageManagerBinary{asterisk} obj``**::  
    A pointer to a <<#_EsfParameterStorageManagerBinaryArray, binary pointer type>> member.

* *Return Value* +
    Returns ``**true**`` if the data is not stored. +
    Returns ``**false**`` if data is stored or the argument is invalid.

* *Description* +
    ** This macro function is used by the implementation module. +

    ** **Behavior** +
        Checks whether the binary pointer type member contains data. +
        Returns ``**true**`` if the member is empty. +
        Returns ``**false**`` if data is stored or the argument is invalid. +

[#_ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_IS_EMPTY]
==== ESF_PARAMETER_STORAGE_MANAGER_OFFSET_ARRAY_IS_EMPTY
* *Function* +
    Determines whether data is stored in a <<#_EsfParameterStorageManagerOffsetBinaryArray, offset binary array type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_OFFSET_BINARY_ARRAY_IS_EMPTY(obj) \
  ((obj) != NULL && (obj)->offset == 0 && (obj)->size == 0)
----

* *Argument Description* +
    **``[IN] const EsfParameterStorageManagerOffsetBinaryArray{asterisk} obj``**::  
    A pointer to a <<#_EsfParameterStorageManagerOffsetBinaryArray, offset binary array type>> member.

* *Return Value* +
    Returns ``**true**`` if the data is not stored. +
    Returns ``**false**`` if data is stored or the argument is invalid.

* *Description* +
    ** This macro function is used by the implementation module. +

    ** **Behavior** +
        Checks whether the offset binary array type member contains data. +
        Returns ``**true**`` if the member is empty. +
        Returns ``**false**`` if data is stored or the argument is invalid. +

[#_ESF_PARAMETER_STORAGE_MANAGER_OFFSET_POINTER_IS_EMPTY]
==== ESF_PARAMETER_STORAGE_MANAGER_OFFSET_POINTER_IS_EMPTY
* *Function* +
    Determines whether data is stored in a <<#_EsfParameterStorageManagerOffsetBinaryArray, offset binary pointer type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_OFFSET_BINARY_POINTER_IS_EMPTY(obj) \
  ((obj) != NULL && (obj)->data != NULL && (obj)->offset == 0 &&          \
   (obj)->size == 0)
----

* *Argument Description* +
    **``[IN] const EsfParameterStorageManagerOffsetBinary{asterisk} obj``**::  
    A pointer to a <<#_EsfParameterStorageManagerOffsetBinaryArray, offset binary pointer type>> member.

* *Return Value* +
    Returns ``**true**`` if the data is not stored. +
    Returns ``**false**`` if data is stored or the argument is invalid.

* *Description* +
    ** This macro function is used by the implementation module. +

    ** **Behavior** +
        Checks whether the offset binary pointer type member contains data. +
        Returns ``**true**`` if the member is empty. +
        Returns ``**false**`` if data is stored or the argument is invalid. +

[#_ESF_PARAMETER_STORAGE_MANAGER_STRING_IS_EMPTY]
==== ESF_PARAMETER_STORAGE_MANAGER_STRING_IS_EMPTY
* *Function* +
    Determines whether data is stored in a <<#_String, string type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_STRING_IS_EMPTY(obj) \
  ((obj) != NULL && (obj)[0] == '\0')
----

* *Argument Description* +
    **``[IN] const char{asterisk} obj``**::  
    A pointer to a <<#_String, string type>> member.

* *Return Value* +
    Returns ``**true**`` if the data is not stored. +
    Returns ``**false**`` if data is stored or the argument is invalid.

* *Description* +
    ** This macro function is used by the implementation module. +

    ** **Behavior** +
        Checks whether the string type member contains data. +
        Returns ``**true**`` if the string is empty. +
        Returns ``**false**`` if data is stored or the argument is invalid. +

[#_ESF_PARAMETER_STORAGE_MANAGER_RAW_IS_EMPTY]
==== ESF_PARAMETER_STORAGE_MANAGER_RAW_IS_EMPTY
* *Function* +
    Determines whether data is stored in a <<#_Rawdata, raw data type>> member of a data structure.

* *Format* +
+
[source, c, subs="+attributes"]
----
#define ESF_PARAMETER_STORAGE_MANAGER_RAW_IS_EMPTY(obj) \
  ((obj) != NULL && (obj)->size == 0)
----

* *Argument Description* +
    **``[IN] const EsfParameterStorageManagerRaw{asterisk} obj``**::  
    A pointer to a <<#_Rawdata, raw data type>> member.

* *Return Value* +
    Returns ``**true**`` if the data is not stored. +
    Returns ``**false**`` if data is stored or the argument is invalid.

* *Description* +
    ** This macro function is used by the implementation module. +

    ** **Behavior** +
        Checks whether the <<#_Rawdata, raw data type>> member contains data. +
        Returns ``**true**`` if no data is stored. +
        Returns ``**false**`` if data is stored or the argument is invalid. +

<<<

[#_APIUsageExamples]
== API Usage Examples

This section provides usage examples for each API.

[#_UsageExamples_InitializationandDeinitialization]
.Initialization and Deinitialization
[{mermaid_block}]
----
sequenceDiagram
participant main as ESF main
participant ds as Parameter Storage Manager
participant modules as Implementation Module

Note left of main: Initialization of Parameter Storage Manager
main ->>+ ds: EsfParameterStorageManagerInit(void)
ds -->>- main: kEsfParameterStorageManagerStatusOk

rect rgba(0, 0, 255, .1)
    Note over main,modules: Parameter Storage Manager API calls available

    modules ->>+ ds : EsfParameterStorageManagerRegisterFactoryReset({mermaid_br}func,{mermaid_br}private_data, &factory_reset_id)
    ds -->>- modules: EsfParameterStorageManagerStatus
end

Note left of main: Deinitialization of Parameter Storage Manager
rect rgba(0, 0, 255, .1)
    Note over main,modules: Parameter Storage Manager API calls available

    modules ->>+ ds : EsfParameterStorageManagerUnregisterFactoryReset({mermaid_br}factory_reset_id)
    ds -->>- modules: EsfParameterStorageManagerStatus
end

main ->>+ ds: EsfParameterStorageManagerDeinit(void)
    Note over ds: Resource release{mermaid_br}State transition INIT -> UNINIT
ds -->>- main: kEsfParameterStorageManagerStatusOk
----

[#_UsageExamples_DataAccessProcessing]
.Data Access Processing
[{mermaid_block}]
----
sequenceDiagram
participant modules as Implementation Module
participant ds as Parameter Storage Manager
participant struct as Data Structure{mermaid_br}Mask Structure
participant storage as Data Storage Area

Note left of modules: Acquire handle for Parameter Storage Manager
modules ->>+ ds: EsfParameterStorageManagerOpen(&handle)
ds -->>- modules: kEsfParameterStorageManagerStatusOk

rect rgba(0, 0, 255, .1)
    Note over modules: Save, Load, Clear, and GetSize API calls available

    Note over modules: Configure mask structure
    modules ->>+ struct: Enable mask
    struct -->>- modules: -

    Note over modules: Initialize data structure
    modules ->>+ struct: memset(&data, 0, sizeof(data))
    struct -->>- modules: -

    Note over modules: Call Save, Load, Clear, or GetSize API
    modules ->>+ ds : EsfParameterStorageManagerLoad({mermaid_br}handle,{mermaid_br}&mask,{mermaid_br}&data, &info, NULL)
        ds ->>+ struct: Check mask
        struct -->>- ds: enabled: bool
        opt enabled == true
            ds ->>+ storage: Retrieve data
            storage -->>- ds: Retrieved data
            ds ->>+ struct: Store data
            struct -->>- ds: Result of storing data
        end
    ds -->>- modules: EsfParameterStorageManagerStatus
end

Note left of modules: Release handle for Parameter Storage Manager
modules ->>+ ds: EsfParameterStorageManagerClose(handle)
ds -->>- modules: kEsfParameterStorageManagerStatusOk
----

[#_UsageExamples_FactoryResetProcessing]
.FactoryReset Processing
[{mermaid_block}]
----
sequenceDiagram
participant main as ESF Main
participant modules as Implementation Module
participant ds as Parameter Storage Manager
participant storage as Data Storage Area

Note over modules: Register Factory Reset function
modules ->>+ ds: EsfParameterStorageManagerRegisterFactoryReset({mermaid_br}&func,{mermaid_br}private_data,{mermaid_br}&factory_reset_id)
ds -->>- modules: EsfParameterStorageManagerStatus

main ->>+ ds : EsfParameterStorageManagerInvokeFactoryReset()
    Note over ds: Restore target data to factory default state
    loop i < kEsfParameterStorageManagerItemMax
        opt EsfParameterStorageManagerStorageAdapterConvertItemIDToFactoryResetRequired(i)
            ds ->>+ storage: Restore data to factory default
            storage -->>- ds: EsfParameterStorageManagerStatus
        end
    end

    ds ->>+ modules: Call registered FactoryReset function
        modules ->>+ storage: Restore to factory default
        storage -->>- modules: -
    modules -->>- ds: EsfParameterStorageManagerStatus
ds -->>- main: EsfParameterStorageManagerStatus
----

<<<

[#_DataStorageAccessFunctionSpecification]
== Data Storage Access Function Specification

[#_DataStructures]
=== Data Structure
A data structure is a struct that groups related data together. +
Define it as a unit to be accessed by a single API. +
It is used for storing data. +

==== Definition Rules
* Naming +
    ** Member names must follow the coding rules. +
        However, do not change the member names of <<#_Binarydata, Binary Data>> and <<#_OffsetSpecifiedBinaryData, Offset Binary Data>>.

* Size +
    ** The size of a single member must not exceed the value of ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_BUFFER_LENGTH**``. +
        If the member size exceeds ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_BUFFER_LENGTH**``, use the pointer type of offset binary data. +
        If only a getter function is defined, it is acceptable to exceed ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_BUFFER_LENGTH**``. +
    ** There is no limitation on the total size (sum of member sizes) or the number of members in a single struct, +
       but internal processing of Parameter Storage Manager uses Large Heap or standard heap memory depending on the data size and number of members. +
       Therefore, ensure the total usage does not exceed the available memory size on the target device. +
    ** To retrieve data, the member size must be equal to or greater than the data size. +
        If the member size is smaller than the data size, ``**kEsfParameterStorageManagerStatusUnavailable**`` will be returned. +
        Define the member size to be larger than the expected data size.

* Member Type +
    ** There are no restrictions on the type specification of <<#_Rawdata, Raw Data>>. You can specify a struct as raw data. +
    ** <<#_Binarydata, Binary Data>>, <<#_OffsetSpecifiedBinaryData, Offset Binary Data>>, and <<#_String, String>> members can be treated as data members. +
    ** <<#_Rawdata, Raw Data>> members can also be treated as data members. +
        However, if the raw data is a struct, its individual members cannot be treated as data members. +
    ** You may nest custom-defined structs. +
        However, if the struct is not treated as raw data, the entire struct cannot be treated as a data member; only its individual members can be treated as data members. +
    ** The array size of <<#_Binarydata, Binary Data>>, <<#_OffsetSpecifiedBinaryData, Offset Binary Data>>, and <<#_String, String>> must be defined by the implementation module. +
        Other attributes such as member type or declaration order must not be modified. +
        Define array size using ``**#define**``. +
    ** There are some devices and data IDs where <<#_OffsetSpecifiedBinaryData, Offset Binary Data>> cannot be used. +
        For details, refer to <<#_NotesandComponentSpecificDescriptions, Device-specific Specifications and Limitations>>. +
    ** You may define data members as arrays. +

[#_DataStructures_DataTypes]
==== Supported Data Types
The following table lists the supported data types that can be used as members of data structures.

[#_TableSupportedDataTypes]
.List of Supported Data Types
[width="100%", cols="30%,55%,15%",options="header"]
|===
|Data Type Name |Description |Section

|Binary Data
    |A structure that stores a byte array and the valid size of that array. +
    |<<#_Binarydata>>

|Offset Binary Data
    |A structure that stores a byte array and the valid size of that array. +
    Offset addressing is supported. +
    |<<#_OffsetSpecifiedBinaryData>>

|String
    |A null-terminated string (``**'\0'**``). +
    |<<#_String>>

|Raw Data
    |Binary data of unspecified data type. +
    |<<#_Rawdata>>
|===

[#_Binarydata]
==== Binary Data
A structure that holds a byte array and its valid data size.

[#_EsfParameterStorageManagerBinaryArray]
===== Array Type
A structure that holds the byte array as an array-type member. +
Each implementation module should define and use a structure specifying the size of the ``**data**`` member.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerBinaryArray {
  uint32_t size;
  uint8_t data[];
} EsfParameterStorageManagerBinaryArray;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerBinaryArray]
.Description of EsfParameterStorageManagerBinaryArray Members
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description
|size
|Data size [bytes] for the ``**data**`` member. +

* Usage for Save Operation +
    The user must set the size of the data to be saved. +
    If the specified size exceeds the size of the ``**data**`` member, ``**kEsfParameterStorageManagerStatusInvalidArgument**`` will be returned. +
    If 0 is specified, the data will be deleted. +
    Only the portion up to the specified size from the beginning of ``**data**`` will be saved. +

* Usage for Load Operation +
    The user does not need to set this value. +
    Parameter Storage Manager sets the size of the retrieved data. If the data has been deleted, 0 is set. +

|data
|Storage area for the data. +

* Usage for Save Operation +
    The user must populate the ``**data**`` member with the data to be saved. +

* Usage for Load Operation +
    The user does not need to set this value. +
    Parameter Storage Manager stores the retrieved data into the ``**data**`` member. +

|===

[#_EsfParameterStorageManagerBinary]
===== Pointer Type
A structure that holds the byte array as a pointer-type member. +
This data type is available by including ``parameter_storage_manager_common.h``. +
If you want to rename the structure type, use ``**typedef**``.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerBinary {
  uint32_t size;
  uint8_t* data;
} EsfParameterStorageManagerBinary;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerBinary]
.Description of EsfParameterStorageManagerBinary Members
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description
|size
|Data size [bytes] for the ``**data**`` member. +
Do not specify a value greater than the buffer size of the ``**data**`` member. +

* Usage for Save Operation +
    The user must set the size of the data to be saved. +
    The specified size from the beginning of ``**data**`` will be saved. +
    If 0 is specified, the data will be deleted. +

* Usage for Load Operation +
    The user must set the size of the data to be retrieved. +
    If 0 is specified, ``**kEsfParameterStorageManagerStatusInvalidArgument**`` will be returned. +
    Parameter Storage Manager sets the actual size of the retrieved data. If the data has been deleted, 0 is set. +
    If the specified size exceeds the written data size in storage, only the maximum written size will be returned. +

|data
|Storage area for the data. The user must assign a buffer to the ``**data**`` member. +

* Usage for Save Operation +
    The user must populate the buffer pointed to by the ``**data**`` member. +
    If ``**NULL**`` is specified, the data will be deleted. +

* Usage for Load Operation +
    The user must assign a buffer to the ``**data**`` member. +
    Parameter Storage Manager writes the retrieved data into the ``**data**`` member up to the size specified in the ``**size**`` member. +
    If ``**NULL**`` is specified, ``**kEsfParameterStorageManagerStatusInvalidArgument**`` will be returned. +

|===

[#_OffsetSpecifiedBinaryData]
==== Offset Binary Data
A structure that contains a byte array and its valid data size. +
This type supports specifying an offset when saving or retrieving data. +
You can check whether a data item supports offset access via <<#_DataSettingTable, Storage Destination Info>> or ``**EsfParameterStorageManagerGetItemCapabilities**``. +
Do not use this type if the data does not support offset access. +

[#_EsfParameterStorageManagerOffsetBinaryArray]
===== Array Type
A structure that holds the byte array as an array-type member. +
Each implementation module should define a structure that specifies the size of the ``**data**`` member.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerOffsetBinaryArray {
  uint32_t offset;
  uint32_t size;
  uint8_t data[];
} EsfParameterStorageManagerOffsetBinaryArray;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerOffsetBinaryArray]
.Description of EsfParameterStorageManagerOffsetBinaryArray Members
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description
|offset
|Specifies the offset in the data storage area. +

* Usage for Save Operation +
    The user must specify the offset where data should be saved. +
    If the offset exceeds the written data size in storage, ``**kEsfParameterStorageManagerStatusOutOfRange**`` is returned.

* Usage for Load Operation +
    The user must specify the offset from which data should be retrieved. +
    If the data has been deleted, Parameter Storage Manager sets 0 to the ``**offset**`` member. +
    If the offset exceeds the written data size, ``**kEsfParameterStorageManagerStatusOutOfRange**`` is returned.

|size
|The size of the ``**data**`` member in bytes. +

* Usage for Save Operation +
    The user must specify the data size to save. +
    If 0 is specified, ``**kEsfParameterStorageManagerStatusInvalidArgument**`` is returned. +
    Do not specify a value larger than the size of the ``**data**`` member. +
    Only the specified number of bytes from the start of ``**data**`` will be saved. +
    If the ``**offset**`` exceeds the written size in storage, ``**kEsfParameterStorageManagerStatusOutOfRange**`` is returned. +
    The size of offset-specified data will not be automatically shrunk. To reduce the size, delete the data first, then write again.

* Usage for Load Operation +
    The user does not need to set this value. +
    Parameter Storage Manager sets the actual size of retrieved data. If the data has been deleted, 0 is set. +
    Valid data is retrieved from the start of the ``**data**`` member up to the retrieved size. +
    If ``**offset**`` exceeds the written data size, ``**kEsfParameterStorageManagerStatusOutOfRange**`` is returned. +
    If ``**offset**`` + ``**size**`` exceeds the written size, data will be retrieved up to the maximum available written size.

|data
|Memory area to store the data. +

* Usage for Save Operation +
    The user must store the data to be saved in the ``**data**`` member. +

* Usage for Load Operation +
    The user does not need to set this value. +
    Parameter Storage Manager sets the retrieved data in the ``**data**`` member. +

|===

[#_EsfParameterStorageManagerOffsetBinary]
===== Pointer Type
A structure that holds the byte array as a pointer-type member. +
This type is available by including ``parameter_storage_manager_common.h``. +
Use ``**typedef**`` if you want to rename the structure type.

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerOffsetBinary {
  uint32_t offset;
  uint32_t size;
  uint8_t* data;
} EsfParameterStorageManagerOffsetBinary;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerOffsetBinary]
.Description of EsfParameterStorageManagerOffsetBinary Members
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description
|offset
|Specifies the offset in the data storage area. +

* Usage for Save Operation +
    The user must specify the offset where data should be saved. +
    If the offset exceeds the written data size in storage, ``**kEsfParameterStorageManagerStatusOutOfRange**`` is returned.

* Usage for Load Operation +
    The user must specify the offset from which data should be retrieved. +
    If the data has been deleted, Parameter Storage Manager sets 0 to the ``**offset**`` member. +
    If the offset exceeds the written data size, ``**kEsfParameterStorageManagerStatusOutOfRange**`` is returned.

|size
|Size of the ``**data**`` member in bytes. +
If 0 is specified, ``**kEsfParameterStorageManagerStatusInvalidArgument**`` is returned. +
Do not specify a value greater than the buffer size of ``**data**``. +

* Usage for Save Operation +
    The user must specify the data size to save. +
    Do not specify a size larger than the ``**data**`` buffer. +
    Only the specified number of bytes from the start of ``**data**`` will be saved. +
    If ``**offset**`` exceeds the written size in storage, ``**kEsfParameterStorageManagerStatusOutOfRange**`` is returned. +
    The size of offset-specified data will not be automatically shrunk. To reduce the size, delete the data first, then write again.

* Usage for Load Operation +
    The user must specify the data size to retrieve. +
    Parameter Storage Manager sets the actual size of the retrieved data. If the data has been deleted, 0 is set. +
    Data will be retrieved into ``**data**`` up to the specified size. +
    If ``**offset**`` exceeds the written size, ``**kEsfParameterStorageManagerStatusOutOfRange**`` is returned. +
    If ``**offset**`` + ``**size**`` exceeds the written size, data will be retrieved up to the maximum available written size.

|data
|Memory area to store the data. The user must assign a buffer to the ``**data**`` member. ``**NULL**`` is not allowed. +
If ``**NULL**`` is specified, ``**kEsfParameterStorageManagerStatusInvalidArgument**`` is returned. +

* Usage for Save Operation +
    The user must assign a buffer and populate it with the data to save. +
    Do not exceed the buffer size. +

* Usage for Load Operation +
    The user must assign a buffer to the ``**data**`` member. +
    Parameter Storage Manager will store the retrieved data into the ``**data**`` member. +

|===

[#_String]
==== String
A null-terminated string (``**'\0'**``) is guaranteed. +
The size of the string member should be defined individually by each implementation module. +

* *Format* +
+
[source, c, subs="+attributes"]
....
char [];
....

* *Values* +
    Define it as an array of type ``**char**``. +
    The member name should be defined individually by each implementation module. +

    ** Usage for Save Operation +
        The user must assign the data to the string member. +
        If the string is not null-terminated (``**'\0'**``), ``**kEsfParameterStorageManagerStatusOutOfRange**`` will be returned. +
        If the string length is 0, the data will be deleted. +

    ** Usage for Load Operation +
        Parameter Storage Manager sets the retrieved data into the string member. +
        Parameter Storage Manager guarantees null-termination (``**'\0'**``) for the string. +
        If the data has been deleted, a ``**'\0'**`` character will be set at the beginning of the string. +

[#_Rawdata]
==== Raw Data
Binary data of unspecified type. +
Each implementation module must define a structure with ``**uint32_t size**`` as the first member, followed by any additional members as needed. +
Parameter Storage Manager will interpret the rest of the structure as a byte array (``**uint8_t[]**``) and perform save/load operations accordingly. The ``**size**`` member itself is not saved. +
Usage of the defined structure should be described in each data structure definition. +

* *Format* +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerRaw {
  uint32_t size;
  // Additional members may follow after 'size'
  // int64_t example1;
  // struct timespec example2;
} EsfParameterStorageManagerRaw;
....

* *Values* +
+
[#_TableEsfParameterStorageManagerRaw]
.Description of EsfParameterStorageManagerRaw Members
[width="100%", cols="30%a,70%a",options="header"]
|===
|Member Name |Description
|size
|The size [bytes] of the retrieved additional member data. +

* Usage for Save Operation +
    Not used.

* Usage for Load Operation +
    The user does not need to set this value. +
    Parameter Storage Manager sets the size of the retrieved data. If the data has been deleted, 0 is set. +

|Additional Members
|The area to store the data. +

* Usage for Save Operation +
    The user must assign the data to be saved to the additional members. +
    If a member contains a pointer, the address itself will be saved as-is. +

* Usage for Load Operation +
    Parameter Storage Manager sets the retrieved data into the additional members. +

|===



[#_MaskStructure]
=== Mask Structure
A structure that contains members corresponding to the data members, defined using bit-fields or arrays of ``**uint8_t**``. +
The mask structure represents which data members need to be accessed.

* **Format** +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerMask {
  // uint8_t member_name : 1;
  // uint8_t array_member_name[array_size];
  // ...
} EsfParameterStorageManagerMask;
....

* **Description** +
    ** The name of the mask structure should be the corresponding data structure name with ``**Mask**`` appended. +
    ** Define members with the same names as the data members in the data structure. +
        If the data structure includes nested structs, the mask structure should also use nested structs accordingly. +
    ** The mask should use a 1-bit ``**uint8_t**`` bit-field for each ``**member_name**``. +
    ** If a data member is defined as an array, the corresponding mask should also be defined as an array. +
        In that case, define the mask as an array of ``**uint8_t**`` with the same member name. +
        *** A one-dimensional array of type ``**char**`` is treated as a string. Use an array mask only if it is a two-dimensional ``**char**`` array or greater. +
        *** For raw data types, even if the data member is an array, a single bit-field mask (``**uint8_t**``) may be used if the entire array is treated as one data unit. +
            If each element of the array is treated as separate data, define the mask as a ``**uint8_t**`` array. +
    ** A non-zero mask member value indicates the corresponding data should be accessed. +
        A value of 0 means the data will not be accessed. +
    ** You may define a custom mask structure format that does not follow the above rules, as long as it is compatible with <<#_EsfParameterStorageManagerItemMaskIsEnabled, EsfParameterStorageManagerItemMaskIsEnabled>>. +

[#_UsageExamplesofDataStorageAccessFunctions]
=== Usage Example of Data Storage Access Function

[#_DataStructures_ExampleDefinition]
==== Example Definition of Data Structure
* **Format** +
+
[source, c, subs="+attributes"]
....
#define EXTERNAL_PARAMETER_STORAGE_MANAGER_EXAMPLE_DATA_SIZE (64)
#define EXTERNAL_PARAMETER_STORAGE_MANAGER_EXAMPLE_STRING_SIZE (64)

typedef struct EsfParameterStorageManagerExampleBinary {
  uint32_t size;
  uint8_t data[EXTERNAL_PARAMETER_STORAGE_MANAGER_EXAMPLE_DATA_SIZE];
} EsfParameterStorageManagerExampleBinary;

typedef struct EsfParameterStorageManagerExampleOffset {
  uint32_t offset;
  uint32_t size;
  uint8_t data[EXTERNAL_PARAMETER_STORAGE_MANAGER_EXAMPLE_DATA_SIZE];
} EsfParameterStorageManagerExampleOffset;

// Structure treated as raw data
typedef struct EsfParameterStorageManagerExampleRaw {
  uint32_t size;
  int64_t data1;
  double data2;
} EsfParameterStorageManagerExampleRaw;

// Nested structure
typedef struct EsfParameterStorageManagerExampleNested {
  EsfParameterStorageManagerExampleBinary binary_nested;
  char string_nested[EXTERNAL_PARAMETER_STORAGE_MANAGER_EXAMPLE_STRING_SIZE];
} EsfParameterStorageManagerExampleNested;

typedef struct EsfParameterStorageManagerExample {
  // For array types, the implementation module should define the struct.
  EsfParameterStorageManagerExampleBinary binary;
  EsfParameterStorageManagerExampleOffset offset;

  // For pointer types, use the types defined by the Parameter Storage Manager as-is.
  EsfParameterStorageManagerBinary binary_pointer;
  EsfParameterStorageManagerOffsetBinary offset_pointer;

  // Use strings as-is.
  char string[EXTERNAL_PARAMETER_STORAGE_MANAGER_EXAMPLE_STRING_SIZE];

  // For raw data types, use a structure with uint32_t size as the first member.
  EsfParameterStorageManagerExampleRaw raw;

  // Arrays are also supported.
  EsfParameterStorageManagerExampleBinary binary_array[2];
  EsfParameterStorageManagerBinary binary_pointer_array[3];
  char string_array[4][EXTERNAL_PARAMETER_STORAGE_MANAGER_EXAMPLE_STRING_SIZE];
  EsfParameterStorageManagerExampleRaw raw_array[5];

  // Nested structure
  EsfParameterStorageManagerExampleNested nested;
} EsfParameterStorageManagerExample;
....

* **Description** +
    ``**binary**``, ``**offset**``, ``**binary_pointer**``, ``**offset_pointer**``, ``**string**``, ``**raw**``, ``**nested.binary_nested**``, and ``**nested.string_nested**`` are treated as data members. +
    ** Since ``**raw**`` is treated as <<#_Rawdata, Raw Data>>, the members of ``**EsfParameterStorageManagerExampleRaw**`` cannot be treated as data members. +
        If ``**raw**`` is not treated as raw data, then ``**data1**`` and ``**data2**`` can be used as data members. +
    ** ``**nested**`` is not treated as raw data, so the members of ``**EsfParameterStorageManagerExampleNested**`` can be treated as data members. +
    ** Whether to treat a struct as <<#_Rawdata, Raw Data>> or not is determined by the mask structure and configuration in the Parameter Storage Manager (``**EsfParameterStorageManagerMemberInfo**``). +
        For more details, refer to <<#_MaskStructure_ExampleDefinition, Example Definition of Mask Structure>>. +


[#_MaskStructure_ExampleDefinition]
==== Example Definition of Mask Structure
* **Format** +
+
[source, c, subs="+attributes"]
....
typedef struct EsfParameterStorageManagerExampleNestedMask {
  uint8_t binary_nested : 1;
  uint8_t string_nested : 1;
} EsfParameterStorageManagerExampleNestedMask;

typedef struct EsfParameterStorageManagerExampleMask {
  uint8_t binary : 1;
  uint8_t offset : 1;
  uint8_t binary_pointer : 1;
  uint8_t offset_pointer : 1;
  uint8_t string : 1;
  uint8_t raw : 1;
  uint8_t binary_array[2];
  uint8_t binary_pointer_array[3];
  uint8_t string_array[4];
  uint8_t raw_array[5];
  EsfParameterStorageManagerExampleNestedMask nested;
} EsfParameterStorageManagerExampleMask;
....

* **Description** +
    Member names must match the corresponding data members. +
    ** Since ``**nested**`` is not treated as <<#_Rawdata, raw data>>, a nested mask structure is defined. +

==== Non-Custom Behavior
By defining the mask checking functions, ``**EsfParameterStorageManagerMemberInfo**``, and ``**EsfParameterStorageManagerStructInfo**``, you can use the APIs of the Data Storage Access feature.

.Example Structure and Function Definitions
====
[source, c, subs="+attributes"]
....
// Mask checking functions
static bool ExampleBinaryMaskEnabled(
    EsfParameterStorageManagerMask mask) {
    return ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED(
        EsfParameterStorageManagerExampleMask,
        binary,
        mask);
}
static bool ExampleRawMaskEnabled(
    EsfParameterStorageManagerMask mask) {
    return ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED(
        EsfParameterStorageManagerExampleMask,
        raw,
        mask);
}
static bool ExampleNestedStringMaskEnabled(
    EsfParameterStorageManagerMask mask) {
    return ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED(
        EsfParameterStorageManagerExampleMask,
        nested.string_nested,
        mask);
}

// Array of member info structures
static const EsfParameterStorageManagerMemberInfo kExampleMembersInfo[] = {
    {
        // Data item ID (e.g., Wi-Fi SSID)
        .id = kEsfParameterStorageManagerItemIDExample0,
        // Data type (e.g., string, offset binary, etc.)
        .type = kEsfParameterStorageManagerItemTypeBinaryArray,
        // Offset from the start of the struct to the member
        .offset = offsetof(
            EsfParameterStorageManagerExample,
            binary),
        // Maximum size of the data member
        .size = ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_SIZEOF(
            EsfParameterStorageManagerExample,
            binary),
        // Function to check if the mask is enabled
        .enabled = ExampleBinaryMaskEnabled,
        // Reserved for custom behavior
        .custom = NULL,
    },
    {
        .id = kEsfParameterStorageManagerItemIDExample1,
        .type = kEsfParameterStorageManagerItemTypeRaw,
        .offset = offsetof(
            EsfParameterStorageManagerExample,
            raw),
        .size = ESF_PARAMETER_STORAGE_MANAGER_RAW_SIZEOF(
            EsfParameterStorageManagerExampleRaw,
            data2),
        .enabled = ExampleRawMaskEnabled,
        .custom = NULL,
    },
    {
        .id = kEsfParameterStorageManagerItemIDExample2,
        .type = kEsfParameterStorageManagerItemTypeString,
        .offset = offsetof(
            EsfParameterStorageManagerExample,
            nested.string_nested),
        .size = ESF_PARAMETER_STORAGE_MANAGER_STRING_SIZEOF(
            EsfParameterStorageManagerExample,
            nested.string_nested),
        .enabled = ExampleNestedStringMaskEnabled,
        .custom = NULL,
    },
    // ...
    // The remaining members must also be defined.
};

// Structure information
static const EsfParameterStorageManagerStructInfo kExampleStructInfo = {
    .items_num = sizeof(kExampleMembersInfo) / sizeof(kExampleMembersInfo[0]),
    .items = kExampleMembersInfo,
};
....
==== 

.データ保存領域アクセス機能のAPIの呼び出し例
====
[source, c, subs="+attributes"]
....
EsfParameterStorageManagerStatus EsfParameterStorageManagerSaveExample(
    EsfParameterStorageManagerHandle handle,
    const EsfParameterStorageManagerExampleMask{asterisk} mask,
    const EsfParameterStorageManagerExample{asterisk} data) {
    // Parameter Storage ManagerのAPIを呼び出す
    return EsfParameterStorageManagerSave(
        handle,
        (EsfParameterStorageManagerMask)mask,
        (EsfParameterStorageManagerData)data,
        &kExampleStructInfo,
        NULL);
}
....

====

.Example Usage of the Data Storage Access API
====
[source, c, subs="+attributes"]
....
EsfParameterStorageManagerStatus EsfParameterStorageManagerSaveExample(
    EsfParameterStorageManagerHandle handle,
    const EsfParameterStorageManagerExampleMask* mask,
    const EsfParameterStorageManagerExample* data) {
    // Call Parameter Storage Manager API
    return EsfParameterStorageManagerSave(
        handle,
        (EsfParameterStorageManagerMask)mask,
        (EsfParameterStorageManagerData)data,
        &kExampleStructInfo,
        NULL);
}
....

====

==== Custom Behavior
Use custom behavior when handling data not defined in ``**EsfParameterStorageManagerItemID**``. +
For custom behavior, define a ``**EsfParameterStorageManagerItemAccessor**`` structure. +
This structure must implement four functions: Save, Load, Clear, and Cancel.

In the following custom behavior example, a global variable named ``**raw_storage**`` is used as a substitute for the data storage region. +
To ensure that ``**EsfParameterStorageManagerExampleRaw***`` is passed to the ``**private_data**`` argument of the Save, Load, Clear, and Cancel functions, set it appropriately when calling the Parameter Storage Manager API.

.Example Implementation of Custom Behavior
====
[source, c, subs="+attributes"]
....
// Default value
static const EsfParameterStorageManagerExampleRaw kRawDefault = {
        .string = "",
        .number = 1,
};
// Data storage area (global variable)
static EsfParameterStorageManagerExampleRaw raw_storage = kRawDefault;

// Save function
static EsfParameterStorageManagerStatus ExampleRawSave(
        const void* item,
        void* private_data) {
    const EsfParameterStorageManagerExampleRaw* raw =
                (const EsfParameterStorageManagerExampleRaw*)item;
    EsfParameterStorageManagerExampleRaw* raw_backup =
                (EsfParameterStorageManagerExampleRaw*)private_data;
    // Save the current data to private_data before overwriting
    memcpy(raw_backup, raw, sizeof(*raw_backup));
    memcpy(&raw_storage, raw, sizeof(raw_storage));
    return kEsfParameterStorageManagerStatusOk;
}

// Load function
static EsfParameterStorageManagerStatus ExampleRawLoad(
        void* item,
        void* private_data) {
    (void) private_data;
    EsfParameterStorageManagerExampleRaw* raw = (EsfParameterStorageManagerExampleRaw*)item;
    memcpy(raw, &raw_storage, sizeof(*raw));
    return kEsfParameterStorageManagerStatusOk;
}

// Clear function
static EsfParameterStorageManagerStatus ExampleRawClear(
        void* private_data) {
    EsfParameterStorageManagerExampleRaw* raw_backup = 
                (EsfParameterStorageManagerExampleRaw*)private_data;
    // Save the current data to private_data before clearing
    memcpy(raw_backup, &raw_storage, sizeof(*raw_backup));
    memset(&raw_storage, 0, sizeof(raw_storage));
    return kEsfParameterStorageManagerStatusOk;
}

// Cancel function for Save/Clear
static EsfParameterStorageManagerStatus ExampleRawCancel(
        void* private_data) {
    EsfParameterStorageManagerExampleRaw* raw_backup =
                (EsfParameterStorageManagerExampleRaw*)private_data;
    // Restore the previously saved data
    memcpy(&raw_storage, raw_backup, sizeof(raw_storage));
    return kEsfParameterStorageManagerStatusOk;
}

// Mask check function
static bool ExampleRawMaskEnabled(
        EsfParameterStorageManagerMask mask) {
    return ESF_PARAMETER_STORAGE_MANAGER_MASK_IS_ENABLED(
        EsfParameterStorageManagerExampleMask,
        raw,
        mask);
}

// Structure for custom behavior
static const EsfParameterStorageManagerItemAccessor kExampleRawItemAccessor = {
    .save = ExampleRawSave,
    .load = ExampleRawLoad,
    .clear = ExampleRawClear,
    .cancel = ExampleRawCancel,
};

// Member information
static const EsfParameterStorageManagerMemberInfo kExampleMembersInfo[] = {
    {
        .id = kEsfParameterStorageManagerItemIDExample0,
        .type = kEsfParameterStorageManagerItemTypeBinaryArray,
        .offset = offsetof(EsfParameterStorageManagerExample, binary),
        .size = ESF_PARAMETER_STORAGE_MANAGER_BINARY_ARRAY_SIZEOF(EsfParameterStorageManagerExample, binary),
        .enabled = ExampleBinaryMaskEnabled,
        .custom = NULL,
    },
    {
        .id = kEsfParameterStorageManagerItemIDExample1,
        .type = kEsfParameterStorageManagerItemTypeString,
        .offset = offsetof(EsfParameterStorageManagerExample, nested.string_nested),
        .size = ESF_PARAMETER_STORAGE_MANAGER_STRING_SIZEOF(EsfParameterStorageManagerExample, nested.string_nested),
        .enabled = ExampleNestedStringMaskEnabled,
        .custom = NULL,
    },
    {
        // When using custom behavior, set the id to kEsfParameterStorageManagerItemIDCustom
        .id = kEsfParameterStorageManagerItemCustom,
        .type = kEsfParameterStorageManagerItemTypeRaw,
        .offset = offsetof(EsfParameterStorageManagerExample, raw),
        .size = ESF_PARAMETER_STORAGE_MANAGER_RAW_SIZEOF(EsfParameterStorageManagerExampleRaw, data2),
        .enabled = ExampleRawMaskEnabled,
        // Set the structure for custom behavior
        .custom = &kExampleRawItemAccessor,
    },
    // ...
    // The remaining members must also be defined
};

// Structure information
static const EsfParameterStorageManagerStructInfo kExampleStructInfo = {
    .items_num = sizeof(kExampleMembersInfo) / sizeof(kExampleMembersInfo[0]),
    .items = kExampleMembersInfo,
};
....

====

.Example Usage of the Data Storage Access API with Custom Behavior
====
[source, c, subs="+attributes"]
....
EsfParameterStorageManagerStatus EsfParameterStorageManagerSaveExample(
    EsfParameterStorageManagerHandle handle,
    const EsfParameterStorageManagerExampleMask* mask,
    const EsfParameterStorageManagerExample* data) {
    // Set raw_backup as private_data (allocate a backup area)
    EsfParameterStorageManagerExampleRaw raw_backup;
    return EsfParameterStorageManagerSave(
        handle,
        (EsfParameterStorageManagerMask)mask,
        (EsfParameterStorageManagerData)data,
        &kExampleStructInfo,
        &raw_backup);
}
....

====

==== Sharing Exclusive Control Sections
By calling <<#_EsfParameterStorageManagerLock, EsfParameterStorageManagerLock>>, you can share the exclusive control section with data storage access functions such as <<#_EsfParameterStorageManagerSave, EsfParameterStorageManagerSave>>.

.Sharing Exclusive Control Section
====
[source, c, subs="+attributes"]
....
EsfParameterStorageManagerStatus EsfParameterStorageManagerSaveExample(
    EsfParameterStorageManagerHandle handle,
    const EsfParameterStorageManagerExampleMask* mask,
    const EsfParameterStorageManagerExample* data) {

    EsfParameterStorageManagerStatus ret = EsfParameterStorageManagerLock();
    if (ret != kEsfParameterStorageManagerStatusOk) {
        return ret;
    }

    // Perform processing that should occur within the same exclusive control section as the Parameter Storage Manager API, such as for custom behavior
    EsfParameterStorageManagerExampleRaw raw_backup;
    ret = EsfParameterStorageManagerSave(
        handle,
        (EsfParameterStorageManagerMask)mask,
        (EsfParameterStorageManagerData)data,
        &kExampleStructInfo,
        &raw_backup);

    EsfParameterStorageManagerStatus unlock_ret = EsfParameterStorageManagerUnlock();
    if (unlock_ret != kEsfParameterStorageManagerStatusOk) {
        return unlock_ret;
    }
    return ret;
}
....

====

[#_NotesandComponentSpecificDescriptions]
== Notes and Component-Specific Descriptions

[#_Limitations]
=== Limitations

* Parameter Storage Manager cannot be used from WASM.
* The maximum number of handles supported by the Parameter Storage Manager is 8.

[#_NonStandardExtensions]
=== Non-Standard Extensions
This module uses the following non-standard extensions. +

[#_TableNonstandardExtensions]
[width="100%", cols="15%,50%,35%",options="header"]
|===
|Extension Name |Description |Purpose

|**``##\\__VA_ARGS__``**
|A GCC-specific non-standard extension of **``\\__VA_ARGS__``**. +
It allows macros with variable arguments to handle the case where no argument is passed.
|Used in macros for switching log output destinations.

|Flexible array member
|This is a standard feature in C (C99 and later), but a non-standard extension in C++. +
It allows the last member of a structure to be defined as an array of unspecified size. +
|Used for uniformly accessing structure member arrays of varying sizes.

|===

[#_DataSettingTable]
=== Storage Information

The data managed by Parameter Storage Manager is stored on littlefs for T5, T5_EVT, and T3R-S3. +
The table below lists the partitions and related storage information for each data item. +
For detailed definitions, refer to <<#_References, PlStorage Specification>>. +

[width="100%", cols="40%,40%,20%",options="header"]
.Mount Settings
|===
|Partition |Mount Point |Mount Type

|/dev/esp/partition/camera_data_encr
|/camera_data_encr
|littlefs

|/dev/esp/partition/camera_data_norm
|/camera_data_norm
|littlefs

|/dev/esp/partition/fa_data2
|/fa_data2
|littlefs

|===

[width="100%", cols="20%,15%,15%,10%,10%,15%,15%",options="header"]
.Data Setting
|===
|EsfParameterStorageManagerItemID | PlStorageDataId | Path | Access | Temporary Area | Restorable to Factory Defaults | Offset Usable

|kEsfParameterStorageManagerItemDpsURL
|PlStorageDataDpsURL
|/camera_data_norm/DpsURL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemCommonName
|PlStorageDataCommonName
|/camera_data_norm/CommonName
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemDpsScopeID
|PlStorageDataDpsScopeID
|/camera_data_norm/DpsScopeID
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemProjectID
|PlStorageDataProjectID
|/camera_data_norm/ProjectID
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemRegisterToken
|PlStorageDataRegisterToken
|/camera_data_norm/RegisterToken
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemWiFiSSID
|PlStorageDataWiFiSSID
|/camera_data_encr/WiFiSSID
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemWiFiPassword
|PlStorageDataWiFiPassword
|/camera_data_encr/WiFiPassword
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemWiFiEncryption
|PlStorageDataWiFiEncryption
|/camera_data_encr/WiFiEncryption
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemIPAddress
|PlStorageDataIPAddress
|/camera_data_encr/IPAddress
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemSubnetMask
|PlStorageDataSubnetMask
|/camera_data_encr/SubnetMask
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemGateway
|PlStorageDataGateway
|/camera_data_encr/Gateway
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemDNS
|PlStorageDataDNS
|/camera_data_encr/DNS
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemIPMethod
|PlStorageDataIPMethod
|/camera_data_encr/IPMethod
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemNetIfKind
|PlStorageDataNetIfKind
|/camera_data_encr/NetIfKind
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemIPv6IPAddress
|PlStorageDataIPv6IPAddress
|/camera_data_encr/IPv6IPAddress
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemIPv6SubnetMask
|PlStorageDataIPv6SubnetMask
|/camera_data_encr/IPv6SubnetMask
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemIPv6Gateway
|PlStorageDataIPv6Gateway
|/camera_data_encr/IPv6Gateway
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemIPv6DNS
|PlStorageDataIPv6DNS
|/camera_data_encr/IPv6DNS
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemWiFiApSSID
|PlStorageDataWiFiApSSID
|/camera_data_encr/WiFiApSSID
|Read/Write
|×
|Not Restorable
|×

|kEsfParameterStorageManagerItemWiFiApPassword
|PlStorageDataWiFiApPassword
|/camera_data_encr/WiFiApPassword
|Read/Write
|×
|Not Restorable
|×

|kEsfParameterStorageManagerItemWiFiApEncryption
|PlStorageDataWiFiApEncryption
|/camera_data_encr/WiFiApEncryption
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemWiFiApChannel
|PlStorageDataWiFiApChannel
|/camera_data_encr/WiFiApChannel
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemWiFiApIPAddress
|PlStorageDataWiFiApIPAddress
|/camera_data_encr/WiFiApIPAddress
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemWiFiApSubnetMask
|PlStorageDataWiFiApSubnetMask
|/camera_data_encr/WiFiApSubnetMask
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemWiFiApGateway
|PlStorageDataWiFiApGateway
|/camera_data_encr/WiFiApGateway
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemWiFiApDNS
|PlStorageDataWiFiApDNS
|/camera_data_encr/WiFiApDNS
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemProxyURL
|PlStorageDataProxyURL
|/camera_data_encr/ProxyURL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemProxyPort
|PlStorageDataProxyPort
|/camera_data_encr/ProxyPort
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemProxyUserName
|PlStorageDataProxyUserName
|/camera_data_encr/ProxyUserName
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemProxyPassword
|PlStorageDataProxyPassword
|/camera_data_encr/ProxyPassword
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemEvpHubURL
|PlStorageDataEvpHubURL
|/camera_data_encr/EvpHubURL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemEvpHubPort
|PlStorageDataEvpHubPort
|/camera_data_encr/EvpHubPort
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemEvpIotPlatform
|PlStorageDataEvpIotPlatform
|/camera_data_encr/EvpIotPlatform
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemPkiRootCerts
|PlStorageDataPkiRootCerts
|/fa_data2/PkiRootCerts
|Read Only
|×
|Not Restorable
|〇

|kEsfParameterStorageManagerItemPkiRootCertsHash
|PlStorageDataPkiRootCertsHash
|/fa_data2/PkiRootCertsHash
|Read Only
|×
|Not Restorable
|×

|kEsfParameterStorageManagerItemEvpTls
|PlStorageDataEvpTls
|/camera_data_encr/EvpTls
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemDeviceManifest
|PlStorageDataDeviceManifest
|/fa_data2/DeviceManifest
|Read Only
|×
|Not Restorable
|〇

|kEsfParameterStorageManagerItemDebugLogLevel
|PlStorageDataDebugLogLevel
|/camera_data_encr/DebugLogLevel
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemEventLogLevel
|PlStorageDataEventLogLevel
|/camera_data_encr/EventLogLevel
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemDebugLogDestination
|PlStorageDataDebugLogDestination
|/camera_data_encr/DebugLogDestination
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemLogFilter
|PlStorageDataLogFilter
|/camera_data_encr/LogFilter
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemLogUseFlash
|PlStorageDataLogUseFlash
|/camera_data_encr/LogUseFlash
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemStorageName
|PlStorageDataStorageName
|/camera_data_encr/StorageName
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemStorageSubDirectoryPath
|PlStorageDataStorageSubDirectoryPath
|/camera_data_encr/StorageSubDirectoryPath
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemDebugLogLevel2
|PlStorageDataDebugLogLevel2
|/camera_data_encr/DebugLogLevel2
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemEventLogLevel2
|PlStorageDataEventLogLevel2
|/camera_data_encr/EventLogLevel2
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemDebugLogDestination2
|PlStorageDataDebugLogDestination2
|/camera_data_encr/DebugLogDestination2
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemLogFilter2
|PlStorageDataLogFilter2
|/camera_data_encr/LogFilter2
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemLogUseFlash2
|PlStorageDataLogUseFlash2
|/camera_data_encr/LogUseFlash2
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemStorageName2
|PlStorageDataStorageName2
|/camera_data_encr/StorageName2
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemStorageSubDirectoryPath2
|PlStorageDataStorageSubDirectoryPath2
|/camera_data_encr/StorageSubDirectoryPath2
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemDebugLogLevel3
|PlStorageDataDebugLogLevel3
|/camera_data_encr/DebugLogLevel3
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemEventLogLevel3
|PlStorageDataEventLogLevel3
|/camera_data_encr/EventLogLevel3
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemDebugLogDestination3
|PlStorageDataDebugLogDestination3
|/camera_data_encr/DebugLogDestination3
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemLogFilter3
|PlStorageDataLogFilter3
|/camera_data_encr/LogFilter3
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemLogUseFlash3
|PlStorageDataLogUseFlash3
|/camera_data_encr/LogUseFlash3
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemStorageName3
|PlStorageDataStorageName3
|/camera_data_encr/StorageName3
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemStorageSubDirectoryPath3
|PlStorageDataStorageSubDirectoryPath3
|/camera_data_encr/StorageSubDirectoryPath3
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemDebugLogLevel4
|PlStorageDataDebugLogLevel4
|/camera_data_encr/DebugLogLevel4
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemEventLogLevel4
|PlStorageDataEventLogLevel4
|/camera_data_encr/EventLogLevel4
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemDebugLogDestination4
|PlStorageDataDebugLogDestination4
|/camera_data_encr/DebugLogDestination4
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemLogFilter4
|PlStorageDataLogFilter4
|/camera_data_encr/LogFilter4
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemLogUseFlash4
|PlStorageDataLogUseFlash4
|/camera_data_encr/LogUseFlash4
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemStorageName4
|PlStorageDataStorageName4
|/camera_data_encr/StorageName4
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemStorageSubDirectoryPath4
|PlStorageDataStorageSubDirectoryPath4
|/camera_data_encr/StorageSubDirectoryPath4
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemNTPServer
|PlStorageDataNTPServer
|/camera_data_encr/NTPServer
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemNTPSyncInterval
|PlStorageDataNTPSyncInterval
|/camera_data_encr/NTPSyncInterval
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemNTPPollingTime
|PlStorageDataNTPPollingTime
|/camera_data_encr/NTPPollingTime
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemSkipModeSettings
|PlStorageDataSkipModeSettings
|/camera_data_encr/SkipModeSettings
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemLimitPacketTime
|PlStorageDataLimitPacketTime
|/camera_data_encr/LimitPacketTime
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemLimitRTCCorrectionValue
|PlStorageDataLimitRTCCorrectionValue
|/camera_data_encr/LimitRTCCorrectionValue
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemSanityLimit
|PlStorageDataSanityLimit
|/camera_data_encr/SanityLimit
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemSlewModeSettings
|PlStorageDataSlewModeSettings
|/camera_data_encr/SlewModeSettings
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemStableRTCCorrectionValue
|PlStorageDataStableRTCCorrectionValue
|/camera_data_encr/StableRTCCorrectionValue
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemStableSyncNumber
|PlStorageDataStableSyncNumber
|/camera_data_encr/StableSyncNumber
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemSystemError
|PlStorageDataSystemError
|/camera_data_encr/SystemError
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemFactoryResetFlag
|PlStorageDataFactoryResetFlag
|/camera_data_norm/FactoryResetFlag
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemRTCErrorDetection
|PlStorageDataRTCErrorDetection
|/camera_data_norm/RTCErrorDetection
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemRTCPQAParameter
|PlStorageDataRTCPQAParameter
|/camera_data_norm/RTCPQAParameter
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemBatteryInformation
|PlStorageDataBatteryInformation
|/camera_data_norm/BatteryInformation
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemRTCNetworkInformation
|PlStorageDataRTCNetworkInformation
|/camera_data_norm/RTCNetworkInformation
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemRTCConfig
|PlStorageDataRTCConfig
|/camera_data_norm/RTCConfig
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemHoursMeter
|PlStorageDataHoursMeter
|/camera_data_norm/HoursMeter
|Read/Write
|×
|Not Restorable
|×

|kEsfParameterStorageManagerItemSAS
|PlStorageDataSAS
|/camera_data_encr/SAS
|Read/Write
|×
|Restorable
|〇

|kEsfParameterStorageManagerItemQRModeStateFlag
|PlStorageDataQRModeStateFlag
|/camera_data_norm/QRModeStateFlag
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemInitialSettingFlag
|PlStorageDataInitialSettingFlag
|/camera_data_norm/InitialSettingFlag
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemHWInfoText
|PlStorageDataHWInfoText
|/fa_data2/HW_info.txt
|Read Only
|×
|Not Restorable
|×

|kEsfParameterStorageManagerItemMCULoaderVersion
|PlStorageDataMCULoaderVersion
|/camera_data_encr/MCULoaderVersion
|Read/Write
|×
|Not Restorable
|×

|kEsfParameterStorageManagerItemSensorLoaderVersion
|PlStorageDataSensorLoaderVersion
|/camera_data_encr/SensorLoaderVersion
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemMCUFWLastUpdate
|PlStorageDataMCUFWLastUpdate
|NULL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemSensorLoaderLastUpdate
|PlStorageDataSensorLoaderLastUpdate
|NULL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemSensorFWLastUpdate
|PlStorageDataSensorFWLastUpdate
|NULL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemSensorAIModelFlashAddress
|PlStorageDataSensorAIModelFlashAddress
|NULL
|Read/Write
|〇
|Not Restorable
|×

|kEsfParameterStorageManagerItemSensorLoaderFlashAddress
|PlStorageDataSensorLoaderFlashAddress
|/camera_data_encr/SensorLoaderFlashAddress
|Read/Write
|〇
|Not Restorable
|×

|kEsfParameterStorageManagerItemSensorFWFlashAddress
|PlStorageDataSensorFWFlashAddress
|/camera_data_encr/SensorFWFlashAddress
|Read/Write
|〇
|Not Restorable
|×

|kEsfParameterStorageManagerItemAIModelParameterSlot0
|PlStorageDataAIModelParameterSlot0
|/fa_data2/AIModelParameterSlot0
|Read Only
|×
|Not Restorable
|〇

|kEsfParameterStorageManagerItemAIModelParameterSlot1
|PlStorageDataAIModelParameterSlot1
|/camera_data_encr/AIModelParameterSlot1
|Read/Write
|〇
|Restorable
|〇

|kEsfParameterStorageManagerItemAIModelParameterSlot2
|PlStorageDataAIModelParameterSlot2
|/camera_data_encr/AIModelParameterSlot2
|Read/Write
|〇
|Restorable
|〇

|kEsfParameterStorageManagerItemAIModelParameterSlot3
|PlStorageDataAIModelParameterSlot3
|/camera_data_encr/AIModelParameterSlot3
|Read/Write
|〇
|Restorable
|〇

|kEsfParameterStorageManagerItemAIModelParameterSlot4
|PlStorageDataAIModelParameterSlot4
|/camera_data_encr/AIModelParameterSlot4
|Read/Write
|〇
|Restorable
|〇

|kEsfParameterStorageManagerItemAIModelParameterHashSlot1
|PlStorageDataAIModelParameterHashSlot1
|NULL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemAIModelParameterHashSlot2
|PlStorageDataAIModelParameterHashSlot2
|NULL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemAIModelParameterHashSlot3
|PlStorageDataAIModelParameterHashSlot3
|NULL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemAIModelParameterHashSlot4
|PlStorageDataAIModelParameterHashSlot4
|NULL
|Read/Write
|×
|Restorable
|×

|kEsfParameterStorageManagerItemLMTStd
|PlStorageDataLMTStd
|NULL
|Read Only
|×
|Not Restorable
|×

|kEsfParameterStorageManagerItemPreWBStd
|PlStorageDataPreWBStd
|NULL
|Read Only
|×
|Not Restorable
|×

|kEsfParameterStorageManagerItemGAMMAStd
|PlStorageDataGAMMAStd
|NULL
|Read Only
|×
|Not Restorable
|〇

|kEsfParameterStorageManagerItemLSCStd
|PlStorageDataLSCStd
|NULL
|Read Only
|×
|Not Restorable
|〇

|kEsfParameterStorageManagerItemLSCRawStd
|PlStorageDataLSCRawStd
|NULL
|Read Only
|×
|Not Restorable
|〇

|kEsfParameterStorageManagerItemDEWARPStd
|PlStorageDataDEWARPStd
|NULL
|Read Only
|×
|Not Restorable
|〇

|kEsfParameterStorageManagerItemLMTCustom
|PlStorageDataLMTCustom
|/camera_data_encr/LMTCustom
|Read/Write
|〇
|Restorable
|×

|kEsfParameterStorageManagerItemPreWBCustom
|PlStorageDataPreWBCustom
|/camera_data_encr/PreWBCustom
|Read/Write
|〇
|Restorable
|×

|kEsfParameterStorageManagerItemGAMMACustom
|PlStorageDataGAMMACustom
|/camera_data_encr/GAMMACustom
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemGAMMAAutoCustom
|PlStorageDataGAMMAAutoCustom
|/camera_data_encr/GAMMAAutoCustom
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemLSCCustom
|PlStorageDataLSCCustom
|/camera_data_encr/LSCCustom
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemLSCRawCustom
|PlStorageDataLSCRawCustom
|/camera_data_encr/LSCRawCustom
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemDEWARPCustom
|PlStorageDataDEWARPCustom
|/camera_data_encr/DEWARPCustom
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot0
|PlStorageDataAIISPAIModelParameterSlot0
|/fa_data2/AI-ISPAIModelParameterSlot0
|Read Only
|×
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemAIISPLoaderFlashAddress
|PlStorageDataAIISPLoaderFlashAddress
|/camera_data_encr/AI-ISPLoaderFlashAddress
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemAIISPFWFlashAddress
|PlStorageDataAIISPFWFlashAddress
|/camera_data_encr/AI-ISPFWFlashAddress
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot1
|PlStorageDataAIISPAIModelParameterSlot1
|/camera_data_encr/AI-ISPAIModelParameterSlot1
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot2
|PlStorageDataAIISPAIModelParameterSlot2
|/camera_data_encr/AI-ISPAIModelParameterSlot2
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot3
|PlStorageDataAIISPAIModelParameterSlot3
|/camera_data_encr/AI-ISPAIModelParameterSlot3
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemAIISPAIModelParameterSlot4
|PlStorageDataAIISPAIModelParameterSlot4
|/camera_data_encr/AI-ISPAIModelParameterSlot4
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemAIModelSlotInfo
|PlStorageDataAIModelSlotInfo
|/camera_data_encr/AIModelSlotInfo
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemAIISPAIModelSlotInfo
|PlStorageDataAIISPAIModelSlotInfo
|/camera_data_encr/AI-ISPAIModelSlotInfo
|Read/Write
|〇
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo0
|PlStorageDataFwMgrBinaryInfo0
|/camera_data_encr/FwMgrBinaryInfo0
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo1
|PlStorageDataFwMgrBinaryInfo1
|/camera_data_encr/FwMgrBinaryInfo1
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo2
|PlStorageDataFwMgrBinaryInfo2
|/camera_data_encr/FwMgrBinaryInfo2
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo3
|PlStorageDataFwMgrBinaryInfo3
|/camera_data_encr/FwMgrBinaryInfo3
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo4
|PlStorageDataFwMgrBinaryInfo4
|/camera_data_encr/FwMgrBinaryInfo4
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo5
|PlStorageDataFwMgrBinaryInfo5
|/camera_data_encr/FwMgrBinaryInfo5
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo6
|PlStorageDataFwMgrBinaryInfo6
|/camera_data_encr/FwMgrBinaryInfo6
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo7
|PlStorageDataFwMgrBinaryInfo7
|/camera_data_encr/FwMgrBinaryInfo7
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo8
|PlStorageDataFwMgrBinaryInfo8
|/camera_data_encr/FwMgrBinaryInfo8
|Read/Write
|×
|Do Not Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo9
|PlStorageDataFwMgrBinaryInfo9
|/camera_data_encr/FwMgrBinaryInfo9
|Read/Write
|×
|Do Not Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo10
|PlStorageDataFwMgrBinaryInfo10
|/camera_data_encr/FwMgrBinaryInfo10
|Read/Write
|×
|Do Not Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo11
|PlStorageDataFwMgrBinaryInfo11
|/camera_data_encr/FwMgrBinaryInfo11
|Read/Write
|×
|Do Not Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo12
|PlStorageDataFwMgrBinaryInfo12
|/camera_data_encr/FwMgrBinaryInfo12
|Read/Write
|×
|Do Not Reset
|×

|kEsfParameterStorageManagerItemFwMgrBinaryInfo13
|PlStorageDataFwMgrBinaryInfo13
|/camera_data_encr/FwMgrBinaryInfo13
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo14
|PlStorageDataFwMgrBinaryInfo14
|/camera_data_encr/FwMgrBinaryInfo14
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo15
|PlStorageDataFwMgrBinaryInfo15
|/camera_data_encr/FwMgrBinaryInfo15
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo16
|PlStorageDataFwMgrBinaryInfo16
|/camera_data_encr/FwMgrBinaryInfo16
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo17
|PlStorageDataFwMgrBinaryInfo17
|/camera_data_encr/FwMgrBinaryInfo17
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo18
|PlStorageDataFwMgrBinaryInfo18
|/camera_data_encr/FwMgrBinaryInfo18
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo19
|PlStorageDataFwMgrBinaryInfo19
|/camera_data_encr/FwMgrBinaryInfo19
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo20
|PlStorageDataFwMgrBinaryInfo20
|/camera_data_encr/FwMgrBinaryInfo20
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo21
|PlStorageDataFwMgrBinaryInfo21
|/camera_data_encr/FwMgrBinaryInfo21
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo22
|PlStorageDataFwMgrBinaryInfo22
|/camera_data_encr/FwMgrBinaryInfo22
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo23
|PlStorageDataFwMgrBinaryInfo23
|/camera_data_encr/FwMgrBinaryInfo23
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo24
|PlStorageDataFwMgrBinaryInfo24
|/camera_data_encr/FwMgrBinaryInfo24
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo25
|PlStorageDataFwMgrBinaryInfo25
|/camera_data_encr/FwMgrBinaryInfo25
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo26
|PlStorageDataFwMgrBinaryInfo26
|/camera_data_encr/FwMgrBinaryInfo26
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo27
|PlStorageDataFwMgrBinaryInfo27
|/camera_data_encr/FwMgrBinaryInfo27
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo28
|PlStorageDataFwMgrBinaryInfo28
|/camera_data_encr/FwMgrBinaryInfo28
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfo29
|PlStorageDataFwMgrBinaryInfo29
|/camera_data_encr/FwMgrBinaryInfo29
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemFwMgrBinaryInfoMcuFirmware
|PlStorageDataFwMgrBinaryInfoMcuFirmware
|/camera_data_encr/FwMgrBinaryInfoMcuFirmware
|Read/Write
|×
|Do Not Reset
|×

|kEsfParameterStorageManagerItemEsfSensorConfig
|PlStorageDataEsfSensorConfig
|/camera_data_encr/ESF-SensorConfig
|Read/Write
|〇
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemSpiBootLoader
|PlStorageDataSpiBootLoader
|NULL
|Read Only
|×
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemSpiBootFirmware
|PlStorageDataSpiBootFirmware
|NULL
|Read Only
|×
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemSpiBootAIModel
|PlStorageDataSpiBootAIModel
|NULL
|Read Only
|×
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemPreInstallAIModelInfo
|PlStorageDataPreInstallAIModelInfo
|/camera_data_encr/PreInstallAIModelInfo
|Read/Write
|〇
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemPreInstallAIModel
|PlStorageDataPreInstallAIModel
|/camera_data_encr/PreInstallAIModel
|Read/Write
|〇
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemInputTensorOnlyModel
|PlStorageDataInputTensorOnlyModel
|/camera_data_encr/InputTensorOnlyModel
|Read/Write
|〇
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemInputTensorOnlyParam
|PlStorageDataInputTensorOnlyParam
|/camera_data_encr/InputTensorOnlyParam
|Read/Write
|〇
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemExceptionFactor
|PlStorageDataExceptionFactor
|/camera_data_encr/ExceptionFactor
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemExceptionInfo
|PlStorageDataExceptionInfo
|/camera_data_norm/ExceptionInfo
|Read/Write
|×
|Reset
|〇

|kEsfParameterStorageManagerItemEvpExceptionFactor
|PlStorageDataEvpExceptionFactor
|/camera_data_encr/EvpExceptionFactor
|Read/Write
|×
|Reset
|×

|kEsfParameterStorageManagerItemCustom
|PlStorageDataCustom
|
|Read Only
|×
|Do Not Reset
|〇

|kEsfParameterStorageManagerItemMax
|PlStorageDataMax
|
|Read Only
|〇
|Do Not Reset
|〇

|===

* <<#_OffsetSpecifiedBinaryData, Offset-Specified Binary Data>> can only be used for the items in the above table where "Offset Usable" is marked as 〇. +
Whether it is available can also be checked using the ``**EsfParameterStorageManagerGetItemCapabilities**`` function and the ``**enable_offset**`` parameter.
** When "Offset Usable" is ×, the following limitations apply: +
*** For data retrieval, an error will occur if a buffer smaller than the data size is provided.
*** For data saving, an error will occur if the data size is 64 KB or larger.
** On T3P devices, data saving using offset-specified access is not supported.

<<<

[#_ListofUsedOSS]
== List of Used OSS

No OSS is used.

<<<

[#_References]
== References

* PL Storage Function Specification +
    link:../../porting_layer/parameter_storage_manager/pl_storage.adoc[docs/spec/porting_layer/parameter_storage_manager/pl_storage.adoc]

<<<

[#_revision_history]
== Revision History
[width="100%", cols="20%,80%",options="header"]
|===
|Version |Changes 

|v0.1.0
|Initial release

|v0.1.1
a|Feedback from implementation

* Unified structure names
* Added explanation for the data type (Offset Binary Data) in data structures
* Added error conditions for SsfDeviceSettingSave and SsfDeviceSettingLoad
* Removed state errors from SsfDeviceSettingInit and SsfDeviceSettingDeinit
* Refined error types for SsfDeviceSettingFactoryReset
* Unified naming format for define names

|v0.1.2
a|Adaptation to ESF restructuring

* Added cancel function
* Added data size retrieval API
* Since Device Setting I/F is no longer provided by the implementation module, removed mentions of Device Setting I/F
* Changed terminology for internal I/F of Device Setting to “data storage area access function”
* Changed document structure +
    Moved content from dedicated Device Setting internal I/F section to appropriate sections in existing template
* Added data list table for Factory Reset targets
* Added HAL Storage specification to references
* Added new data IDs:
    ** Wi-Fi AP SSID
    ** Wi-Fi AP Password
* Changed ``**SSFStatus**`` to ``**EsfParameterStorageManagerStatus**``
* Renamed:
    ** SSF → ESF
    ** Device Setting → Parameter Storage Manager
* Added initialization and termination processes for HAL Storage

|v0.1.3
a|Changes due to HAL layer restructuring

* Removed HAL initial values
    ** Modified raw data type definition +
        Changed structure so that ``**size**`` member is placed first to allow returning 0 size by Parameter Storage Manager
    ** Added description for behavior when data is deleted in ``**EsfParameterStorageManagerLoad**``
    ** Added functions/macros to determine whether data is not stored in structure
    ** Modified argument specification for ``**ESF_PARAMETER_STORAGE_MANAGER_RAW_SIZEOF**``

* Data ID updates:
    ** Added Device Manifest and EVP TLS data IDs
    ** Added AI model version and last update time data IDs (4 slots)
    ** Removed OTA partition management and application processor data IDs
    ** Excluded Slot 0 AI model data from Factory Reset targets
    ** Added version and last update time for each CameraSetup parameter
    ** Added security-related data IDs
    ** Added SystemApp-related data IDs

* Removed ``**EsfParameterStorageManagerFactoryReset**`` function

|v0.1.4
a|Integration with PL layer

* Added MCU Loader Last Update and Co-Chip-related data IDs

* Added PL layer data setting table

|v0.1.5
a|Support for saving data with size 0

Changed specification to delete data when size 0 is specified, except for offset binary data

|v0.1.6
a|Update for partition table changes

* Added, removed, and renamed data IDs
    ** Added PkiRootCertsHash
    ** Added Lsc Raw related data IDs
    ** Removed security-related data IDs
    ** Renamed Co-Chip → AI-ISP
    ** Renamed RootCA → PkiRootCerts
* Updated data setting table

|v0.1.7
a|Unification of data files

* Removed fa_data3 related data IDs
* Updated data setting table +
    ** Removed fa_data3 related data
    ** Renamed to match partition info

|v0.1.8
a|Added data using temporary storage

* Updated data setting table +
    Changed “Temporary Area” column from × to 〇 for existing data IDs that now use temporary storage +

|v0.1.9
a|T3P support

* Added ``**EsfParameterStorageManagerGetCapabilities**`` and ``**EsfParameterStorageManagerGetItemCapabilities**`` for function info retrieval +
* For devices that do not support data update cancellation, relevant APIs return ``**kEsfParameterStorageManagerStatusOk**``
* Noted that if offset is unsupported, offset binary data returns ``**kEsfParameterStorageManagerStatusInvalidArgument**``
* Added device-specific specifications/limitations to Section 7
* Added Kconfig definitions to definition list
* Updated size restrictions when defining data structures
* Added restrictions on saving/retrieving offset binary data

|v0.2.0
a|Firmware Manager data ID update +
Added and removed data IDs used by Firmware Manager

|v0.2.1
a|T3P data ID cleanup +
Added data IDs used by T3P and removed unused ones

|v0.2.2
a|Data ID additions/fixes

* ItemIDs added without data access
    ** kEsfParameterStorageManagerItemDebugLogLevel2
    ** kEsfParameterStorageManagerItemEventLogLevel2
    ** kEsfParameterStorageManagerItemDebugLogDestination2
    ** kEsfParameterStorageManagerItemLogFilter2
    ** kEsfParameterStorageManagerItemLogUseFlash2
    ** kEsfParameterStorageManagerItemStorageName2
    ** kEsfParameterStorageManagerItemStorageSubDirectoryPath2
* ItemIDs with data access enabled
    ** kEsfParameterStorageManagerItemInputTensorOnlyModel
    ** kEsfParameterStorageManagerItemInputTensorOnlyParam
* Updated data access settings for:
    ** kEsfParameterStorageManagerItemPreInstallAIModelInfo
    ** kEsfParameterStorageManagerItemPreInstallAIModel

|v0.2.3
a|Enabled access to log-related data IDs

* ItemIDs added without data access
    ** kEsfParameterStorageManagerItemDebugLogLevel2
    ** kEsfParameterStorageManagerItemEventLogLevel2
    ** kEsfParameterStorageManagerItemDebugLogDestination2
    ** kEsfParameterStorageManagerItemLogFilter2
    ** kEsfParameterStorageManagerItemLogUseFlash2
    ** kEsfParameterStorageManagerItemStorageName2
    ** kEsfParameterStorageManagerItemStorageSubDirectoryPath2
    ** kEsfParameterStorageManagerItemDebugLogLevel3
    ** kEsfParameterStorageManagerItemEventLogLevel3
    ** kEsfParameterStorageManagerItemDebugLogDestination3
    ** kEsfParameterStorageManagerItemLogFilter3
    ** kEsfParameterStorageManagerItemLogUseFlash3
    ** kEsfParameterStorageManagerItemStorageName3
    ** kEsfParameterStorageManagerItemStorageSubDirectoryPath3
    ** kEsfParameterStorageManagerItemDebugLogLevel4
    ** kEsfParameterStorageManagerItemEventLogLevel4
    ** kEsfParameterStorageManagerItemDebugLogDestination4
    ** kEsfParameterStorageManagerItemLogFilter4
    ** kEsfParameterStorageManagerItemLogUseFlash4
    ** kEsfParameterStorageManagerItemStorageName4
    ** kEsfParameterStorageManagerItemStorageSubDirectoryPath4

|v0.2.4
a|Exclusion of SensorAI FW/Loader Address from Factory Reset

* Updated the following ItemIDs to be excluded from Factory Reset:
    ** kEsfParameterStorageManagerItemSensorAIModelFlashAddress
    ** kEsfParameterStorageManagerItemSensorLoaderFlashAddress
    ** kEsfParameterStorageManagerItemSensorFWFlashAddress

|v0.2.5
a|Modified restrictions for offset-unavailable data

* Added “Offset Available” column to data setting table
* Removed device-specific specifications/limitations and added notes on offset availability
* Revised description of offset binary data
* Removed Device Setting document from references

|v0.2.6
a|Exclusion of FwMgrBinaryInfo 8–12 from Factory Reset

* Updated the following ItemIDs to be excluded from Factory Reset:
    ** kEsfParameterStorageManagerItemFwMgrBinaryInfo8
    ** kEsfParameterStorageManagerItemFwMgrBinaryInfo9
    ** kEsfParameterStorageManagerItemFwMgrBinaryInfo10
    ** kEsfParameterStorageManagerItemFwMgrBinaryInfo11
    ** kEsfParameterStorageManagerItemFwMgrBinaryInfo12

|v0.2.7
a|Added data ID

* ItemIDs with data access:
    ** kEsfParameterStorageManagerItemSystemError

|v0.2.8
a|Exclusion of EsfSensorConfig from Factory Reset

* Updated the following ItemID to be excluded from Factory Reset:
    ** kEsfParameterStorageManagerItemEsfSensorConfig

|v0.2.9
a|T3P downgrade support

|v0.3.0
a|WDT KeepAlive call during Factory Reset

* Updated config list:
    ** Added ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_POWER_MANAGER_STUB**``
    ** Added ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_UTILITY_LOG_STUB**``
    ** Added ``**EXTERNAL_PARAMETER_STORAGE_MANAGER_UTILITY_LOG_ENABLE**``
    ** Changed default DLOG DEBUG level to y
    ** Added ELOG configs

|v0.3.1
a|Added ItemIDs for v1 IMX500 loader/FW update time

* Added:
    ** ``**kEsfParameterStorageManagerItemMCUFWLastUpdate**``
    ** ``**kEsfParameterStorageManagerItemSensorLoaderLastUpdate**``
    ** ``**kEsfParameterStorageManagerItemSensorFWLastUpdate**``

|v0.3.2
a|Content review

* Revised API error code descriptions

|v0.3.3
a|Support for ESF PowerManager exception info output

* Added:
    ** ``**kEsfParameterStorageManagerItemExceptionFactor**``
    ** ``**kEsfParameterStorageManagerItemExceptionInfo**``
    ** ``**kEsfParameterStorageManagerItemEvpExceptionFactor**``

|===
